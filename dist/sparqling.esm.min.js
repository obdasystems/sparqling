/**
 * MIT License
 *
 * Copyright (c) 2022 OBDA Systems
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

import e from"axios";import{UI as t,Type as i}from"grapholscape";import n from"cytoscape";import r from"cytoscape-klay";import o from"cytoscape-compound-drag-and-drop";import s from"cytoscape-popper";function a(e,t){let i=e.cy();t&&i.zoom(t);let n=e.renderedPosition(),r=i.width()/2,o=i.height()/2;i.panBy({x:-(n.x-r),y:-(n.y-o)})}!function(){let e=document.createElement("div");e.setAttribute("id","grapholscape"),e.style.position="relative",e.style.height="100%"}();const l=function(){let e=document.createElement("div");return e.setAttribute("id","sparqling-query-graph"),e.style.position="relative",e.style.height="300px",e.style.width="100%",e}(),d=function(){let e=document.createElement("div");return e.setAttribute("id","sparqling-left-column"),e.style.position="absolute",e.style.left="10px",e.style.top="100%",e.style.transform="translate(0, calc(-100% - 10px))",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="space-between",e.style.gap="30px",e.style.height="calc(-80px + 100%)",e.style.pointerEvents="none",e}();function c(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}const u="http://localhost:7979/sparqling/1.0.0".replace(/\/+$/,"");class p{constructor(t,i=u,n=e){this.basePath=i,this.axios=n,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)}}class h extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const g="https://example.com",f=function(e,t,i){if(null==i)throw new h(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},v=function(e,...t){const i=new URLSearchParams(e.search);for(const e of t)for(const t in e)if(Array.isArray(e[t])){i.delete(t);for(const n of e[t])i.append(t,n)}else i.set(t,e[t]);e.search=i.toString()},m=function(e,t,i){const n="string"!=typeof e;return(n&&i&&i.isJsonMime?i.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},y=function(e){return e.pathname+e.search+e.hash},b=function(e,t,i,n){return(r=t,o=i)=>{const s=Object.assign(Object.assign({},e.options),{url:((null==n?void 0:n.basePath)||o)+e.url});return r.request(s)}},C={Class:"class",ObjectProperty:"objectProperty",InverseObjectProperty:"inverseObjectProperty",DataProperty:"dataProperty"},w={Equal:"=",NotEqual:"!=",LessThan:"<",GreaterThan:">",LessThanOrEqualTo:"<=",GreaterThanOrEqualTo:">=",In:"IN",NotIn:"NOT IN",Regex:"REGEX"},x={Add:"ADD",Subctract:"SUBCTRACT",Multiply:"MULTIPLY",Divide:"DIVIDE",Substr:"SUBSTR",Ucase:"UCASE",Lcase:"LCASE",Contains:"CONTAINS",Concat:"CONCAT",Round:"ROUND",Ceil:"CEIL",Floor:"FLOOR",Year:"YEAR",Month:"MONTH",Day:"DAY",Hours:"HOURS",Minutes:"MINUTES",Seconds:"SECONDS"},O={Count:"count",Sum:"sum",Min:"min",Max:"max",Avarage:"avarage"},E="var",$="constant",A="iri",T={String:"xsd:string",Decimal:"xsd:decimal",DateTime:"xsd:dateTime"},j=function(t){const i=function(e){return{highligths:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("highligths","clickedClassIRI",t);const r=new URL("/highlights",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),a={};void 0!==t&&(a.clickedClassIRI=t),i&&(a.params=i),v(r,a);let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),l),n.headers),{url:y(r),options:s}})),highligthsPaths:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("highligthsPaths","lastSelectedIRI",t),f("highligthsPaths","clickedIRI",i);const r=new URL("/highlights/paths",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},o),n),a={};void 0!==t&&(a.lastSelectedIRI=t),void 0!==i&&(a.clickedIRI=i),v(r,a);let l=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),l),n.headers),{url:y(r),options:s}}))}}(t);return{highligths(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.highligths(n,r,o);return b(s,e,u,t)}))},highligthsPaths(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.highligthsPaths(n,r,o);return b(s,e,u,t)}))}}};class H extends p{highligths(e,t,i){return j(this.configuration).highligths(e,t,i).then((e=>e(this.axios,this.basePath)))}highligthsPaths(e,t,i){return j(this.configuration).highligthsPaths(e,t,i).then((e=>e(this.axios,this.basePath)))}}const S=function(t){const i=function(e){return{addPathToQueryGraph:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("addPathToQueryGraph","path",t),f("addPathToQueryGraph","queryGraph",i);const r=new URL("/queryGraph/path",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},o),n),a={},l={};void 0!==t&&(l.path=t),a["Content-Type"]="application/json",v(r,l);let d=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=m(i,s,e),{url:y(r),options:s}})),deleteGraphElementId:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("deleteGraphElementId","graphElementId",t),f("deleteGraphElementId","queryGraph",i);const r="/queryGraph/node/delete/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),deleteGraphElementIdClass:(t,i,n,r={})=>c(this,void 0,void 0,(function*(){f("deleteGraphElementIdClass","graphElementId",t),f("deleteGraphElementIdClass","classIRI",i),f("deleteGraphElementIdClass","queryGraph",n);const o="/queryGraph/node/delete/{graphElementId}/class".replace("{graphElementId}",encodeURIComponent(String(t))),s=new URL(o,g);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),r),d={},c={};void 0!==i&&(c.classIRI=i),d["Content-Type"]="application/json",v(s,c);let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},d),u),r.headers),l.data=m(n,l,e),{url:y(s),options:l}})),getQueryGraph:(t,i={})=>c(this,void 0,void 0,(function*(){f("getQueryGraph","clickedClassIRI",t);const n=new URL("/queryGraph/node",g);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},r),i),s={};void 0!==t&&(s.clickedClassIRI=t),v(n,s);let a=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),a),i.headers),{url:y(n),options:o}})),putQueryGraphClass:(t,i,n,r,o={})=>c(this,void 0,void 0,(function*(){f("putQueryGraphClass","graphElementId",t),f("putQueryGraphClass","sourceClassIRI",i),f("putQueryGraphClass","targetClassIRI",n),f("putQueryGraphClass","queryGraph",r);const s="/queryGraph/node/class/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),a=new URL(s,g);let l;e&&(l=e.baseOptions);const d=Object.assign(Object.assign({method:"PUT"},l),o),c={},u={};void 0!==i&&(u.sourceClassIRI=i),void 0!==n&&(u.targetClassIRI=n),c["Content-Type"]="application/json",v(a,u);let p=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),p),o.headers),d.data=m(r,d,e),{url:y(a),options:d}})),putQueryGraphDataProperty:(t,i,n,r,o={})=>c(this,void 0,void 0,(function*(){f("putQueryGraphDataProperty","graphElementId",t),f("putQueryGraphDataProperty","sourceClassIRI",i),f("putQueryGraphDataProperty","predicateIRI",n),f("putQueryGraphDataProperty","queryGraph",r);const s="/queryGraph/node/dataProperty/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),a=new URL(s,g);let l;e&&(l=e.baseOptions);const d=Object.assign(Object.assign({method:"PUT"},l),o),c={},u={};void 0!==i&&(u.sourceClassIRI=i),void 0!==n&&(u.predicateIRI=n),c["Content-Type"]="application/json",v(a,u);let p=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),p),o.headers),d.data=m(r,d,e),{url:y(a),options:d}})),putQueryGraphJoin:(t,i,n,r={})=>c(this,void 0,void 0,(function*(){f("putQueryGraphJoin","graphElementId1",t),f("putQueryGraphJoin","graphElementId2",i),f("putQueryGraphJoin","queryGraph",n);const o="/queryGraph/node/join/{graphElementId1}/{graphElementId2}".replace("{graphElementId1}",encodeURIComponent(String(t))).replace("{graphElementId2}",encodeURIComponent(String(i))),s=new URL(o,g);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),r),d={"Content-Type":"application/json"};v(s,{});let c=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},d),c),r.headers),l.data=m(n,l,e),{url:y(s),options:l}})),putQueryGraphObjectProperty:(t,i,n,r,o,s,a={})=>c(this,void 0,void 0,(function*(){f("putQueryGraphObjectProperty","graphElementId",t),f("putQueryGraphObjectProperty","sourceClassIRI",i),f("putQueryGraphObjectProperty","predicateIRI",n),f("putQueryGraphObjectProperty","targetClassIRI",r),f("putQueryGraphObjectProperty","isPredicateDirect",o),f("putQueryGraphObjectProperty","queryGraph",s);const l="/queryGraph/node/objectProperty/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),d=new URL(l,g);let c;e&&(c=e.baseOptions);const u=Object.assign(Object.assign({method:"PUT"},c),a),p={},h={};void 0!==i&&(h.sourceClassIRI=i),void 0!==n&&(h.predicateIRI=n),void 0!==r&&(h.targetClassIRI=r),void 0!==o&&(h.isPredicateDirect=o),p["Content-Type"]="application/json",v(d,h);let b=c&&c.headers?c.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},p),b),a.headers),u.data=m(s,u,e),{url:y(d),options:u}}))}}(t);return{addPathToQueryGraph(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.addPathToQueryGraph(n,r,o);return b(s,e,u,t)}))},deleteGraphElementId(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.deleteGraphElementId(n,r,o);return b(s,e,u,t)}))},deleteGraphElementIdClass(n,r,o,s){return c(this,void 0,void 0,(function*(){const a=yield i.deleteGraphElementIdClass(n,r,o,s);return b(a,e,u,t)}))},getQueryGraph(n,r){return c(this,void 0,void 0,(function*(){const o=yield i.getQueryGraph(n,r);return b(o,e,u,t)}))},putQueryGraphClass(n,r,o,s,a){return c(this,void 0,void 0,(function*(){const l=yield i.putQueryGraphClass(n,r,o,s,a);return b(l,e,u,t)}))},putQueryGraphDataProperty(n,r,o,s,a){return c(this,void 0,void 0,(function*(){const l=yield i.putQueryGraphDataProperty(n,r,o,s,a);return b(l,e,u,t)}))},putQueryGraphJoin(n,r,o,s){return c(this,void 0,void 0,(function*(){const a=yield i.putQueryGraphJoin(n,r,o,s);return b(a,e,u,t)}))},putQueryGraphObjectProperty(n,r,o,s,a,l,d){return c(this,void 0,void 0,(function*(){const c=yield i.putQueryGraphObjectProperty(n,r,o,s,a,l,d);return b(c,e,u,t)}))}}},I=function(e,t,i){const n=S(e);return{addPathToQueryGraph:(e,r,o)=>n.addPathToQueryGraph(e,r,o).then((e=>e(i,t))),deleteGraphElementId:(e,r,o)=>n.deleteGraphElementId(e,r,o).then((e=>e(i,t))),deleteGraphElementIdClass:(e,r,o,s)=>n.deleteGraphElementIdClass(e,r,o,s).then((e=>e(i,t))),getQueryGraph:(e,r)=>n.getQueryGraph(e,r).then((e=>e(i,t))),putQueryGraphClass:(e,r,o,s,a)=>n.putQueryGraphClass(e,r,o,s,a).then((e=>e(i,t))),putQueryGraphDataProperty:(e,r,o,s,a)=>n.putQueryGraphDataProperty(e,r,o,s,a).then((e=>e(i,t))),putQueryGraphJoin:(e,r,o,s)=>n.putQueryGraphJoin(e,r,o,s).then((e=>e(i,t))),putQueryGraphObjectProperty:(e,r,o,s,a,l,d)=>n.putQueryGraphObjectProperty(e,r,o,s,a,l,d).then((e=>e(i,t)))}};class L extends p{addPathToQueryGraph(e,t,i){return S(this.configuration).addPathToQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}deleteGraphElementId(e,t,i){return S(this.configuration).deleteGraphElementId(e,t,i).then((e=>e(this.axios,this.basePath)))}deleteGraphElementIdClass(e,t,i,n){return S(this.configuration).deleteGraphElementIdClass(e,t,i,n).then((e=>e(this.axios,this.basePath)))}getQueryGraph(e,t){return S(this.configuration).getQueryGraph(e,t).then((e=>e(this.axios,this.basePath)))}putQueryGraphClass(e,t,i,n,r){return S(this.configuration).putQueryGraphClass(e,t,i,n,r).then((e=>e(this.axios,this.basePath)))}putQueryGraphDataProperty(e,t,i,n,r){return S(this.configuration).putQueryGraphDataProperty(e,t,i,n,r).then((e=>e(this.axios,this.basePath)))}putQueryGraphJoin(e,t,i,n){return S(this.configuration).putQueryGraphJoin(e,t,i,n).then((e=>e(this.axios,this.basePath)))}putQueryGraphObjectProperty(e,t,i,n,r,o,s){return S(this.configuration).putQueryGraphObjectProperty(e,t,i,n,r,o,s).then((e=>e(this.axios,this.basePath)))}}const P=function(t){const i=function(e){return{countStarQueryGraph:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("countStarQueryGraph","distinct",t),f("countStarQueryGraph","queryGraph",i);const r=new URL("/queryGraph/countStar",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},o),n),a={},l={};void 0!==t&&(l.distinct=t),a["Content-Type"]="application/json",v(r,l);let d=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=m(i,s,e),{url:y(r),options:s}})),distinctQueryGraph:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("distinctQueryGraph","distinct",t),f("distinctQueryGraph","queryGraph",i);const r=new URL("/queryGraph/distinct",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},o),n),a={},l={};void 0!==t&&(l.distinct=t),a["Content-Type"]="application/json",v(r,l);let d=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=m(i,s,e),{url:y(r),options:s}})),limitQueryGraph:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("limitQueryGraph","limit",t),f("limitQueryGraph","queryGraph",i);const r=new URL("/queryGraph/limit",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},o),n),a={},l={};void 0!==t&&(l.limit=t),a["Content-Type"]="application/json",v(r,l);let d=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=m(i,s,e),{url:y(r),options:s}})),offsetQueryGraph:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("offsetQueryGraph","offset",t),f("offsetQueryGraph","queryGraph",i);const r=new URL("/queryGraph/offset",g);let o;e&&(o=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},o),n),a={},l={};void 0!==t&&(l.offset=t),a["Content-Type"]="application/json",v(r,l);let d=o&&o.headers?o.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=m(i,s,e),{url:y(r),options:s}}))}}(t);return{countStarQueryGraph(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.countStarQueryGraph(n,r,o);return b(s,e,u,t)}))},distinctQueryGraph(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.distinctQueryGraph(n,r,o);return b(s,e,u,t)}))},limitQueryGraph(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.limitQueryGraph(n,r,o);return b(s,e,u,t)}))},offsetQueryGraph(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.offsetQueryGraph(n,r,o);return b(s,e,u,t)}))}}};class _ extends p{countStarQueryGraph(e,t,i){return P(this.configuration).countStarQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}distinctQueryGraph(e,t,i){return P(this.configuration).distinctQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}limitQueryGraph(e,t,i){return P(this.configuration).limitQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}offsetQueryGraph(e,t,i){return P(this.configuration).offsetQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}}const G=function(t){const i=function(e){return{editFilter:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("editFilter","filterId",t),f("editFilter","queryGraph",i);const r="/queryGraph/node/filter/edit/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),newFilter:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("newFilter","filterId",t),f("newFilter","queryGraph",i);const r="/queryGraph/node/filter/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),removeAllFilters:(t,i={})=>c(this,void 0,void 0,(function*(){f("removeAllFilters","queryGraph",t);const n=new URL("/queryGraph/node/filter/remove/all",g);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"PUT"},r),i),s={"Content-Type":"application/json"};v(n,{});let a=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),o.data=m(t,o,e),{url:y(n),options:o}})),removeFilter:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("removeFilter","filterId",t),f("removeFilter","queryGraph",i);const r="/queryGraph/node/filter/remove/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}}))}}(t);return{editFilter(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.editFilter(n,r,o);return b(s,e,u,t)}))},newFilter(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.newFilter(n,r,o);return b(s,e,u,t)}))},removeAllFilters(n,r){return c(this,void 0,void 0,(function*(){const o=yield i.removeAllFilters(n,r);return b(o,e,u,t)}))},removeFilter(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.removeFilter(n,r,o);return b(s,e,u,t)}))}}};class k extends p{editFilter(e,t,i){return G(this.configuration).editFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}newFilter(e,t,i){return G(this.configuration).newFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}removeAllFilters(e,t){return G(this.configuration).removeAllFilters(e,t).then((e=>e(this.axios,this.basePath)))}removeFilter(e,t,i){return G(this.configuration).removeFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}}const B=function(t){const i=function(e){return{addHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("addHeadTerm","graphElementId",t),f("addHeadTerm","queryGraph",i);const r="/queryGraph/head/add/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),aggregationHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("aggregationHeadTerm","headTerm",t),f("aggregationHeadTerm","queryGraph",i);const r="/queryGraph/head/aggregation/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),deleteHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("deleteHeadTerm","headTerm",t),f("deleteHeadTerm","queryGraph",i);const r="/queryGraph/head/delete/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),functionHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("functionHeadTerm","headTerm",t),f("functionHeadTerm","queryGraph",i);const r="/queryGraph/head/function/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),orderByHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("orderByHeadTerm","headTerm",t),f("orderByHeadTerm","queryGraph",i);const r="/queryGraph/head/orderBy/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),renameHeadTerm:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("renameHeadTerm","headTerm",t),f("renameHeadTerm","queryGraph",i);const r="/queryGraph/head/rename/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),reorderHeadTerms:(t,i={})=>c(this,void 0,void 0,(function*(){f("reorderHeadTerms","queryGraph",t);const n=new URL("/queryGraph/head/reorderHeadTerms",g);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"PUT"},r),i),s={"Content-Type":"application/json"};v(n,{});let a=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),o.data=m(t,o,e),{url:y(n),options:o}}))}}(t);return{addHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.addHeadTerm(n,r,o);return b(s,e,u,t)}))},aggregationHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.aggregationHeadTerm(n,r,o);return b(s,e,u,t)}))},deleteHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.deleteHeadTerm(n,r,o);return b(s,e,u,t)}))},functionHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.functionHeadTerm(n,r,o);return b(s,e,u,t)}))},orderByHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.orderByHeadTerm(n,r,o);return b(s,e,u,t)}))},renameHeadTerm(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.renameHeadTerm(n,r,o);return b(s,e,u,t)}))},reorderHeadTerms(n,r){return c(this,void 0,void 0,(function*(){const o=yield i.reorderHeadTerms(n,r);return b(o,e,u,t)}))}}},R=function(e,t,i){const n=B(e);return{addHeadTerm:(e,r,o)=>n.addHeadTerm(e,r,o).then((e=>e(i,t))),aggregationHeadTerm:(e,r,o)=>n.aggregationHeadTerm(e,r,o).then((e=>e(i,t))),deleteHeadTerm:(e,r,o)=>n.deleteHeadTerm(e,r,o).then((e=>e(i,t))),functionHeadTerm:(e,r,o)=>n.functionHeadTerm(e,r,o).then((e=>e(i,t))),orderByHeadTerm:(e,r,o)=>n.orderByHeadTerm(e,r,o).then((e=>e(i,t))),renameHeadTerm:(e,r,o)=>n.renameHeadTerm(e,r,o).then((e=>e(i,t))),reorderHeadTerms:(e,r)=>n.reorderHeadTerms(e,r).then((e=>e(i,t)))}};class V extends p{addHeadTerm(e,t,i){return B(this.configuration).addHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}aggregationHeadTerm(e,t,i){return B(this.configuration).aggregationHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}deleteHeadTerm(e,t,i){return B(this.configuration).deleteHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}functionHeadTerm(e,t,i){return B(this.configuration).functionHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}orderByHeadTerm(e,t,i){return B(this.configuration).orderByHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}renameHeadTerm(e,t,i){return B(this.configuration).renameHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}reorderHeadTerms(e,t){return B(this.configuration).reorderHeadTerms(e,t).then((e=>e(this.axios,this.basePath)))}}const D=function(t){const i=function(e){return{newOptionalGraphElementId:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("newOptionalGraphElementId","graphElementId",t),f("newOptionalGraphElementId","queryGraph",i);const r="/queryGraph/node/optional/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}})),removeAllOptional:(t,i={})=>c(this,void 0,void 0,(function*(){f("removeAllOptional","queryGraph",t);const n=new URL("/queryGraph/node/optional/remove/all",g);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"PUT"},r),i),s={"Content-Type":"application/json"};v(n,{});let a=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),o.data=m(t,o,e),{url:y(n),options:o}})),removeOptionalGraphElementId:(t,i,n={})=>c(this,void 0,void 0,(function*(){f("removeOptionalGraphElementId","graphElementId",t),f("removeOptionalGraphElementId","queryGraph",i);const r="/queryGraph/node/optional/remove/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),o=new URL(r,g);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};v(o,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=m(i,a,e),{url:y(o),options:a}}))}}(t);return{newOptionalGraphElementId(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.newOptionalGraphElementId(n,r,o);return b(s,e,u,t)}))},removeAllOptional(n,r){return c(this,void 0,void 0,(function*(){const o=yield i.removeAllOptional(n,r);return b(o,e,u,t)}))},removeOptionalGraphElementId(n,r,o){return c(this,void 0,void 0,(function*(){const s=yield i.removeOptionalGraphElementId(n,r,o);return b(s,e,u,t)}))}}},M=function(e,t,i){const n=D(e);return{newOptionalGraphElementId:(e,r,o)=>n.newOptionalGraphElementId(e,r,o).then((e=>e(i,t))),removeAllOptional:(e,r)=>n.removeAllOptional(e,r).then((e=>e(i,t))),removeOptionalGraphElementId:(e,r,o)=>n.removeOptionalGraphElementId(e,r,o).then((e=>e(i,t)))}},q=function(t){const i=function(e){return{standaloneOntologyGrapholGet:(t={})=>c(this,void 0,void 0,(function*(){const i=new URL("/standalone/ontology/graphol",g);let n;e&&(n=e.baseOptions);const r=Object.assign(Object.assign({method:"GET"},n),t);v(i,{});let o=n&&n.headers?n.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},{}),o),t.headers),{url:y(i),options:r}})),standaloneOntologyUploadPost:(t,i={})=>c(this,void 0,void 0,(function*(){const n=new URL("/standalone/ontology/upload",g);let r;e&&(r=e.baseOptions);const o=Object.assign(Object.assign({method:"POST"},r),i),s={},a=new(e&&e.formDataCtor||FormData);void 0!==t&&a.append("file",t),s["Content-Type"]="multipart/form-data",v(n,{});let l=r&&r.headers?r.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),l),i.headers),o.data=a,{url:y(n),options:o}}))}}(t);return{standaloneOntologyGrapholGet(n){return c(this,void 0,void 0,(function*(){const r=yield i.standaloneOntologyGrapholGet(n);return b(r,e,u,t)}))},standaloneOntologyUploadPost(n,r){return c(this,void 0,void 0,(function*(){const o=yield i.standaloneOntologyUploadPost(n,r);return b(o,e,u,t)}))}}};class U extends p{standaloneOntologyGrapholGet(e){return q(this.configuration).standaloneOntologyGrapholGet(e).then((e=>e(this.axios,this.basePath)))}standaloneOntologyUploadPost(e,t){return q(this.configuration).standaloneOntologyUploadPost(e,t).then((e=>e(this.axios,this.basePath)))}}let F,Q;const N=new Map;function z(e){return F=e,F}function W(e){Q=e}function Z(){return F}function J(){return Q}function Y(){return N}function X(){return JSON.parse(JSON.stringify(F))}function K(e,t=F){var i;return null===(i=null==t?void 0:t.head)||void 0===i?void 0:i.find((t=>t.id===e))}function ee(){var e,t;return 1===(null===(e=null==F?void 0:F.head)||void 0===e?void 0:e.length)&&null===(null===(t=null==F?void 0:F.head[0])||void 0===t?void 0:t.graphElementId)}function te(e){var t;const i=Z();let n=null===(t=null==i?void 0:i.filters)||void 0===t?void 0:t.map(((e,t)=>({id:t,value:e})));return null==n?void 0:n.filter((t=>{var i;if(null===(i=t.value.expression)||void 0===i?void 0:i.parameters)return t.value.expression.parameters[0].type===E&&t.value.expression.parameters[0].value===e}))}let ie={basePath:void 0,version:void 0,headers:void 0};function ne(){return ie.basePath}function re(){return{params:{version:ie.version},headers:ie.headers}}function oe(){return!ie.basePath}let se,ae=0;let le=!1,de=!1;function ce(){return se}function ue(e){se=e}function pe(e){le=e}function he(){return de}function ge(e){de=e}function fe(e){var t;return me(null===(t=Z())||void 0===t?void 0:t.graph,(t=>t.id===e))}function ve(e){var t;return me(null===(t=Z())||void 0===t?void 0:t.graph,(t=>Ce(t,e)))}function me(e,t){if(e){if(t(e))return e;if(e.children)for(let i of e.children){let e=me(i,t);if(e)return e}}}function ye(e,t=0){var i;if(null==e?void 0:e.entities)return null===(i=null==e?void 0:e.entities[t])||void 0===i?void 0:i.iri}function be(e){if(null==e?void 0:e.entities)return e.entities[0].type}function Ce(e,t){var i;return(null===(i=null==e?void 0:e.entities)||void 0===i?void 0:i.some((e=>e.iri===t||e.prefixedIri===t)))||!1}function we(e){return be(e)===C.Class}function xe(e){return be(e)===C.ObjectProperty||function(e){return be(e)===C.InverseObjectProperty}(e)}function Oe(e,t){if(!e)return[t];let i=[],n=me(e,(e=>function(e,t){if(!e.id||!t.id)return!1;const i=e.id===t.id,n=te(e.id)===te(t.id),r=JSON.stringify(e.entities)===JSON.stringify(t.entities);return i&&n&&r}(e,t)));if(n||i.push(t),null==t?void 0:t.children)for(let n of t.children){let t=Oe(e,n);t&&i.push(...t)}return i}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Ee=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,$e=Symbol(),Ae=new WeakMap;class Te{constructor(e,t,i){if(this._$cssResult$=!0,i!==$e)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Ee&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=Ae.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Ae.set(t,e))}return e}toString(){return this.cssText}}const je=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new Te(i,e,$e)},He=Ee?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new Te("string"==typeof e?e:e+"",void 0,$e))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var Se;const Ie=window.trustedTypes,Le=Ie?Ie.emptyScript:"",Pe=window.reactiveElementPolyfillSupport,_e={toAttribute(e,t){switch(t){case Boolean:e=e?Le:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},Ge=(e,t)=>t!==e&&(t==t||e==e),ke={attribute:!0,type:String,converter:_e,reflect:!1,hasChanged:Ge};class Be extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;null!==(t=this.h)&&void 0!==t||(this.h=[]),this.h.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e,t=ke){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ke}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(He(e))}else void 0!==e&&t.push(He(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{Ee?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),n=window.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=ke){var n,r;const o=this.constructor._$Ep(e,i);if(void 0!==o&&!0===i.reflect){const s=(null!==(r=null===(n=i.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==r?r:_e.toAttribute)(t,i.type);this._$El=e,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$El=null}}_$AK(e,t){var i,n;const r=this.constructor,o=r._$Ev.get(e);if(void 0!==o&&this._$El!==o){const e=r.getPropertyOptions(o),s=e.converter,a=null!==(n=null!==(i=null==s?void 0:s.fromAttribute)&&void 0!==i?i:"function"==typeof s?s:null)&&void 0!==n?n:_e.fromAttribute;this._$El=o,this[o]=a(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Ge)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Re;Be.finalized=!0,Be.elementProperties=new Map,Be.elementStyles=[],Be.shadowRootOptions={mode:"open"},null==Pe||Pe({ReactiveElement:Be}),(null!==(Se=globalThis.reactiveElementVersions)&&void 0!==Se?Se:globalThis.reactiveElementVersions=[]).push("1.3.3");const Ve=globalThis.trustedTypes,De=Ve?Ve.createPolicy("lit-html",{createHTML:e=>e}):void 0,Me=`lit$${(Math.random()+"").slice(9)}$`,qe="?"+Me,Ue=`<${qe}>`,Fe=document,Qe=(e="")=>Fe.createComment(e),Ne=e=>null===e||"object"!=typeof e&&"function"!=typeof e,ze=Array.isArray,We=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ze=/-->/g,Je=/>/g,Ye=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Xe=/'/g,Ke=/"/g,et=/^(?:script|style|textarea|title)$/i,tt=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),it=tt(1),nt=tt(2),rt=Symbol.for("lit-noChange"),ot=Symbol.for("lit-nothing"),st=new WeakMap,at=Fe.createTreeWalker(Fe,129,null,!1),lt=(e,t)=>{const i=e.length-1,n=[];let r,o=2===t?"<svg>":"",s=We;for(let t=0;t<i;t++){const i=e[t];let a,l,d=-1,c=0;for(;c<i.length&&(s.lastIndex=c,l=s.exec(i),null!==l);)c=s.lastIndex,s===We?"!--"===l[1]?s=Ze:void 0!==l[1]?s=Je:void 0!==l[2]?(et.test(l[2])&&(r=RegExp("</"+l[2],"g")),s=Ye):void 0!==l[3]&&(s=Ye):s===Ye?">"===l[0]?(s=null!=r?r:We,d=-1):void 0===l[1]?d=-2:(d=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?Ye:'"'===l[3]?Ke:Xe):s===Ke||s===Xe?s=Ye:s===Ze||s===Je?s=We:(s=Ye,r=void 0);const u=s===Ye&&e[t+1].startsWith("/>")?" ":"";o+=s===We?i+Ue:d>=0?(n.push(a),i.slice(0,d)+"$lit$"+i.slice(d)+Me+u):i+Me+(-2===d?(n.push(void 0),t):u)}const a=o+(e[i]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==De?De.createHTML(a):a,n]};class dt{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,o=0;const s=e.length-1,a=this.parts,[l,d]=lt(e,t);if(this.el=dt.createElement(l,i),at.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=at.nextNode())&&a.length<s;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(Me)){const i=d[o++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+"$lit$").split(Me),t=/([.?@])?(.*)/.exec(i);a.push({type:1,index:r,name:t[2],strings:e,ctor:"."===t[1]?gt:"?"===t[1]?vt:"@"===t[1]?mt:ht})}else a.push({type:6,index:r})}for(const t of e)n.removeAttribute(t)}if(et.test(n.tagName)){const e=n.textContent.split(Me),t=e.length-1;if(t>0){n.textContent=Ve?Ve.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],Qe()),at.nextNode(),a.push({type:2,index:++r});n.append(e[t],Qe())}}}else if(8===n.nodeType)if(n.data===qe)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=n.data.indexOf(Me,e+1));)a.push({type:7,index:r}),e+=Me.length-1}r++}}static createElement(e,t){const i=Fe.createElement("template");return i.innerHTML=e,i}}function ct(e,t,i=e,n){var r,o,s,a;if(t===rt)return t;let l=void 0!==n?null===(r=i._$Cl)||void 0===r?void 0:r[n]:i._$Cu;const d=Ne(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==d&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===d?l=void 0:(l=new d(e),l._$AT(e,i,n)),void 0!==n?(null!==(s=(a=i)._$Cl)&&void 0!==s?s:a._$Cl=[])[n]=l:i._$Cu=l),void 0!==l&&(t=ct(e,l._$AS(e,t.values),l,n)),t}class ut{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:i},parts:n}=this._$AD,r=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Fe).importNode(i,!0);at.currentNode=r;let o=at.nextNode(),s=0,a=0,l=n[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new pt(o,o.nextSibling,this,e):1===l.type?t=new l.ctor(o,l.name,l.strings,this,e):6===l.type&&(t=new yt(o,this,e)),this.v.push(t),l=n[++a]}s!==(null==l?void 0:l.index)&&(o=at.nextNode(),s++)}return r}m(e){let t=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class pt{constructor(e,t,i,n){var r;this.type=2,this._$AH=ot,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cg=null===(r=null==n?void 0:n.isConnected)||void 0===r||r}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ct(this,e,t),Ne(e)?e===ot||null==e||""===e?(this._$AH!==ot&&this._$AR(),this._$AH=ot):e!==this._$AH&&e!==rt&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):(e=>{var t;return ze(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])})(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==ot&&Ne(this._$AH)?this._$AA.nextSibling.data=e:this.k(Fe.createTextNode(e)),this._$AH=e}T(e){var t;const{values:i,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=dt.createElement(n.h,this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===r)this._$AH.m(i);else{const e=new ut(r,this),t=e.p(this.options);e.m(i),this.k(t),this._$AH=e}}_$AC(e){let t=st.get(e.strings);return void 0===t&&st.set(e.strings,t=new dt(e)),t}S(e){ze(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new pt(this.M(Qe()),this.M(Qe()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class ht{constructor(e,t,i,n,r){this.type=1,this._$AH=ot,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ot}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let o=!1;if(void 0===r)e=ct(this,e,t,0),o=!Ne(e)||e!==this._$AH&&e!==rt,o&&(this._$AH=e);else{const n=e;let s,a;for(e=r[0],s=0;s<r.length-1;s++)a=ct(this,n[i+s],t,s),a===rt&&(a=this._$AH[s]),o||(o=!Ne(a)||a!==this._$AH[s]),a===ot?e=ot:e!==ot&&(e+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}o&&!n&&this.C(e)}C(e){e===ot?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class gt extends ht{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===ot?void 0:e}}const ft=Ve?Ve.emptyScript:"";class vt extends ht{constructor(){super(...arguments),this.type=4}C(e){e&&e!==ot?this.element.setAttribute(this.name,ft):this.element.removeAttribute(this.name)}}class mt extends ht{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=ct(this,e,t,0))&&void 0!==i?i:ot)===rt)return;const n=this._$AH,r=e===ot&&n!==ot||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==ot&&(n===ot||r);r&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class yt{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){ct(this,e)}}const bt=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Ct,wt;null==bt||bt(dt,pt),(null!==(Re=globalThis.litHtmlVersions)&&void 0!==Re?Re:globalThis.litHtmlVersions=[]).push("2.2.6");class xt extends Be{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var n,r;const o=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let s=o._$litPart$;if(void 0===s){const e=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;o._$litPart$=s=new pt(t.insertBefore(Qe(),e),e,void 0,null!=i?i:{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return rt}}xt.finalized=!0,xt._$litElement$=!0,null===(Ct=globalThis.litElementHydrateSupport)||void 0===Ct||Ct.call(globalThis,{LitElement:xt});const Ot=globalThis.litElementPolyfillSupport;function Et(e,i){var n;const r=e.operator||"Operator",o=e.datatype||"Datatype",s=new t.GscapeButton(t.icons.plus,"Add input value");return s.id="add-input-btn",it`
    <div class="section">
      ${e.formTitle?it`<div class="section-header">${e.formTitle}</div>`:null}
      <form id="form-dialog" class="form" action="javascript:void(0)" onsubmit="this.handleSubmit">
        <div class="selects-wrapper">
          <div id="select-operator">
            <label>Operator</label>
            ${$t(r,i)}
          </div>
          ${e.parametersType===$?it`
              <div id="select-datatype">
                <label>Datatype</label>
                ${$t(o,Object.values(T),e.isDatatypeSelectorDisabled)}
              </div>`:null}
        </div>
        <div class="inputs-wrapper">
          ${null===(n=e.parametersIriOrConstants)||void 0===n?void 0:n.map(((t,i)=>function(e,t,i,n=""){t===T.DateTime&&(i=(null==i?void 0:i.split("T")[0])||"value");let r=i||"value";return it`
    <input
      class="input-elem"
      type="${function(e){switch(e){case T.DateTime:return"date";case T.Decimal:return"number";case T.String:return"text";default:return""}}(t)}"
      placeholder="${r}"
      value="${i}"
      title="${n}"
      index="${e+1}"
      required
    />`}(i,e.datatype,t.value,"Set input value")))}
          ${e.operator===w.In||e.operator===w.NotIn?it`${s}`:null}
        </div>
      </form>
    </div>
    <div id="message-tray"></div>
  `}function $t(e,t,i=!1){const n=t.includes(e);return it`
    <select required ?disabled=${i}>
      ${n?null:it`<option value="" hidden selected>${e}</option>`}
      ${t.map((t=>t===e?it`<option value="${t}" selected>${t}</option>`:it`<option value="${t}">${t}</option>`))}
    </select>
  `}null==Ot||Ot({LitElement:xt}),(null!==(wt=globalThis.litElementVersions)&&void 0!==wt?wt:globalThis.litElementVersions=[]).push("3.2.1");const At=nt`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24" ><path d="M0 0h24v24H0z" fill="none"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>`,Tt=nt`<svg fill="currentColor"  viewBox="0 0 24 24" ><path fill="currentColor" d="M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z" /></svg>`,jt=nt`<svg fill="currentColor"  viewBox="0 0 24 24" ><path d="M17 16.88C17.56 16.88 18 17.32 18 17.88S17.56 18.88 17 18.88 16 18.43 16 17.88 16.44 16.88 17 16.88M17 13.88C19.73 13.88 22.06 15.54 23 17.88C22.06 20.22 19.73 21.88 17 21.88S11.94 20.22 11 17.88C11.94 15.54 14.27 13.88 17 13.88M17 15.38C15.62 15.38 14.5 16.5 14.5 17.88S15.62 20.38 17 20.38 19.5 19.26 19.5 17.88 18.38 15.38 17 15.38M18 3H4C2.9 3 2 3.9 2 5V17C2 18.1 2.9 19 4 19H9.42C9.26 18.68 9.12 18.34 9 18C9.12 17.66 9.26 17.32 9.42 17H4V13H10V15.97C10.55 15.11 11.23 14.37 12 13.76V13H13.15C14.31 12.36 15.62 12 17 12C18.06 12 19.07 12.21 20 12.59V5C20 3.9 19.1 3 18 3M10 11H4V7H10V11M18 11H12V7H18V11Z" /></svg>`,Ht=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M11,3H13V10.27L19.29,6.64L20.29,8.37L14,12L20.3,15.64L19.3,17.37L13,13.72V21H11V13.73L4.69,17.36L3.69,15.63L10,12L3.72,8.36L4.72,6.63L11,10.26V3Z" /></svg>`,St=nt`<svg viewBox="0 0 943 1019" style="fill: currentColor; display: inline-block; height: 20px; width: 20px; padding:2px"><path fill-rule="evenodd" d="M845,668c-6-3-13-6-19-9l5-0c0,0-42-18-45-152 c-4-133,40-156,40-156l-0,0c33-17,61-43,79-78c48-91,14-203-77-252 C729-26,617,8,569,99c-20,37-25,78-19,117l-2-3c0,0,11,48-103,119 c-113,71-165,35-165,35l3,5c-3-2-6-4-10-6C183,317,70,352,22,443 c-48,91-14,203,77,252c68,36,147,26,204-19l-1,2c0,0,41-34,160,30 c94,50,108,100,110,118c-2,69,33,137,98,171c91,48,203,14,252-77 C970,829,935,717,845,668z M635,693c-15,5-58,11-148-37 c-98-53-113-97-115-110c1-16,1-32-2-48l1,1c0,0-8-43,104-112 c100-62,146-50,154-47c5,4,11,7,17,10c11,6,23,11,35,14 c14,13,39,50,42,149c3,99-26,137-42,150C664,671,648,681,635,693z   M622,81c-54,59-55,146-3,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C765,12,677,21,622,81z   M78,431c-54,59-55,146-03,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C221,363,133,371,78,431z   M654,728c-54,59-55,146-3,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C797,659,709,668,654,728z"></path></svg>`,It=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path  d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z" /></svg>`,Lt=nt`<svg fill="currentColor" viewBox="0 0 26 26"><path d="M8 2C4.1 2 1 5.1 1 9C1 11.4 2.2 13.5 4 14.7V17C4 17.6 4.4 18 5 18H11C11.6 18 12 17.6 12 17V14.7C13.8 13.4 15 11.3 15 9C15 5.1 11.9 2 8 2M5 21C5 21.6 5.4 22 6 22H10C10.6 22 11 21.6 11 21V20H5V21M20.5 14.5V16H19V14.5H20.5M18.5 9.5H17V9C17 7.3 18.3 6 20 6S23 7.3 23 9C23 10 22.5 10.9 21.7 11.4L21.4 11.6C20.8 12 20.5 12.6 20.5 13.3V13.5H19V13.3C19 12.1 19.6 11 20.6 10.4L20.9 10.2C21.3 9.9 21.5 9.5 21.5 9C21.5 8.2 20.8 7.5 20 7.5S18.5 8.2 18.5 9V9.5Z" /></svg>`,Pt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" /></svg>`,_t=nt`<svg  fill="currentColor" viewBox="0 0 24 24"><path d="M12 12V19.88C12.04 20.18 11.94 20.5 11.71 20.71C11.32 21.1 10.69 21.1 10.3 20.71L8.29 18.7C8.06 18.47 7.96 18.16 8 17.87V12H7.97L2.21 4.62C1.87 4.19 1.95 3.56 2.38 3.22C2.57 3.08 2.78 3 3 3H17C17.22 3 17.43 3.08 17.62 3.22C18.05 3.56 18.13 4.19 17.79 4.62L12.03 12H12M15 17H18V14H20V17H23V19H20V22H18V19H15V17Z" /></svg>`,Gt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>`,kt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M2,6V8H14V6H2M2,10V12H14V10H2M20.04,10.13C19.9,10.13 19.76,10.19 19.65,10.3L18.65,11.3L20.7,13.35L21.7,12.35C21.92,12.14 21.92,11.79 21.7,11.58L20.42,10.3C20.31,10.19 20.18,10.13 20.04,10.13M18.07,11.88L12,17.94V20H14.06L20.12,13.93L18.07,11.88M2,14V16H10V14H2Z" /></svg>`,Bt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z" /></svg>`,Rt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z" /></svg>`,Vt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M13 2.03V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03M11 2.06C9.05 2.25 7.19 3 5.67 4.26L7.1 5.74C8.22 4.84 9.57 4.26 11 4.06V2.06M4.26 5.67C3 7.19 2.25 9.04 2.05 11H4.05C4.24 9.58 4.8 8.23 5.69 7.1L4.26 5.67M2.06 13C2.26 14.96 3.03 16.81 4.27 18.33L5.69 16.9C4.81 15.77 4.24 14.42 4.06 13H2.06M7.1 18.37L5.67 19.74C7.18 21 9.04 21.79 11 22V20C9.58 19.82 8.23 19.25 7.1 18.37M20 4H44M13 18H11V16H13V18M13 15H11C11 11.75 14 12 14 10C14 8.9 13.1 8 12 8S10 8.9 10 10H8C8 7.79 9.79 6 12 6S16 7.79 16 10C16 12.5 13 12.75 13 15Z" /></svg>`,Dt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>`,Mt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z" /></svg>`,qt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" /></svg>`,Ut=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z" /></svg>`,Ft=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M15.6,5.29C14.5,5.19 13.53,6 13.43,7.11L13.18,10H16V12H13L12.56,17.07C12.37,19.27 10.43,20.9 8.23,20.7C6.92,20.59 5.82,19.86 5.17,18.83L6.67,17.33C6.91,18.07 7.57,18.64 8.4,18.71C9.5,18.81 10.47,18 10.57,16.89L11,12H8V10H11.17L11.44,6.93C11.63,4.73 13.57,3.1 15.77,3.3C17.08,3.41 18.18,4.14 18.83,5.17L17.33,6.67C17.09,5.93 16.43,5.36 15.6,5.29Z" /></svg>`,Qt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M9.25,5L12.5,1.75L15.75,5H9.25M15.75,19L12.5,22.25L9.25,19H15.75M8.89,14.3H6L5.28,17H2.91L6,7H9L12.13,17H9.67L8.89,14.3M6.33,12.68H8.56L7.93,10.56L7.67,9.59L7.42,8.63H7.39L7.17,9.6L6.93,10.58L6.33,12.68M13.05,17V15.74L17.8,8.97V8.91H13.5V7H20.73V8.34L16.09,15V15.08H20.8V17H13.05Z" /></svg>`,Nt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M19 17H22L18 21L14 17H17V3H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z" /></svg>`,zt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M19 7H22L18 3L14 7H17V21H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z" /></svg>`,Wt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M18,6H8.83L14.83,12L8.83,18H18V20H6V18L12,12L6,6V4H18V6Z" /></svg>`,Zt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z" /></svg>`,Jt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M4,6V18H11V6H4M20,18V6H18.76C19,6.54 18.95,7.07 18.95,7.13C18.88,7.8 18.41,8.5 18.24,8.75L15.91,11.3L19.23,11.28L19.24,12.5L14.04,12.47L14,11.47C14,11.47 17.05,8.24 17.2,7.95C17.34,7.67 17.91,6 16.5,6C15.27,6.05 15.41,7.3 15.41,7.3L13.87,7.31C13.87,7.31 13.88,6.65 14.25,6H13V18H15.58L15.57,17.14L16.54,17.13C16.54,17.13 17.45,16.97 17.46,16.08C17.5,15.08 16.65,15.08 16.5,15.08C16.37,15.08 15.43,15.13 15.43,15.95H13.91C13.91,15.95 13.95,13.89 16.5,13.89C19.1,13.89 18.96,15.91 18.96,15.91C18.96,15.91 19,17.16 17.85,17.63L18.37,18H20M8.92,16H7.42V10.2L5.62,10.76V9.53L8.76,8.41H8.92V16Z" /></svg>`,Yt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M13 2.03V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03M11 2.06C9.05 2.25 7.19 3 5.67 4.26L7.1 5.74C8.22 4.84 9.57 4.26 11 4.06V2.06M4.26 5.67C3 7.19 2.25 9.04 2.05 11H4.05C4.24 9.58 4.8 8.23 5.69 7.1L4.26 5.67M2.06 13C2.26 14.96 3.03 16.81 4.27 18.33L5.69 16.9C4.81 15.77 4.24 14.42 4.06 13H2.06M7.1 18.37L5.67 19.74C7.18 21 9.04 21.79 11 22V20C9.58 19.82 8.23 19.25 7.1 18.37M14.59 8L12 10.59L9.41 8L8 9.41L10.59 12L8 14.59L9.41 16L12 13.41L14.59 16L16 14.59L13.41 12L16 9.41L14.59 8Z" /></svg>`,Xt=nt`<svg fill="currentColor" viewBox="0 0 24 24"><path d="M3.46 5C3.25 5 3.04 5.08 2.87 5.21C2.43 5.55 2.35 6.18 2.69 6.61L2.69 6.62L8 13.42V19.41L10.29 21.71C10.68 22.1 11.32 22.1 11.71 21.71C12.1 21.32 12.1 20.68 11.71 20.29L10 18.59V12.73L4.27 5.39C4.08 5.14 3.78 5 3.46 5M16 12V19.88C16.04 20.18 15.94 20.5 15.71 20.71C15.32 21.1 14.69 21.1 14.3 20.71L12.29 18.7C12.06 18.47 11.96 18.16 12 17.87V12H11.97L6.21 4.62C5.87 4.19 5.95 3.56 6.38 3.22C6.57 3.08 6.78 3 7 3H21C21.22 3 21.43 3.08 21.62 3.22C22.05 3.56 22.13 4.19 21.79 4.62L16.03 12H16Z" /></svg>`;function Kt(e){const t=e.validity;return t.valueMissing?e.setCustomValidity("Please fill out this field."):t.rangeUnderflow?e.setCustomValidity(`Please select a number that is no lower than ${e.min}`):t.rangeOverflow?e.setCustomValidity(`Please select a number that is no greater than ${e.max}`):t.typeMismatch?e.setCustomValidity(`Please select a ${e.type}`):e.setCustomValidity(""),e.reportValidity()}function ei(e){e.checkValidity()||e.setCustomValidity("Please select an item in the list.");const t=e.reportValidity();return e.setCustomValidity(""),t}var ti;!function(e){e.DEFINE="Define",e.EDIT="Edit"}(ti||(ti={}));class ii extends t.GscapeDialog{constructor(){super(),this.saveButton=new t.GscapeButton(Pt,"Save"),this.deleteButton=new t.GscapeButton(At,"Delete"),this.modality=ti.DEFINE,this.deleteCallback=e=>{},this.saveButton.onClick=()=>this.handleSubmit(),this.deleteButton.onClick=()=>this.deleteCallback(this._id),this.deleteButton.classList.add("danger")}static get properties(){let e=super.properties;return e.operator={attribute:!1},e.parameters={attribute:!1},e.modality={attribute:!1},e.datatype={attribute:!1},e.aggregateOperator={attribute:!1},e}static get styles(){let e=super.styles,i=t.GscapeWidget.styles[1];return[e[0],je`
        :host {
          position: absolute;
          top: 30%;
          left: 50%;
          transform: translate(-50%, 0)
        }


        .dialog-body {
          display: flex;
          flex-direction: column;
          gap: 30px;
          align-items: center;
          padding: 10px;
        }

        .form, .inputs-wrapper {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .selects-wrapper {
          align-self: start;
        }

        .inputs-wrapper {
          flex-direction: column;
        }

        .inputs-wrapper gscape-button {
          --gscape-icon-size: 18px;
        }

        gscape-button {
          position: initial;
          display: inline-block;
        }

        .danger:hover {
          color: var(--theme-gscape-error, ${i.error});
        }

        .bottom-buttons {
          display:flex;
          flex-direction:row-reverse;
          width: 100%;
          justify-content: space-between;
        }

        .section-header {
          text-align: center;
          font-weight: bold;
          border-bottom: solid 1px var(--theme-gscape-borders, ${i.borders});
          color: var(--theme-gscape-secondary, ${i.secondary});
          width: 85%;
          margin: auto;
          margin-bottom: auto;
          margin-bottom: 10px;
          padding-bottom: 5px;
        }

        #message-tray {
          font-size: 80%;
        }
        #message-tray > .correct-message {
          color: var(--theme-gscape-secondary);
        }
        #message-tray > .error-message {
          color: var(--theme-gscape-error);
        }

        .input-elem {
          color: inherit;
          margin:5px;
          padding: 5px;
          border: none;
          border-bottom: solid 1px var(--theme-gscape-borders, ${i.borders});
          background: var(--theme-gscape-primary, ${i.primary});
        }

        form *:invalid {
          border-color: var(--theme-gscape-error);
        }

        form abbr {
          margin: 0 5px;
        }
      `]}handleSubmit(){this.formElement&&function(e){const t=e.querySelectorAll("input"),i=e.querySelectorAll("select");let n=!0;return null==t||t.forEach((e=>{n=n&&Kt(e)})),null==i||i.forEach((e=>{n=n&&ei(e)})),n}(this.formElement)&&this.onValidSubmit()}onOperatorChange(e){var t,i;switch(this.operator=e,this.operator){case w.In:case w.NotIn:this.parametersIriOrConstants&&this.parametersIriOrConstants.length<2&&this.addInputValue(2-this.parametersIriOrConstants.length);break;case x.Ceil:case x.Floor:case x.Round:case x.Day:case x.Year:case x.Month:case x.Hours:case x.Minutes:case x.Seconds:case x.Lcase:case x.Ucase:null===(t=this.parameters)||void 0===t||t.splice(1);break;default:null===(i=this.parameters)||void 0===i||i.splice(2),this.parametersIriOrConstants&&this.parametersIriOrConstants.length<=0&&this.addInputValue()}}onDatatypeChange(e){this.datatype=e}onInputChange(e,t){var i;this.parameters&&(this.datatype===T.DateTime?this.parameters[e].value=null===(i=t.valueAsDate)||void 0===i?void 0:i.toISOString():this.parameters[e].value=t.value)}show(){super.show(),this.isDatatypeSelectorDisabled=!!this.datatype}addInputValue(e=1){var t;for(let i=0;i<e;i++)null===(t=this.parameters)||void 0===t||t.push({type:this.parametersType,value:"",constantType:this.datatype});this.requestUpdate()}firstUpdated(){super.firstUpdated(),this.header.left_icon=this.left_icon}updated(){var e;super.updated(),this.selectOperatorElem&&(this.selectOperatorElem.onchange=e=>this.onOperatorChange(e.currentTarget.value)),this.selectDatatypeElem&&(this.selectDatatypeElem.onchange=e=>this.onDatatypeChange(e.currentTarget.value)),null===(e=this.inputElems)||void 0===e||e.forEach((e=>e.onchange=t=>this.onInputChange(e.getAttribute("index"),t.currentTarget)));const t=this.shadowRoot.querySelector("#add-input-btn");t&&(t.onClick=()=>this.addInputValue())}addMessage(e,t){if(!this.messagesElem)return;let i=document.createElement("div");i.classList.add(t),i.innerHTML=e,this.messagesElem.appendChild(i)}resetMessages(){this.messagesElem&&(this.messagesElem.textContent="")}setAsCorrect(e){const t=e||"Correctly Saved";this.addMessage(t,"correct-message"),setTimeout((()=>this.resetMessages()),2e3)}onValidSubmit(){this.submitCallback(this._id,this.operator,this.parameters)}get selectOperatorElem(){return this.shadowRoot.querySelector("#select-operator > select")}get selectDatatypeElem(){return this.shadowRoot.querySelector("#select-datatype > select")}get inputElems(){return this.shadowRoot.querySelectorAll(".inputs-wrapper > input")}get messagesElem(){return this.shadowRoot.querySelector("#message-tray")}get variable(){var e;return null===(e=this.parameters)||void 0===e?void 0:e.find((e=>e.type===E))}get datatype(){var e;return null===(e=this.variable)||void 0===e?void 0:e.constantType}set datatype(e){var t;this.variable&&(this.variable.constantType=e),null===(t=this.parameters)||void 0===t||t.map((t=>t.constantType=e)),this.requestUpdate()}get parametersIriOrConstants(){var e;return null===(e=this.parameters)||void 0===e?void 0:e.filter((e=>e.type!==E))}get formElement(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("form")}}class ni extends ii{constructor(){super(),this.deleteCallback=e=>{},this.saveButton.label="Save Filter",this.left_icon=Bt}render(){return it`
      <gscape-head title="${this.modality} Filter for ${this.variableName}" class="drag-handler"></gscape-head>
      <div class="dialog-body">
        ${Et(this,Object.values(w))}
        
        <div class="bottom-buttons">
          ${this.saveButton}
          ${this.modality===ti.EDIT?this.deleteButton:null}
        </div>
      </div>
    `}onSubmit(e){this.submitCallback=e}onDelete(e){this.deleteCallback=e}}function ri(){return je`
    .elem-with-operator {
      display: flex;
      gap: 10px;
      align-items:center;
      justify-content: center;
    }

    .elem-with-operator > gscape-button {
      --gscape-icon-size: 20px;
    }

    .parameters {
      display: flex;
      flex-direction: column;
      gap: 2px;
      flex-grow:2;
      min-width: 0;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .operator {
      font-weight:bold;
      font-size:110%;
    }

    .operator, .parameter {
      padding: 4px 6px;
      padding-bottom: 2px;
      border-radius: 6px;
      background-color: var(--theme-gscape-primary);
      color: var(--theme-gscape-on-primary);
      line-height: 1;
    }
  `}function oi(e,i,n){return it`
    ${null==e?void 0:e.map((e=>{var r,o;const s=e.value||e,a=(null===(r=null==s?void 0:s.expression)||void 0===r?void 0:r.operator)||s.name||s.aggregateFunction;if(!a)return null;const l=(null===(o=s.expression)||void 0===o?void 0:o.parameters)||s.parameters,d=Object.keys(w).find((e=>{var t;return w[e]===(null===(t=s.expression)||void 0===t?void 0:t.operator)}))||Object.keys(x).find((e=>x[e]===s.name))||Object.keys(O).find((e=>O[e]===s.aggregateFunction)),c=new t.GscapeButton(Gt,"Edit Filter"),u=new t.GscapeButton(At,"Delete Filter");return i&&(c.onClick=()=>i(e.id)),n&&(u.onClick=()=>n(e.id),u.classList.add("danger")),it`
        <div class="elem-with-operator">
          <div
            class="operator"
            title="${d}"
          >
            ${a}</div>

          ${l?it`
              <div class="parameters">
                ${null==l?void 0:l.map(((e,t)=>{if(0===t)return null;let i=e.value;return e.constantType===T.DateTime&&(i=(null==i?void 0:i.split("T")[0])||i),it`
                    <div class="parameter">
                      ${i}
                    </div>
                  `}))}
              </div>
            `:null}
          ${i?c:null}
          ${n?u:null}
        </div>
      `}))}
  `}customElements.define("sparqling-filter-dialog",ni);class si extends t.GscapeDialog{constructor(){super(),this.filterList=[],this.editFilterCallback=()=>{},this.deleteFilterCallback=()=>{}}static get properties(){let e=super.properties;return e.filterList={attribute:!1},e.variable={attribute:!1},e}static get styles(){let e=super.styles,i=t.GscapeWidget.styles[1];return[e[0],je`
        :host {
          position: absolute;
          top: 30%;
          left: 50%;
          transform: translate(-50%, 0)
        }

        .dialog-body {
          display:flex;
          flex-direction: column;
          gap: 20px;
          padding: 10px 5px;
        }

        gscape-button {
          position: initial;
        }

        .danger:hover {
          color: var(--theme-gscape-error, ${i.error});
        }
      `,ri()]}render(){return it`
      <gscape-head title="Defined Filters for ${this.variable}" class="drag-handler"></gscape-head>
      <div class="dialog-body">
        ${this.filterList?oi(this.filterList,this.editFilterCallback,this.deleteFilterCallback):null}
      </div>
    `}firstUpdated(){super.firstUpdated(),this.header.left_icon=Xt}show(){super.show()}hide(){super.hide()}onEdit(e){this.editFilterCallback=e}onDelete(e){this.deleteFilterCallback=e}}customElements.define("sparqling-filter-list",si);class ai extends t.GscapeWidget{constructor(){super(),this.collapsible=!0,this._onSuggestionSelection=e=>{},this.class=""}static get properties(){let e=super.properties;return e.class={attribute:!1},e.highlights={attribute:!1},e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          position:initial;
          pointer-events:initial;
        }

        .widget-body {
          max-height: 400px;
        }

        .gscape-panel-title {
          padding-top:10px;
        }

        .list {
          display:flex;
          flex-direction:column;
        }

        .list-item {
          padding:5px 10px;
          cursor: pointer;
        }

        details {
          margin: 5px;
          padding: 5px;
          border-radius: 6px;
        }

        summary {
          font-weight: bold;
          margin: 5px;
          cursor:pointer;
        }

        #classes-panel {
          background-color: var(--theme-gscape-concept, ${t.concept});
        }

        #object-properties-panel {
          background-color: var(--theme-gscape-role, ${t.role});
        }

        #data-properties-panel {
          background-color: var(--theme-gscape-attribute, ${t.attribute});
        }
      `]}render(){return it`
    <gscape-head title="Suggestions"></gscape-head>
    <div class="widget-body">
      <details id="object-properties-panel" open>
        <summary>Object Properties</summary>
        <div class="list">
          ${this.objectProperties.map(((e,t)=>it`
              <span index="${t}" @click=${this.handleObjectPropertySelection} class="list-item highlight">
                ${e.objectPropertyIRI}
              </span>`))}
        </div>
      </details>
      
      <details id="data-properties-panel" open>
        <summary>Data Properties</summary>
        <div id="data-properties-panel" class="list">
          ${this.dataProperties.map(((e,t)=>it`
              <span index="${t}" @click=${this.handleDataPropertySelection} class="list-item highlight">
                ${e}
              </span>`))}
        </div>
      </details>

      <details id="classes-panel" open>
        <summary>Classes</summary>
        <div class="list">
          ${this.classes.map(((e,t)=>it`
              <span index="${t}" @click=${this.handleClassSelection} class="list-item highlight">
                ${e}
              </span>`))}
        </div>
      </details>
    </div>
    `}firstUpdated(){super.firstUpdated();this.header.left_icon=Lt,this.header.invertIcons(),this.hide()}handleClassSelection(e){e.preventDefault(),this._onSuggestionSelection(this.classes[e.target.getAttribute("index")])}handleObjectPropertySelection(e){e.preventDefault();const t=e.target.getAttribute("index"),i=this.objectProperties[t].objectPropertyIRI;i&&this._onSuggestionSelection(i)}handleDataPropertySelection(e){e.preventDefault(),this._onSuggestionSelection(this.dataProperties[e.target.getAttribute("index")])}onSuggestionSelection(e){this._onSuggestionSelection=e}get objectProperties(){var e,t;return(null===(t=null===(e=this.highlights)||void 0===e?void 0:e.objectProperties)||void 0===t?void 0:t.sort(((e,t)=>e.objectPropertyIRI&&t.objectPropertyIRI?e.objectPropertyIRI.localeCompare(t.objectPropertyIRI):0)))||[]}get classes(){var e,t;return(null===(t=null===(e=this.highlights)||void 0===e?void 0:e.classes)||void 0===t?void 0:t.sort(((e,t)=>e.localeCompare(t))))||[]}get dataProperties(){var e,t;return(null===(t=null===(e=this.highlights)||void 0===e?void 0:e.dataProperties)||void 0===t?void 0:t.sort(((e,t)=>e.localeCompare(t))))||[]}show(){super.show()}hide(){super.hide()}toggleBody(){super.toggleBody()}showBody(){super.showBody()}collapseBody(){super.collapseBody()}blur(){}}customElements.define("sparqling-highlights-list",ai);const li=(e="en")=>({en:"Empty Query"}[e]);class di extends t.GscapeWidget{constructor(e){super(),this.list=[],this.title=((e="en")=>({en:"Select Item",it:"Seleziona un elemento"}[e]))(),this.buildItemString=e||function(e){return e},this.hide()}static get properties(){let e=super.properties;return e.list={attribute:!1},e.title={attribute:!1},e}static get styles(){let e=super.styles,t=e[1];return[e[0],t,je`
        :host {
          position:absolute;
        }

        .list-item {
          cursor:pointer;
          padding:5px 10px;
        }

        .list-item:last-of-type {
          border-radius: inherit;
        }

        gscape-dialog > .widget-body {
          padding: 0;
        }
      `]}render(){var e;return it`
    <gscape-dialog title="${this.title}">
      <div>
      ${null===(e=this.list)||void 0===e?void 0:e.map(((e,t)=>it`
          <div class="list-item highlight" index="${t}" @click=${this.handleSelection}>
            <span>${this.buildItemString(e)}</span>
          </div>
        `))}
      </div>
    </gscape-dialog>
  `}onSelection(e){this.selectionCallback=e}onClose(e){this.closeCallback=e}handleSelection(e){if(e.preventDefault(),this.list){const t=e.currentTarget.getAttribute("index");if(null!==t){let e=this.list[t];this.selectionCallback(e)}}}hide(){super.hide()}show(e){var t;const i=this;e&&(i.style.top=e.y+"px",i.style.left=e.x+"px"),super.show(),null===(t=i.shadowRoot.querySelector("gscape-dialog"))||void 0===t||t.show()}}customElements.define("list-selection-dialog",di);class ci extends di{constructor(e){super(e),this.reverseArrow=!1,this.class="",this.objProperty=""}static get properties(){let e=super.properties;return e.class={attribute:!1},e.objProperty={attribute:!1},e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          min-width:100px;
          transform: translate(-100%, -50%);
        }

        .widget-body {
          padding:0;
          display:flex;
        }

        #left-panel {
          display:flex;
          align-items:center;
          padding:10px;
        }

        .class {
          padding: 10px 20px;
          border-radius: 6px;
          background-color: var(--theme-gscape-concept, ${t.concept});
          border: solid 2px var(--theme-gscape-concept-dark, ${t.concept_dark});
        }

        .arrow {
          margin: 10px;
          display: flex;
          align-items: center;
        }

        .arrow-reverse {
          margin: 10px;
          display: flex;
          align-items: center;
          flex-direction: row-reverse;
        }

        .arrow-tail, .arrow-body {
          height:8px;
          background-color: var(--theme-gscape-role-dark, ${t.role_dark});
        }

        .arrow-tail {
          width: 20px;
          border-top-left-radius: 3px;
          border-bottom-left-radius: 3px;
          border-top-right-radius: 0px;
          border-bottom-right-radius:0px;
        }

        .arrow-reverse > .arrow-tail {
          border-top-right-radius: 3px;
          border-bottom-right-radius: 3px;
          border-top-left-radius: 0px;
          border-bottom-left-radius:0px;
        }

        .arrow-body {
          width: 15px;
        }

        .arrow-head {
          width: 0; 
          height: 0; 
          border-top: 15px solid transparent;
          border-bottom: 15px solid transparent;
          background-color: initial;
        }

        .arrow > .arrow-head {
          border-left: 15px solid var(--theme-gscape-role-dark, ${t.role_dark});
          border-right: 0;
        }

        .arrow-reverse > .arrow-head {
          border-right: 15px solid var(--theme-gscape-role-dark, ${t.role_dark});
          border-left: 0;
        }

        .obj-property {
          padding: 5px;
        }

        .list {
          display:flex;
          flex-direction: column;
          justify-content: center;
          max-height: 100px;
          overflow: auto;
          overflow-x: hidden;
        }

        .list-item {
          cursor:pointer;
          padding:5px 20px;
        }

        .list-item:last-of-type {
          border-radius: inherit;
        }

        .gscape-panel-title {
          padding-top:10px;
        }
        .
      `]}render(){var e;return it`
    <div class="gscape-panel-title">Add Object Property</div>
    <div class="widget-body">
      <div id="left-panel">
        <span class="text class">${this.class}</span>
        <span class="arrow${this.reverse}">
          <span class="arrow-tail"></span>
          <span class="text obj-property">${this.objProperty}</span>
          <span class="arrow-body"></span>
          <span class="arrow-head"></span>
        </span>
      </div>
      <div id="right-panel" class="list">
        ${null===(e=this.list)||void 0===e?void 0:e.map(((e,t)=>it`<span index="${t}" @click=${this.handleSelection} class="list-item highlight">${this.buildItemString(e)}</span>`))}
      </div>
    </div>
    `}get reverse(){return this.reverseArrow?"-reverse":null}}customElements.define("sparqling-related-classes",ci);class ui extends t.GscapeDialog{constructor(){super(),this._text=li(),this.copyButton=new t.GscapeButton(Dt,"Copy Query"),this.copyButton.onClick=()=>this.copyQuery()}static get styles(){let e=super.styles;return e[1],[e[0],je`
        :host {
          top:50%;
          left:50%;
          transform: translate(-50%, -50%);
        }

        .sparql-code {
          white-space: pre;
          padding: 10px 20px;
          cursor: copy;
          font-family: monospace;
        }

        #buttons-tray > * {
          position: initial;
        }

        #buttons-tray {
          display: flex;
          align-items: center;
          justify-content: end;
          gap:10px;
          flex-grow: 3;
          padding: 0 20px;
        }

        #buttons-tray > gscape-button {
          --gscape-icon-size: 20px;
        }
      `]}render(){return it`
      <gscape-head title="SPARQL" class="drag-handler">
        <div id="buttons-tray">
          ${this.copyButton}
        </div>
      </gscape-head>
      <div class="widget-body">
        <div class="sparql-code" title="Click to copy query" @click=${this.copyQuery}>${this.text.trim()}</div>
      </div>
    `}firstUpdated(){super.firstUpdated(),this.header.left_icon=Tt}copyQuery(){navigator.clipboard.writeText(this.text).then((e=>{console.log("query copied successfully")}))}show(){super.show()}hide(){super.hide()}set text(e){this._text=e}get text(){return this._text}}customElements.define("sparqling-sparql-dialog",ui);var pi=nt`
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   version="1.1"
   viewBox="0 0 20 20"
   xml:space="preserve"
   fill="currentColor"
   style="width: 20px; height:20px; padding: 2px"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
<g
   transform="translate(-268.25923,-224.085)"><path
     style="display:inline;stroke-width:0.04"
     class="st0"
     d="m 278.25923,224.085 c -2.672,0 -5.18396,1.03997 -7.07195,2.92797 -1.888,1.888 -2.92805,4.40003 -2.92805,7.07203 0,2.672 1.04005,5.18396 2.92805,7.07195 1.88799,1.888 4.39995,2.92805 7.07195,2.92805 2.672,0 5.18403,-1.04005 7.07203,-2.92805 1.888,-1.88799 2.92797,-4.39995 2.92797,-7.07195 0,-2.672 -1.03997,-5.18403 -2.92797,-7.07203 -1.888,-1.888 -4.40003,-2.92797 -7.07203,-2.92797 z m 10e-4,1.94516 1.55563,1.55562 -0.77781,0.77781 -5.72532,5.72532 1.69391,1.69382 5.72703,-5.7271 a 1.10011,1.10011 0 0 1 1.55563,0 l 3.2489,3.24882 a 1.10011,1.10011 0 0 1 0,1.55563 l -6.50187,6.50187 -0.77781,0.77782 -1.55563,-1.55563 0.77781,-0.77781 5.72407,-5.72406 -1.69321,-1.69321 -5.72711,5.72711 a 1.10011,1.10011 0 0 1 -1.55562,8e-5 l -3.24953,-3.24945 a 1.10011,1.10011 0 0 1 0,-1.55571 l 6.50312,-6.50312 z" /></g>

</svg>
`;class hi extends t.GscapeWidget{constructor(){super(),this.isEnabled=!0,this.isLoading=!1,this.canQueryRun=!1,this._onSparqlingStartCallback=()=>{},this._onSparqlingStopCallback=()=>{},this._onQueryRunCallback=()=>{},this.startSparqlingButton=new t.GscapeButton(pi,"Start/Stop Sparqling"),this.startSparqlingButton.onClick=()=>this.handleStartButtonCLick(),this.startSparqlingButton.style.position="inherit",this.startSparqlingButton.classList.add("flat"),this.startSparqlingButton.enabled=!0,this.runQueryButton=new t.GscapeButton(Mt,"Send query to SPARQL endpoint"),this.runQueryButton.style.position="inherit",this.runQueryButton.classList.add("flat"),this.runQueryButton.onClick=()=>this._onQueryRunCallback()}static get properties(){const e=super.properties,t={canQueryRun:{type:Boolean,attribute:!1},isLoading:{type:Boolean,attribute:!1}};return Object.assign(e,t),e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          order: 7;
          display:inline-block;
          position: initial;
          margin-top:10px;
        }

        #hr {
          height:1px;
          width:90%;
          margin: 0 auto;
          background-color: var(--theme-gscape-borders, ${t.borders})
        }

        .lds-ripple {
          position: relative;
          width: var(--gscape-icon-size);
          height: var(--gscape-icon-size);
          padding: calc(var(--gscape-icon-size) * 0.2);
        }
        .lds-ripple div {
          position: absolute;
          border: 4px solid ${t.secondary};
          opacity: 1;
          border-radius: 50%;
          animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
        }
        .lds-ripple div:nth-child(2) {
          animation-delay: -0.5s;
        }
        @keyframes lds-ripple {
          0% {
            top: calc(var(--gscape-icon-size) / 2);
            left: calc(var(--gscape-icon-size) / 2);
            width: 0;
            height: 0;
            opacity: 1;
          }
          100% {
            top: 0px;
            left: 0px;
            width: var(--gscape-icon-size);
            height: var(--gscape-icon-size);
            opacity: 0;
          }
        }
      `]}render(){return it`
      ${this.canQueryRun?it`
          ${this.runQueryButton}
          <div id="hr"></div>
        `:null}
      
      ${this.isLoading?it`<div class="lds-ripple"><div></div><div></div></div>`:this.startSparqlingButton}
    `}show(){this.isEnabled&&(this.style.display="inline-block")}onSparqlingStart(e){this._onSparqlingStartCallback=e}onSparqlingStop(e){this._onSparqlingStopCallback=e}onQueryRun(e){this._onQueryRunCallback=e}handleStartButtonCLick(){he()?this._onSparqlingStopCallback():this._onSparqlingStartCallback()}startLoadingAnimation(){this.isLoading=!0}stopLoadingAnimation(){this.isLoading=!1}}customElements.define("sparqling-start-run-buttons",hi);class gi extends ii{constructor(){super(),this.saveButton.label="Save Function",this.left_icon=Ft}render(){return it`
      <gscape-head title="${this.modality} Function for ${this.variableName}" class="drag-handler"></gscape-head>
      <div class="dialog-body">
        ${Et(this,this.operators)}
      
        <div class="bottom-buttons">
          ${this.saveButton}
        </div>
      </div>
    `}onSubmit(e){this.submitCallback=e}setAsCorrect(e){super.setAsCorrect(e),this.saveButton.hide()}show(){super.show(),this.saveButton.show()}onDatatypeChange(e){super.onDatatypeChange(e),this.selectOperatorElem.value=null}get operators(){switch(this.datatype){case T.String:return this.operatorsOnString;case T.Decimal:return this.operatorsOnNumber;case T.DateTime:return this.operatorsOnDate;default:return this.operatorsOnString}}get operatorsOnString(){return[x.Concat,x.Contains,x.Lcase,x.Substr,x.Ucase]}get operatorsOnNumber(){return[x.Add,x.Subctract,x.Multiply,x.Divide,x.Round,x.Ceil,x.Floor]}get operatorsOnDate(){return[x.Year,x.Month,x.Day,x.Hours,x.Minutes,x.Seconds]}}customElements.define("sparqling-function-dialog",gi);class fi extends ii{constructor(){super(),this.showHavingFormButton=new t.GscapeButton(_t,"Add Having"),this.definingHaving=!1,this.distinct=!1,this.saveButton.label="Save Aggregation",this.showHavingFormButton.label="Filter Groups - Having",this.showHavingFormButton.classList.add("flat"),this.showHavingFormButton.onClick=()=>{this.definingHaving=!0},this.havingOperator=O.Avarage,this.formTitle="Having",this.left_icon=Wt}static get properties(){const e=super.properties;return e.definingHaving={attribute:!1},e.distinct={attribute:!1},e}render(){return it`
      <gscape-head title="${this.modality} Aggregate Function for ${this.variableName}" class="drag-handler"></gscape-head>
      <div class="dialog-body">
        <div style="text-align: center;">
          <div id="select-aggregate-function">
            ${$t(this.aggregateOperator||"Aggregate Function",Object.values(O))}
          </div>
          <div style="margin: 10px 0">
            <label>
              <input id="distinct-checkbox" type="checkbox" @click="${this.onDistinctChange}" ?checked=${this.distinct}>
              Only distinct values
            </label>
          </div>
        </div>
        ${this.definingHaving?Et(this,Object.values(w)):this.showHavingFormButton}
        <div class="bottom-buttons">
          ${this.saveButton}
        </div>
      </div>
    `}firstUpdated(){super.firstUpdated(),this.selectAggregateOperatorElem.onchange=e=>this.onAggregateOperatorChange(e.currentTarget.value)}handleSubmit(){ei(this.selectAggregateOperatorElem)&&(this.definingHaving?super.handleSubmit():this.onValidSubmit())}onValidSubmit(){this._id&&this.aggregateOperator&&this.parameters&&this.submitCallback(this._id,this.aggregateOperator,this.distinct,this.operator,this.parameters)}onSubmit(e){this.submitCallback=e}setAsCorrect(e){super.setAsCorrect(e),this.saveButton.hide()}show(){super.show(),this.saveButton.show(),this.definingHaving=!1,this.distinct=!1,this.distinctCheckboxElem.checked=this.distinct,this.aggregateOperator=void 0}onAggregateOperatorChange(e){this.aggregateOperator=e}onDistinctChange(e){this.distinct=e.target.checked}get isAggregateOperatorValid(){return this.aggregateOperator&&Object.values(O).includes(this.aggregateOperator)}get selectAggregateOperatorElem(){return this.shadowRoot.querySelector("#select-aggregate-function > select")}get distinctCheckboxElem(){return this.shadowRoot.querySelector("#distinct-checkbox")}}customElements.define("sparqling-aggregation-dialog",fi);const vi=document.createElement("div"),mi=document.createElement("label"),yi=document.createElement("input");mi.innerHTML="N. of results",yi.type="number",yi.classList.add("input-elem"),yi.id="limit-input",yi.min="1",yi.disabled=!0,vi.appendChild(mi),vi.appendChild(yi);const bi=document.createElement("div"),Ci=document.createElement("label"),wi=document.createElement("input");Ci.innerHTML="Offset",wi.type="number",wi.classList.add("input-elem"),wi.id="offset-input",wi.min="1",wi.disabled=!0,bi.appendChild(Ci),bi.appendChild(wi);const xi=new ui;new di;const Oi=new ci,Ei=new ai,$i=new ni,Ai=new si,Ti=new gi,ji=new fi,Hi=new hi,Si=new t.GscapeDialog;Si.title="Error";const Ii=new t.GscapeButton(Tt,"SPARQL"),Li=new t.GscapeButton(qt,"Clear Query"),Pi=new t.GscapeToggle("distinct",!1,!0,"Duplicates",null,!0);Pi.style.marginRight="5px";const _i=new t.GscapeToggle("count-star",!1,!0,"Count Results");n.use(r),n.use(o),n.use(s);const Gi=n({style:[],wheelSensitivity:.4,maxZoom:2});let ki,Bi;function Ri(){return ki}function Vi(e){Bi=e||Bi}function Di(){return Bi}Gi.mount(l),Gi.on("render",(()=>{try{Gi.renderer().hoverData.capture=!0}catch(e){}}));const{GscapeWidget:Mi,GscapeHeader:qi}=t;class Ui extends Mi{constructor(e,t){super(),this._isBGPEmpty=!0,this.bgpContainer=e,this.collapsible=!0,this.draggable=!0,this.headSlottedWidgets=t}static get properties(){const e=super.properties;return e._isBGPEmpty={attribute:!1,type:Boolean},e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          width: calc(50%);
          position: absolute;
          left: 50%;
          top: 100%;
          transform: translate(-50%, calc(-100% - 10px));
        }

        .widget-body {
          min-height: 50px;
          margin:0;
          border-top: none;
          border-radius: inherit;
          border-bottom-left-radius:0;
          border-bottom-right-radius:0;
        }

        #empty-graph {
          padding: 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 20px;
          text-align: center;
        }

        #empty-graph > .icon {
          --gscape-icon-size: 60px;
        }

        #empty-graph-msg {
          font-weight: bold;
        }

        .tip {
          font-size: 90%;
          color: var(--theme-gscape-shadows, ${t.shadows});
          border-bottom: dotted 2px;
          cursor: help;
        }

        .tip: hover {
          color:inherit;
        }

        #buttons-tray > * {
          position: initial;
        }

        #buttons-tray {
          display: flex;
          align-items: center;
          justify-content: end;
          gap:10px;
          flex-grow: 3;
          padding: 0 10px;
        }

        #buttons-tray > gscape-button {
          --gscape-icon-size: 20px;
        }

        #buttons-tray > input {
          max-width:50px;
        }

        .input-elem {
          color: inherit;
          padding: 5px;
          border: none;
          border-bottom: solid 1px var(--theme-gscape-borders, ${t.borders});
          max-width: 50px;
          background: var(--theme-gscape-primary, ${t.primary});
        }
      `]}render(){return it`
      <div class="widget-body">
        ${this.isBGPEmpty?it`
            <div id="empty-graph">
              <div class="icon">${Zt}</div>
              <div id="empty-graph-msg">${((e="en")=>({en:"Double click on a class to add it to the query"}[e]))()}</div>
              <div class="tip" title="${((e="en")=>({en:"The query graph is the set of conditions\nyou specify to be satisfied by results.\n\nIf you add a class (e.g. Person), only\ninstances belonging to that class will\nbe included in the results (e.g. only persons). \n\nIf you then add a object property \ninvolving that class (e.g. hasCar), results will now\ninclude only those participating in such relationship\n(e.g. only persons having a Car)."}[e]))()}">${((e="en")=>({en:"What is a Query Graph?",it:"Cos'è il Query Graph?"}[e]))()}</div>
            </div>
          `:this.bgpContainer}
      </div>

      <gscape-head title="Query Graph">
        <div id="buttons-tray">
          ${this.headSlottedWidgets}
        </div>
      </gscape-head>
    `}firstUpdated(){super.firstUpdated(),this.header.left_icon=St,this.header.invertIcons(),super.makeDraggableHeadTitle(),this.hide()}createRenderRoot(){const e=super.createRenderRoot();return e.addEventListener("mouseover",(e=>{try{Gi.renderer().hoverData.capture=!0}catch(e){}})),e}blur(){}set isBGPEmpty(e){this._isBGPEmpty=e}get isBGPEmpty(){return this._isBGPEmpty}set graphContainerHeight(e){this.bgpContainer.style.height=`${e+40}px`}set graphContainerWidth(e){this.bgpContainer.style.width=`${e+40}px`}}var Fi;function Qi(e){const t=Gi.$id(e);return t.empty()?void 0:t}function Ni(){return Gi.elements()}customElements.define("query-graph",Ui),function(e){e.full="iri",e.prefixed="prefixedIri",e.label="labels"}(Fi||(Fi={}));var zi="top",Wi="bottom",Zi="right",Ji="left",Yi=[zi,Wi,Zi,Ji],Xi=Yi.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),Ki=[].concat(Yi,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),en=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function tn(e){return e?(e.nodeName||"").toLowerCase():null}function nn(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rn(e){return e instanceof nn(e).Element||e instanceof Element}function on(e){return e instanceof nn(e).HTMLElement||e instanceof HTMLElement}function sn(e){return"undefined"!=typeof ShadowRoot&&(e instanceof nn(e).ShadowRoot||e instanceof ShadowRoot)}var an={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];on(r)&&tn(r)&&(Object.assign(r.style,i),Object.keys(n).forEach((function(e){var t=n[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],r=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});on(n)&&tn(n)&&(Object.assign(n.style,o),Object.keys(r).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};function ln(e){return e.split("-")[0]}var dn=Math.max,cn=Math.min,un=Math.round;function pn(e,t){void 0===t&&(t=!1);var i=e.getBoundingClientRect(),n=1,r=1;if(on(e)&&t){var o=e.offsetHeight,s=e.offsetWidth;s>0&&(n=un(i.width)/s||1),o>0&&(r=un(i.height)/o||1)}return{width:i.width/n,height:i.height/r,top:i.top/r,right:i.right/n,bottom:i.bottom/r,left:i.left/n,x:i.left/n,y:i.top/r}}function hn(e){var t=pn(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function gn(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&sn(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function fn(e){return nn(e).getComputedStyle(e)}function vn(e){return["table","td","th"].indexOf(tn(e))>=0}function mn(e){return((rn(e)?e.ownerDocument:e.document)||window.document).documentElement}function yn(e){return"html"===tn(e)?e:e.assignedSlot||e.parentNode||(sn(e)?e.host:null)||mn(e)}function bn(e){return on(e)&&"fixed"!==fn(e).position?e.offsetParent:null}function Cn(e){for(var t=nn(e),i=bn(e);i&&vn(i)&&"static"===fn(i).position;)i=bn(i);return i&&("html"===tn(i)||"body"===tn(i)&&"static"===fn(i).position)?t:i||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&on(e)&&"fixed"===fn(e).position)return null;var i=yn(e);for(sn(i)&&(i=i.host);on(i)&&["html","body"].indexOf(tn(i))<0;){var n=fn(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(e)||t}function wn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function xn(e,t,i){return dn(e,cn(t,i))}function On(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function En(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var $n={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,n=e.name,r=e.options,o=i.elements.arrow,s=i.modifiersData.popperOffsets,a=ln(i.placement),l=wn(a),d=[Ji,Zi].indexOf(a)>=0?"height":"width";if(o&&s){var c=function(e,t){return On("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:En(e,Yi))}(r.padding,i),u=hn(o),p="y"===l?zi:Ji,h="y"===l?Wi:Zi,g=i.rects.reference[d]+i.rects.reference[l]-s[l]-i.rects.popper[d],f=s[l]-i.rects.reference[l],v=Cn(o),m=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,y=g/2-f/2,b=c[p],C=m-u[d]-c[h],w=m/2-u[d]/2+y,x=xn(b,w,C),O=l;i.modifiersData[n]=((t={})[O]=x,t.centerOffset=x-w,t)}},effect:function(e){var t=e.state,i=e.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&gn(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function An(e){return e.split("-")[1]}var Tn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jn(e){var t,i=e.popper,n=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,d=e.adaptive,c=e.roundOffsets,u=e.isFixed,p=s.x,h=void 0===p?0:p,g=s.y,f=void 0===g?0:g,v="function"==typeof c?c({x:h,y:f}):{x:h,y:f};h=v.x,f=v.y;var m=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=Ji,C=zi,w=window;if(d){var x=Cn(i),O="clientHeight",E="clientWidth";if(x===nn(i)&&"static"!==fn(x=mn(i)).position&&"absolute"===a&&(O="scrollHeight",E="scrollWidth"),r===zi||(r===Ji||r===Zi)&&"end"===o)C=Wi,f-=(u&&x===w&&w.visualViewport?w.visualViewport.height:x[O])-n.height,f*=l?1:-1;if(r===Ji||(r===zi||r===Wi)&&"end"===o)b=Zi,h-=(u&&x===w&&w.visualViewport?w.visualViewport.width:x[E])-n.width,h*=l?1:-1}var $,A=Object.assign({position:a},d&&Tn),T=!0===c?function(e){var t=e.x,i=e.y,n=window.devicePixelRatio||1;return{x:un(t*n)/n||0,y:un(i*n)/n||0}}({x:h,y:f}):{x:h,y:f};return h=T.x,f=T.y,l?Object.assign({},A,(($={})[C]=y?"0":"",$[b]=m?"0":"",$.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+f+"px)":"translate3d("+h+"px, "+f+"px, 0)",$)):Object.assign({},A,((t={})[C]=y?f+"px":"",t[b]=m?h+"px":"",t.transform="",t))}var Hn={passive:!0};var Sn={left:"right",right:"left",bottom:"top",top:"bottom"};function In(e){return e.replace(/left|right|bottom|top/g,(function(e){return Sn[e]}))}var Ln={start:"end",end:"start"};function Pn(e){return e.replace(/start|end/g,(function(e){return Ln[e]}))}function _n(e){var t=nn(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Gn(e){return pn(mn(e)).left+_n(e).scrollLeft}function kn(e){var t=fn(e),i=t.overflow,n=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function Bn(e){return["html","body","#document"].indexOf(tn(e))>=0?e.ownerDocument.body:on(e)&&kn(e)?e:Bn(yn(e))}function Rn(e,t){var i;void 0===t&&(t=[]);var n=Bn(e),r=n===(null==(i=e.ownerDocument)?void 0:i.body),o=nn(n),s=r?[o].concat(o.visualViewport||[],kn(n)?n:[]):n,a=t.concat(s);return r?a:a.concat(Rn(yn(s)))}function Vn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Dn(e,t){return"viewport"===t?Vn(function(e){var t=nn(e),i=mn(e),n=t.visualViewport,r=i.clientWidth,o=i.clientHeight,s=0,a=0;return n&&(r=n.width,o=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=n.offsetLeft,a=n.offsetTop)),{width:r,height:o,x:s+Gn(e),y:a}}(e)):rn(t)?function(e){var t=pn(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Vn(function(e){var t,i=mn(e),n=_n(e),r=null==(t=e.ownerDocument)?void 0:t.body,o=dn(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=dn(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+Gn(e),l=-n.scrollTop;return"rtl"===fn(r||i).direction&&(a+=dn(i.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}(mn(e)))}function Mn(e,t,i){var n="clippingParents"===t?function(e){var t=Rn(yn(e)),i=["absolute","fixed"].indexOf(fn(e).position)>=0&&on(e)?Cn(e):e;return rn(i)?t.filter((function(e){return rn(e)&&gn(e,i)&&"body"!==tn(e)})):[]}(e):[].concat(t),r=[].concat(n,[i]),o=r[0],s=r.reduce((function(t,i){var n=Dn(e,i);return t.top=dn(n.top,t.top),t.right=cn(n.right,t.right),t.bottom=cn(n.bottom,t.bottom),t.left=dn(n.left,t.left),t}),Dn(e,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function qn(e){var t,i=e.reference,n=e.element,r=e.placement,o=r?ln(r):null,s=r?An(r):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(o){case zi:t={x:a,y:i.y-n.height};break;case Wi:t={x:a,y:i.y+i.height};break;case Zi:t={x:i.x+i.width,y:l};break;case Ji:t={x:i.x-n.width,y:l};break;default:t={x:i.x,y:i.y}}var d=o?wn(o):null;if(null!=d){var c="y"===d?"height":"width";switch(s){case"start":t[d]=t[d]-(i[c]/2-n[c]/2);break;case"end":t[d]=t[d]+(i[c]/2-n[c]/2)}}return t}function Un(e,t){void 0===t&&(t={});var i=t,n=i.placement,r=void 0===n?e.placement:n,o=i.boundary,s=void 0===o?"clippingParents":o,a=i.rootBoundary,l=void 0===a?"viewport":a,d=i.elementContext,c=void 0===d?"popper":d,u=i.altBoundary,p=void 0!==u&&u,h=i.padding,g=void 0===h?0:h,f=On("number"!=typeof g?g:En(g,Yi)),v="popper"===c?"reference":"popper",m=e.rects.popper,y=e.elements[p?v:c],b=Mn(rn(y)?y:y.contextElement||mn(e.elements.popper),s,l),C=pn(e.elements.reference),w=qn({reference:C,element:m,strategy:"absolute",placement:r}),x=Vn(Object.assign({},m,w)),O="popper"===c?x:C,E={top:b.top-O.top+f.top,bottom:O.bottom-b.bottom+f.bottom,left:b.left-O.left+f.left,right:O.right-b.right+f.right},$=e.modifiersData.offset;if("popper"===c&&$){var A=$[r];Object.keys(E).forEach((function(e){var t=[Zi,Wi].indexOf(e)>=0?1:-1,i=[zi,Wi].indexOf(e)>=0?"y":"x";E[e]+=A[i]*t}))}return E}function Fn(e,t){void 0===t&&(t={});var i=t,n=i.placement,r=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,d=void 0===l?Ki:l,c=An(n),u=c?a?Xi:Xi.filter((function(e){return An(e)===c})):Yi,p=u.filter((function(e){return d.indexOf(e)>=0}));0===p.length&&(p=u);var h=p.reduce((function(t,i){return t[i]=Un(e,{placement:i,boundary:r,rootBoundary:o,padding:s})[ln(i)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var Qn={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var r=i.mainAxis,o=void 0===r||r,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,d=i.padding,c=i.boundary,u=i.rootBoundary,p=i.altBoundary,h=i.flipVariations,g=void 0===h||h,f=i.allowedAutoPlacements,v=t.options.placement,m=ln(v),y=l||(m===v||!g?[In(v)]:function(e){if("auto"===ln(e))return[];var t=In(e);return[Pn(e),t,Pn(t)]}(v)),b=[v].concat(y).reduce((function(e,i){return e.concat("auto"===ln(i)?Fn(t,{placement:i,boundary:c,rootBoundary:u,padding:d,flipVariations:g,allowedAutoPlacements:f}):i)}),[]),C=t.rects.reference,w=t.rects.popper,x=new Map,O=!0,E=b[0],$=0;$<b.length;$++){var A=b[$],T=ln(A),j="start"===An(A),H=[zi,Wi].indexOf(T)>=0,S=H?"width":"height",I=Un(t,{placement:A,boundary:c,rootBoundary:u,altBoundary:p,padding:d}),L=H?j?Zi:Ji:j?Wi:zi;C[S]>w[S]&&(L=In(L));var P=In(L),_=[];if(o&&_.push(I[T]<=0),a&&_.push(I[L]<=0,I[P]<=0),_.every((function(e){return e}))){E=A,O=!1;break}x.set(A,_)}if(O)for(var G=function(e){var t=b.find((function(t){var i=x.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},k=g?3:1;k>0;k--){if("break"===G(k))break}t.placement!==E&&(t.modifiersData[n]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Nn(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function zn(e){return[zi,Zi,Wi,Ji].some((function(t){return e[t]>=0}))}var Wn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,n=e.name,r=i.offset,o=void 0===r?[0,0]:r,s=Ki.reduce((function(e,i){return e[i]=function(e,t,i){var n=ln(e),r=[Ji,zi].indexOf(n)>=0?-1:1,o="function"==typeof i?i(Object.assign({},t,{placement:e})):i,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ji,Zi].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(i,t.rects,o),e}),{}),a=s[t.placement],l=a.x,d=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=s}};var Zn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name,r=i.mainAxis,o=void 0===r||r,s=i.altAxis,a=void 0!==s&&s,l=i.boundary,d=i.rootBoundary,c=i.altBoundary,u=i.padding,p=i.tether,h=void 0===p||p,g=i.tetherOffset,f=void 0===g?0:g,v=Un(t,{boundary:l,rootBoundary:d,padding:u,altBoundary:c}),m=ln(t.placement),y=An(t.placement),b=!y,C=wn(m),w="x"===C?"y":"x",x=t.modifiersData.popperOffsets,O=t.rects.reference,E=t.rects.popper,$="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,A="number"==typeof $?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,j={x:0,y:0};if(x){if(o){var H,S="y"===C?zi:Ji,I="y"===C?Wi:Zi,L="y"===C?"height":"width",P=x[C],_=P+v[S],G=P-v[I],k=h?-E[L]/2:0,B="start"===y?O[L]:E[L],R="start"===y?-E[L]:-O[L],V=t.elements.arrow,D=h&&V?hn(V):{width:0,height:0},M=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=M[S],U=M[I],F=xn(0,O[L],D[L]),Q=b?O[L]/2-k-F-q-A.mainAxis:B-F-q-A.mainAxis,N=b?-O[L]/2+k+F+U+A.mainAxis:R+F+U+A.mainAxis,z=t.elements.arrow&&Cn(t.elements.arrow),W=z?"y"===C?z.clientTop||0:z.clientLeft||0:0,Z=null!=(H=null==T?void 0:T[C])?H:0,J=P+N-Z,Y=xn(h?cn(_,P+Q-Z-W):_,P,h?dn(G,J):G);x[C]=Y,j[C]=Y-P}if(a){var X,K="x"===C?zi:Ji,ee="x"===C?Wi:Zi,te=x[w],ie="y"===w?"height":"width",ne=te+v[K],re=te-v[ee],oe=-1!==[zi,Ji].indexOf(m),se=null!=(X=null==T?void 0:T[w])?X:0,ae=oe?ne:te-O[ie]-E[ie]-se+A.altAxis,le=oe?te+O[ie]+E[ie]-se-A.altAxis:re,de=h&&oe?function(e,t,i){var n=xn(e,t,i);return n>i?i:n}(ae,te,le):xn(h?ae:ne,te,h?le:re);x[w]=de,j[w]=de-te}t.modifiersData[n]=j}},requiresIfExists:["offset"]};function Jn(e,t,i){void 0===i&&(i=!1);var n,r,o=on(t),s=on(t)&&function(e){var t=e.getBoundingClientRect(),i=un(t.width)/e.offsetWidth||1,n=un(t.height)/e.offsetHeight||1;return 1!==i||1!==n}(t),a=mn(t),l=pn(e,s),d={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(o||!o&&!i)&&(("body"!==tn(t)||kn(a))&&(d=(n=t)!==nn(n)&&on(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:_n(n)),on(t)?((c=pn(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=Gn(a))),{x:l.left+d.scrollLeft-c.x,y:l.top+d.scrollTop-c.y,width:l.width,height:l.height}}function Yn(e){var t=new Map,i=new Set,n=[];function r(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var n=t.get(e);n&&r(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||r(e)})),n}var Xn={placement:"bottom",modifiers:[],strategy:"absolute"};function Kn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function er(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,n=void 0===i?[]:i,r=t.defaultOptions,o=void 0===r?Xn:r;return function(e,t,i){void 0===i&&(i=o);var r,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xn,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],d=!1,c={state:a,setOptions:function(i){var r="function"==typeof i?i(a.options):i;u(),a.options=Object.assign({},o,a.options,r),a.scrollParents={reference:rn(e)?Rn(e):e.contextElement?Rn(e.contextElement):[],popper:Rn(t)};var s,d,p=function(e){var t=Yn(e);return en.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((s=[].concat(n,a.options.modifiers),d=s.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return a.orderedModifiers=p.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,n=void 0===i?{}:i,r=e.effect;if("function"==typeof r){var o=r({state:a,name:t,instance:c,options:n}),s=function(){};l.push(o||s)}})),c.update()},forceUpdate:function(){if(!d){var e=a.elements,t=e.reference,i=e.popper;if(Kn(t,i)){a.rects={reference:Jn(t,Cn(i),"fixed"===a.options.strategy),popper:hn(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var r=a.orderedModifiers[n],o=r.fn,s=r.options,l=void 0===s?{}:s,u=r.name;"function"==typeof o&&(a=o({state:a,options:l,name:u,instance:c})||a)}else a.reset=!1,n=-1}}},update:(r=function(){return new Promise((function(e){c.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(r())}))}))),s}),destroy:function(){u(),d=!0}};if(!Kn(e,t))return c;function u(){l.forEach((function(e){return e()})),l=[]}return c.setOptions(i).then((function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c}}var tr=er({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,n=e.options,r=n.scroll,o=void 0===r||r,s=n.resize,a=void 0===s||s,l=nn(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach((function(e){e.addEventListener("scroll",i.update,Hn)})),a&&l.addEventListener("resize",i.update,Hn),function(){o&&d.forEach((function(e){e.removeEventListener("scroll",i.update,Hn)})),a&&l.removeEventListener("resize",i.update,Hn)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=qn({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,n=i.gpuAcceleration,r=void 0===n||n,o=i.adaptive,s=void 0===o||o,a=i.roundOffsets,l=void 0===a||a,d={placement:ln(t.placement),variation:An(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,jn(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,jn(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},an,Wn,Qn,Zn,$n,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,n=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,s=Un(t,{elementContext:"reference"}),a=Un(t,{altBoundary:!0}),l=Nn(s,n),d=Nn(a,r,o),c=zn(l),u=zn(d);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}}]}),ir={passive:!0,capture:!0},nr=function(){return document.body};function rr(e,t,i){if(Array.isArray(e)){var n=e[t];return null==n?Array.isArray(i)?i[t]:i:n}return e}function or(e,t){var i={}.toString.call(e);return 0===i.indexOf("[object")&&i.indexOf(t+"]")>-1}function sr(e,t){return"function"==typeof e?e.apply(void 0,t):e}function ar(e,t){return 0===t?e:function(n){clearTimeout(i),i=setTimeout((function(){e(n)}),t)};var i}function lr(e){return[].concat(e)}function dr(e,t){-1===e.indexOf(t)&&e.push(t)}function cr(e){return[].slice.call(e)}function ur(e){return Object.keys(e).reduce((function(t,i){return void 0!==e[i]&&(t[i]=e[i]),t}),{})}function pr(){return document.createElement("div")}function hr(e){return["Element","Fragment"].some((function(t){return or(e,t)}))}function gr(e){return hr(e)?[e]:function(e){return or(e,"NodeList")}(e)?cr(e):Array.isArray(e)?e:cr(document.querySelectorAll(e))}function fr(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function vr(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function mr(e,t,i){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[n](t,i)}))}function yr(e,t){for(var i=t;i;){var n;if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var br={isTouch:!1},Cr=0;function wr(){br.isTouch||(br.isTouch=!0,window.performance&&document.addEventListener("mousemove",xr))}function xr(){var e=performance.now();e-Cr<20&&(br.isTouch=!1,document.removeEventListener("mousemove",xr)),Cr=e}function Or(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var i=t._tippy;t.blur&&!i.state.isVisible&&t.blur()}}var Er=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,$r=Object.assign({appendTo:nr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Ar=Object.keys($r);function Tr(e){var t=(e.plugins||[]).reduce((function(t,i){var n,r=i.name,o=i.defaultValue;r&&(t[r]=void 0!==e[r]?e[r]:null!=(n=$r[r])?n:o);return t}),{});return Object.assign({},e,t)}function jr(e,t){var i=Object.assign({},t,{content:sr(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Tr(Object.assign({},$r,{plugins:t}))):Ar).reduce((function(t,i){var n=(e.getAttribute("data-tippy-"+i)||"").trim();if(!n)return t;if("content"===i)t[i]=n;else try{t[i]=JSON.parse(n)}catch(e){t[i]=n}return t}),{})}(e,t.plugins));return i.aria=Object.assign({},$r.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}function Hr(e,t){e.innerHTML=t}function Sr(e){var t=pr();return!0===e?t.className="tippy-arrow":(t.className="tippy-svg-arrow",hr(e)?t.appendChild(e):Hr(t,e)),t}function Ir(e,t){hr(t.content)?(Hr(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Hr(e,t.content):e.textContent=t.content)}function Lr(e){var t=e.firstElementChild,i=cr(t.children);return{box:t,content:i.find((function(e){return e.classList.contains("tippy-content")})),arrow:i.find((function(e){return e.classList.contains("tippy-arrow")||e.classList.contains("tippy-svg-arrow")})),backdrop:i.find((function(e){return e.classList.contains("tippy-backdrop")}))}}function Pr(e){var t=pr(),i=pr();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=pr();function r(i,n){var r=Lr(t),o=r.box,s=r.content,a=r.arrow;n.theme?o.setAttribute("data-theme",n.theme):o.removeAttribute("data-theme"),"string"==typeof n.animation?o.setAttribute("data-animation",n.animation):o.removeAttribute("data-animation"),n.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?o.setAttribute("role",n.role):o.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||Ir(s,e.props),n.arrow?a?i.arrow!==n.arrow&&(o.removeChild(a),o.appendChild(Sr(n.arrow))):o.appendChild(Sr(n.arrow)):a&&o.removeChild(a)}return n.className="tippy-content",n.setAttribute("data-state","hidden"),Ir(n,e.props),t.appendChild(i),i.appendChild(n),r(e.props,e.props),{popper:t,onUpdate:r}}Pr.$$tippy=!0;var _r=1,Gr=[],kr=[];function Br(e,t){var i,n,r,o,s,a,l,d,c=jr(e,Object.assign({},$r,Tr(ur(t)))),u=!1,p=!1,h=!1,g=!1,f=[],v=ar(z,c.interactiveDebounce),m=_r++,y=(d=c.plugins).filter((function(e,t){return d.indexOf(e)===t})),b={id:m,reference:e,popper:pr(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(r)},setProps:function(t){if(b.state.isDestroyed)return;P("onBeforeUpdate",[b,t]),Q();var i=b.props,n=jr(e,Object.assign({},i,ur(t),{ignoreAttributes:!0}));b.props=n,F(),i.interactiveDebounce!==n.interactiveDebounce&&(k(),v=ar(z,n.interactiveDebounce));i.triggerTarget&&!n.triggerTarget?lr(i.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):n.triggerTarget&&e.removeAttribute("aria-expanded");G(),L(),x&&x(i,n);b.popperInstance&&(Y(),K().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));P("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,i=!b.state.isEnabled,n=br.isTouch&&!b.props.touch,r=rr(b.props.duration,0,$r.duration);if(e||t||i||n)return;if(j().hasAttribute("disabled"))return;if(P("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,T()&&(w.style.visibility="visible");L(),D(),b.state.isMounted||(w.style.transition="none");if(T()){var o=S(),s=o.box,l=o.content;fr([s,l],0)}a=function(){var e;if(b.state.isVisible&&!g){if(g=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,T()&&b.props.animation){var t=S(),i=t.box,n=t.content;fr([i,n],r),vr([i,n],"visible")}_(),G(),dr(kr,b),null==(e=b.popperInstance)||e.forceUpdate(),P("onMount",[b]),b.props.animation&&T()&&function(e,t){q(e,t)}(r,(function(){b.state.isShown=!0,P("onShown",[b])}))}},function(){var e,t=b.props.appendTo,i=j();e=b.props.interactive&&t===nr||"parent"===t?i.parentNode:sr(t,[i]);e.contains(w)||e.appendChild(w);b.state.isMounted=!0,Y()}()},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,i=!b.state.isEnabled,n=rr(b.props.duration,1,$r.duration);if(e||t||i)return;if(P("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,g=!1,u=!1,T()&&(w.style.visibility="hidden");if(k(),M(),L(!0),T()){var r=S(),o=r.box,s=r.content;b.props.animation&&(fr([o,s],n),vr([o,s],"hidden"))}_(),G(),b.props.animation?T()&&function(e,t){q(e,(function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(n,b.unmount):b.unmount()},hideWithInteractivity:function(e){H().addEventListener("mousemove",v),dr(Gr,v),v(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;X(),K().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);kr=kr.filter((function(e){return e!==b})),b.state.isMounted=!1,P("onHidden",[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),Q(),delete e._tippy,b.state.isDestroyed=!0,P("onDestroy",[b])}};if(!c.render)return b;var C=c.render(b),w=C.popper,x=C.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var O=y.map((function(e){return e.fn(b)})),E=e.hasAttribute("aria-expanded");return F(),G(),L(),P("onCreate",[b]),c.showOnCreate&&ee(),w.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&H().addEventListener("mousemove",v)})),b;function $(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function A(){return"hold"===$()[0]}function T(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function j(){return l||e}function H(){var e,t,i=j().parentNode;return i?null!=(t=lr(i)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function S(){return Lr(w)}function I(e){return b.state.isMounted&&!b.state.isVisible||br.isTouch||o&&"focus"===o.type?0:rr(b.props.delay,e?0:1,$r.delay)}function L(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function P(e,t,i){var n;(void 0===i&&(i=!0),O.forEach((function(i){i[e]&&i[e].apply(i,t)})),i)&&(n=b.props)[e].apply(n,t)}function _(){var t=b.props.aria;if(t.content){var i="aria-"+t.content,n=w.id;lr(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(i);if(b.state.isVisible)e.setAttribute(i,t?t+" "+n:n);else{var r=t&&t.replace(n,"").trim();r?e.setAttribute(i,r):e.removeAttribute(i)}}))}}function G(){!E&&b.props.aria.expanded&&lr(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===j()?"true":"false"):e.removeAttribute("aria-expanded")}))}function k(){H().removeEventListener("mousemove",v),Gr=Gr.filter((function(e){return e!==v}))}function B(t){if(!br.isTouch||!h&&"mousedown"!==t.type){var i=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!yr(w,i)){if(lr(b.props.triggerTarget||e).some((function(e){return yr(e,i)}))){if(br.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),p=!0,setTimeout((function(){p=!1})),b.state.isMounted||M())}}}function R(){h=!0}function V(){h=!1}function D(){var e=H();e.addEventListener("mousedown",B,!0),e.addEventListener("touchend",B,ir),e.addEventListener("touchstart",V,ir),e.addEventListener("touchmove",R,ir)}function M(){var e=H();e.removeEventListener("mousedown",B,!0),e.removeEventListener("touchend",B,ir),e.removeEventListener("touchstart",V,ir),e.removeEventListener("touchmove",R,ir)}function q(e,t){var i=S().box;function n(e){e.target===i&&(mr(i,"remove",n),t())}if(0===e)return t();mr(i,"remove",s),mr(i,"add",n),s=n}function U(t,i,n){void 0===n&&(n=!1),lr(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,i,n),f.push({node:e,eventType:t,handler:i,options:n})}))}function F(){var e;A()&&(U("touchstart",N,{passive:!0}),U("touchend",W,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(U(e,N),e){case"mouseenter":U("mouseleave",W);break;case"focus":U(Er?"focusout":"blur",Z);break;case"focusin":U("focusout",Z)}}))}function Q(){f.forEach((function(e){var t=e.node,i=e.eventType,n=e.handler,r=e.options;t.removeEventListener(i,n,r)})),f=[]}function N(e){var t,i=!1;if(b.state.isEnabled&&!J(e)&&!p){var n="focus"===(null==(t=o)?void 0:t.type);o=e,l=e.currentTarget,G(),!b.state.isVisible&&or(e,"MouseEvent")&&Gr.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||u)&&!1!==b.props.hideOnClick&&b.state.isVisible?i=!0:ee(e),"click"===e.type&&(u=!i),i&&!n&&te(e)}}function z(e){var t=e.target,i=j().contains(t)||w.contains(t);if("mousemove"!==e.type||!i){var n=K().concat(w).map((function(e){var t,i=null==(t=e._tippy.popperInstance)?void 0:t.state;return i?{popperRect:e.getBoundingClientRect(),popperState:i,props:c}:null})).filter(Boolean);(function(e,t){var i=t.clientX,n=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,o=e.props.interactiveBorder,s=r.placement.split("-")[0],a=r.modifiersData.offset;if(!a)return!0;var l="bottom"===s?a.top.y:0,d="top"===s?a.bottom.y:0,c="right"===s?a.left.x:0,u="left"===s?a.right.x:0,p=t.top-n+l>o,h=n-t.bottom-d>o,g=t.left-i+c>o,f=i-t.right-u>o;return p||h||g||f}))})(n,e)&&(k(),te(e))}}function W(e){J(e)||b.props.trigger.indexOf("click")>=0&&u||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function Z(e){b.props.trigger.indexOf("focusin")<0&&e.target!==j()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function J(e){return!!br.isTouch&&A()!==e.type.indexOf("touch")>=0}function Y(){X();var t=b.props,i=t.popperOptions,n=t.placement,r=t.offset,o=t.getReferenceClientRect,s=t.moveTransition,l=T()?Lr(w).arrow:null,d=o?{getBoundingClientRect:o,contextElement:o.contextElement||j()}:e,c={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(T()){var i=S().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?i.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?i.setAttribute("data-"+e,""):i.removeAttribute("data-"+e)})),t.attributes.popper={}}}},u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},c];T()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==i?void 0:i.modifiers)||[]),b.popperInstance=tr(d,w,Object.assign({},i,{placement:n,onFirstUpdate:a,modifiers:u}))}function X(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function K(){return cr(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&P("onTrigger",[b,e]),D();var t=I(!0),n=$(),r=n[0],o=n[1];br.isTouch&&"hold"===r&&o&&(t=o),t?i=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),P("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=I(!1);t?n=setTimeout((function(){b.state.isVisible&&b.hide()}),t):r=requestAnimationFrame((function(){b.hide()}))}}else M()}}function Rr(e,t){void 0===t&&(t={});var i=$r.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",wr,ir),window.addEventListener("blur",Or);var n=Object.assign({},t,{plugins:i}),r=gr(e).reduce((function(e,t){var i=t&&Br(t,n);return i&&e.push(i),e}),[]);return hr(e)?r[0]:r}Rr.defaultProps=$r,Rr.setDefaultProps=function(e){Object.keys(e).forEach((function(t){$r[t]=e[t]}))},Rr.currentInput=br,Object.assign({},an,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}});var Vr={name:"sticky",defaultValue:!1,fn:function(e){var t=e.reference,i=e.popper;function n(t){return!0===e.props.sticky||e.props.sticky===t}var r=null,o=null;function s(){var a=n("reference")?(e.popperInstance?e.popperInstance.state.elements.reference:t).getBoundingClientRect():null,l=n("popper")?i.getBoundingClientRect():null;(a&&Dr(r,a)||l&&Dr(o,l))&&e.popperInstance&&e.popperInstance.update(),r=a,o=l,e.state.isMounted&&requestAnimationFrame(s)}return{onMount:function(){e.props.sticky&&s()}}}};function Dr(e,t){return!e||!t||(e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left)}function Mr(e){var t;null===(t=e.tippy)||void 0===t||t.destroy(),e.tippy=null}function qr(e){!function(e){return(null==e?void 0:e.data().hasFilters)&&!e.tippy}(e)?(null==e?void 0:e.data().hasFilters)||Mr(e):function(e){const i=document.createElement("div"),n=new t.GscapeButton(Bt,"Has Filters Defined");n.style.position="relative";const r=Gi.container();r&&(e.tippy=Rr(i,{content:n,trigger:"manuaul",hideOnClick:!1,allowHTML:!0,getReferenceClientRect:e.popperRef().getBoundingClientRect,sticky:"reference",appendTo:r,placement:"right",plugins:[Vr]}),e.tippy.show())}(e)}Rr.setDefaultProps({render:Pr});const Ur={name:"klay",klay:{direction:"RIGHT",spacing:60,nodeLayering:"INTERACTIVE"}};let Fr;function Qr(e){var t,i;if(!e||!e.id)return;const n=Wr(e),r=Qi(e.id);let o;(null===(t=e.entities)||void 0===t?void 0:t.length)&&e.entities.length>1&&(null==r?void 0:r.children().length)!==(null===(i=e.entities)||void 0===i?void 0:i.length)&&e.entities.forEach(((t,i)=>{(null==r?void 0:r.children().some((e=>e[0].data("iri")===t.iri)))||(o=Gi.add({data:Wr(e,i)}),Nr())})),r?(r.removeData(),r.data(n)):(o=Gi.add({data:n}),Nr()),o=o||r,o&&qr(o)}function Nr(){const e=`node[type = "${C.DataProperty}"]`,t=`node[type = "${C.Class}"]`;if(Ni().length<=1){const e=Gi.container();return void(e&&(e.style.visibility="hidden",setTimeout((()=>{Gi.fit(),e.style.visibility="visible"}),200)))}const i=Gi.layout(Ur);i.on("layoutstop",(()=>{Gi.$(t).forEach((t=>{const i=t.neighborhood(e);t.isChildless()||t.children().layout(function(e){const t=e.position();return{name:"grid",condense:!0,padding:10,fit:!1,cols:2,boundingBox:{x1:t.x-20,x2:t.x+20,y1:t.y-20,y2:t.y+20}}}(t)).run(),i.empty()||i.layout(function(e){const t=e.position(),i=Math.sqrt(Math.pow(e.width()/2,2)+Math.pow(e.height()/2,2))+20;return{name:"circle",avoidOverlap:!0,fit:!1,boundingBox:{x1:t.x-2,x2:t.x+2,y1:t.y-2,y2:t.y+2},startAngle:-Math.PI/2,radius:i,nodeDimensionsIncludeLabels:!0}}(t)).run()})),Gi.fit()})),i.run()}function zr(e){Ni().filter("[?optional]").data("optional",!1),null==e||e.forEach((e=>{var t;null===(t=e.graphIds)||void 0===t||t.forEach((e=>{var t;return null===(t=Qi(e))||void 0===t?void 0:t.data("optional",!0)}))}))}function Wr(e,t){var i;if(e.entities&&e.id){let n=Object.assign({},e.entities[t||0]);null!=t?(n.parent=e.id,n.id=`${e.id}-${n.iri}`):n.id=e.id;const r=null===(i=te(e.id))||void 0===i?void 0:i.length;return n.hasFilters=!!(r&&r>0),n.displayed_name=Zr(n),n}}function Zr(e){let t=e[Fi.label];const i=Ri();return i===Fi.label&&t?t[Di]||t[Object.keys(t)[0]]:e[i]||e[Fi.prefixed]||e[Fi.full]}Gi.on("tap","node, edge",(e=>{if(Object.values(C).includes(e.target.data().type)){let t=e.target.isChild()?e.target.data().parent:e.target.id();Fr(t,e.target.data().iri)}}));const{DataProperty:Jr,Class:Yr,ObjectProperty:Xr,InverseObjectProperty:Kr}=C;function eo(e,t){ki=e||ki,t&&Vi(t),Gi.elements("[displayed_name]").forEach((e=>{e.data("displayed_name",Zr(e.data()))}))}function to(e){var t;Gi.style([{selector:"*",style:{color:(t=e).label_color,"border-width":"1px"}},{selector:`node[type = "${Yr}"]`,style:{shape:"round-rectangle","background-color":t.concept,"border-color":t.concept_dark,"text-halign":"center","text-valign":"center",width:"60px"}},{selector:"edge",style:{"line-style":"solid","target-arrow-shape":"triangle","target-arrow-fill":"filled","curve-style":"bezier","text-rotation":"autorotate","text-margin-y":-10,width:2}},{selector:"[displayed_name]",style:{"text-wrap":"wrap","text-max-width":"50px","text-overflow-wrap":"anywhere",label:"data(displayed_name)","font-size":"8px"}},{selector:`edge[type = "${Jr}"]`,style:{"curve-style":"straight","target-arrow-shape":"none","line-color":t.attribute_dark}},{selector:`node[type = "${Jr}"]`,style:{shape:"ellipse",height:10,width:10,"background-color":t.attribute,"border-color":t.attribute_dark}},{selector:`edge[type = "${Xr}"], edge[type = "${Kr}"]`,style:{"line-color":t.role_dark,"target-arrow-color":t.role_dark,"source-arrow-color":t.role_dark,"text-max-width":"60px"}},{selector:`edge[type = "${Kr}"]`,style:{"target-arrow-shape":"none","source-arrow-shape":"triangle","source-arrow-fill":"filled"}},{selector:".cdnd-drop-target",style:{"background-color":t.primary_dark,"border-style":"dashed","border-color":t.secondary,shape:"round-rectangle",label:"Release to join these classes","font-size":"12px"}},{selector:"[?optional]",style:{opacity:.8}},{selector:"node[?optional]",style:{"border-style":"dashed"}},{selector:"edge[?optional]",style:{"line-style":"dashed"}},{selector:"$node > node",style:{label:""}},{selector:".sparqling-selected",style:{"underlay-color":"green","underlay-padding":"10px","underlay-opacity":.5}}])}let io,no,ro;Gi.on("cdnddrop",((e,t,i)=>{t.empty()||i.empty()||(i.move({parent:null}),e.target.move({parent:null}),t.remove(),ro(e.target.id(),i.id()))}));const oo={grabbedNode:e=>io(e.id()),dropTarget:e=>no(null==e?void 0:e.id(),Gi.$(":grabbed").id()),dropSibling:(e,t)=>no(null==e?void 0:e.id(),Gi.$(":grabbed").id())};Gi.compoundDragAndDrop(oo);class so extends t.GscapeWidget{constructor(){super(),this.commands=[]}static get properties(){const e=super.properties;return e.commands={attribute:!1},e}static get styles(){let e=super.styles;return e[1],[e[0],je`
        :host {
          position: initial;
          display: flex;
          flex-direction: column;
          padding: 5px 0;
        }

        .command-entry {
          white-space: nowrap;
          cursor: pointer;
          padding: 5px 10px;

          display: flex;
          gap: 10px;
          align-items: center;
        }

        .command-icon {
          width: 19px;
          height: 19px;
        }

        .command-text {
          position: relative;
          top: 2px;
        }
      `]}render(){return it`
      ${this.commands.map(((e,t)=>it`
          <div class="command-entry highlight" command-id="${t}" @click=${this.handleCommandClick}>
            <span class="command-icon">${e.icon}</span>
            <span class="command-text">${e.content}</span>
          <div>
        `))}
    `}handleCommandClick(e){this.commands[e.currentTarget.getAttribute("command-id")].select(),this.onCommandRun()}}let ao,lo,co,uo,po,ho,go;customElements.define("query-graph-cxt-menu",so);const fo={content:((e="en")=>({en:"Add to Query Head",it:"Aggiungi in Query Head"}[e]))(),icon:Rt,select:()=>ao(go.id())},vo={content:((e="en")=>({en:"Delete",it:"Elimina"}[e]))(),icon:At,select:()=>{go.isChild()?lo(go.id(),go.data().iri):lo(go.id())}},mo={content:((e="en")=>({en:"Add Filter",it:"Aggiungi Filtro"}[e]))(),icon:_t,select:()=>co(go.id())},yo={content:((e="en")=>({en:"Make Optional",it:"Rendi Opzionale"}[e]))(),icon:Vt,select:()=>po(go.id())},bo={content:((e="en")=>({en:"Remove Optional",it:"Rendi non Opzionale"}[e]))(),icon:Yt,select:()=>ho(go.id())},Co={content:"See Filters",icon:kt,select:()=>uo(go.id())};const wo=document.createElement("div"),xo=new so,Oo=Rr(wo,{trigger:"manual",allowHTML:!0,interactive:!0,arrow:!0,appendTo:()=>{var e;return null===(e=Gi.container())||void 0===e?void 0:e.parentElement},placement:"bottom",content:()=>xo});function Eo(e){!function(e){po=e}((t=>{const i=fe(t);i&&e(i)}))}function $o(e){!function(e){ho=e}((t=>{const i=fe(t);i&&e(i)}))}Gi.on("cxttap",`node, edge[type = "${C.ObjectProperty}"], edge[type = "${C.InverseObjectProperty}"]`,(e=>{var t;t=e.target.popperRef(),Oo.setProps({getReferenceClientRect:t.getBoundingClientRect}),xo.commands=function(e){go=e;const t=[];return e.data().type===C.ObjectProperty||e.data().type===C.InverseObjectProperty?e.data().optional?t.push(bo):t.push(yo):(e.isChild()||(K("?"+e.id())||ee()||t.push(fo),e.data().hasFilters&&t.push(Co),t.push(mo),e.incomers().empty()||e.data().type===C.Class||(e.data().optional?t.push(bo):t.push(yo))),t.push(vo)),t}(e.target),Oo.show()})),xo.onCommandRun=()=>Oo.hide();const Ao=new Ui(l,[vi,bi,Pi,_i,Ii,Li]);function To(e){let t=fe(e)||ve(e);return(null==t?void 0:t.id)&&function(e){Ni().removeClass("sparqling-selected");let t=Gi.$id(e);t.addClass("sparqling-selected")}(t.id),t}function jo(e,t,i){var n,r;e&&(xe(e)||(Qr(e),t&&function(e,t,i){let n;if(!t.id||!t.entities)return;Qi(t.id)||Qr(t),n=i?Wr(i):{id:`${e.id}-${t.id}`,type:t.entities[0].type};const r=Qi(n.id);r?r.move({source:e.id,target:t.id}):(n.source=e.id,n.target=t.id,Gi.add({data:n}),Nr())}(t,e,i)),xe(e)?null===(n=e.children)||void 0===n||n.forEach((i=>jo(i,t,e))):null===(r=e.children)||void 0===r||r.forEach((t=>jo(t,e))))}function Ho(){let e=[];return Ni().forEach((t=>{const i=fe(t.id());t.data("displayed_name")&&!i&&(t.isChild()&&ve(t.data("iri"))||(e.push(t.id()),function(e){const t=Qi(e);if(t&&!t.empty()){if(Mr(t),t.isChild()){const e=t.parent();2===e.children().length&&e.children().each((e=>{e.remove()}))}t.remove()}}(t.id())))})),e}function So(e){if(e.id){let t=Qi(e.id);t&&a(t,t.cy().maxZoom())}}function Io(e){!function(e){ao=e}((t=>{const i=fe(t);i&&e(i)}))}function Lo(e){!function(e){lo=e}(((t,i)=>{const n=fe(t)||function(e){var t;const i=e.split("-"),n=i[0],r=i[1];return me(null===(t=Z())||void 0===t?void 0:t.graph,(e=>Ce(e,r)&&e.id===n))}(t);n&&e(n,i),Oo.hide()}))}function Po(e){!function(e){co=e}((t=>{const i=fe(t);i&&e(i)}))}function _o(e){!function(e){uo=e}((t=>{const i=fe(t);i&&e(i)}))}function Go(e){!function(e){ro=e}(((t,i)=>{let n=fe(t),r=fe(i);n&&r&&e(n,r)}))}function ko(e){!function(e){Fr=e}(((t,i)=>{const n=fe(t);n&&e(n,i)}))}function Bo(e){return!!ve(e)}io=e=>{const t=fe(e);return!!t&&!!(i=t)&&1===(null===(n=i.entities)||void 0===n?void 0:n.length)&&we(i);var i,n},function(e){no=e}(((e,t)=>{let i=fe(e),n=fe(t);return!(!i||!n)&&function(e,t){if(!e||!t)return!1;const i=we(t)&&we(e),n=ye(t),r=!!n&&Ce(e,n);return i&&r}(i,n)}));var Ro=Object.freeze({__proto__:null,widget:Ao,selectElement:To,render:jo,removeNodesNotInQuery:Ho,centerOnElem:So,getSelectedGraphElement:function(){var e;return fe(null===(e=Ni().filter(".sparqling-selected")[0])||void 0===e?void 0:e.id())},onAddHead:Io,onDelete:Lo,onAddFilter:Po,onSeeFilters:_o,onJoin:Go,onElementClick:ko,isIriInQueryGraph:Bo,renderOptionals:zr,setLanguage:Vi,onMakeOptional:Eo,onRemoveOptional:$o,setDisplayedNameType:eo,setTheme:to});let Vo,Do;const Mo=document.createElement("hr");function qo(e){e.preventDefault(),document.ondrop=null;const t=Mo.parentNode;if(t){t.replaceChild(Do,Mo),setTimeout((()=>Do.classList.remove("dragged")),100);const e=function(){const e=Do.parentNode;if(e){let t=0;for(const i of e.children){if(i===Do)return t;t+=1}}return null}();e&&Vo(Do._id,e)}else Mo.remove()}function Uo(e){e.preventDefault()}function Fo(e){Vo=e}function Qo(e){for(;"HEAD-ELEMENT"!==e.nodeName&&"body"!==e.nodeName;)e=e.parentNode;return"HEAD-ELEMENT"===e.nodeName?e:null}Mo.style.width="90%",Mo.style.opacity="0.5";class No extends t.GscapeWidget{constructor(e){super(),this.collapsible=!0,this.renameCallback=(e,t)=>{},this.localizeCallback=e=>{},this.addFilterCallback=e=>{},this.editFilterCallback=e=>{},this.deleteFilterCallback=e=>{},this.addFunctionCallback=e=>{},this.orderByCallback=e=>{},this.addAggregationCallback=e=>{},this.headElement=e,this.deleteButton=new t.GscapeButton(At,"Delete Field"),this.deleteButton.onClick=()=>{},this.deleteButton.classList.add("danger"),this.toggleBodyButton=new t.GscapeButton(t.icons.triangle_down,"Show More",t.icons.triangle_up),this.toggleBodyButton.onClick=()=>this.toggleBody(),this.toggleBodyButton.style.boxShadow="none",this.localizeButton=new t.GscapeButton(It,"Find in Query Graph"),this.localizeButton.onClick=()=>this.localizeCallback(this._id),this.addFilterButton=new t.GscapeButton(_t,"Add Filter"),this.addFilterButton.onClick=()=>this.addFilterCallback(this._id),this.addFunctionButton=new t.GscapeButton(Ft,"Add Function"),this.addFunctionButton.onClick=()=>this.addFunctionCallback(this._id),this.orderByButton=new t.GscapeButton(null,"Order By"),this.orderByButton.onClick=()=>this.orderByCallback(this._id),this.addAggregationButton=new t.GscapeButton(Wt,"Add Aggregation Function"),this.addAggregationButton.onClick=()=>this.addAggregationCallback(this._id),this.ondragstart=e=>{return Do=Qo((t=e).target),Do.classList.add("dragged"),void(null===(i=t.dataTransfer)||void 0===i||i.setData("text/plain",""));var t,i},this.ondragover=e=>function(e){e.preventDefault();let t=Qo(e.target);const i=t.getBoundingClientRect(),n=i.y+i.height/2;e.clientY-n>0?t.parentNode.insertBefore(Mo,t.nextSibling):t.parentNode.insertBefore(Mo,t)}(e),this.ondragend=e=>qo(e),this.ondrop=e=>e.preventDefault()}static get properties(){let e=super.properties,t={alias:{attribute:!1},graphElementId:{attribute:!1},function:{attribute:!1},_entityType:{type:String}};return Object.assign(e,t),e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          display:block;
          height: fit-content;
          margin:5px 2.5px 5px 0;
          padding: 5px;
          position: relative;
          opacity:1;
          border: none;
          transition: all 0.5s;
        }

        :host(.dragged) {
          opacity: 0.2;
          border: solid 2px var(--theme-gscape-secondary, ${t.secondary});
        }

        input {
          font-size: inherit;
          text-align: center;
          padding:2px;
          border-radius: 4px;
          border: solid 1px var(--theme-gscape-shadows, ${t.shadows});
          color: inherit;
          font-weight: bold;
          width:100%;
          box-sizing: border-box;
          background-color: var(--theme-gscape-primary, ${t.primary});
        }

        .input-wrapper, select {
          margin:5px 0;
        }

        #drag-handler {
          display: none;
          cursor: grab;
        }

        #field-head, #field-head-input-action-wrapper {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        #field-head-input-action-wrapper {
          flex-direction: column;
          flex-grow:2;
        }

        #field-head-input-action-wrapper > input {
          margin: 0;
          background-color: inherit;
          border: none;
        }

        #field-head-input-action-wrapper > input:hover {
          border: solid 1px var(--theme-gscape-shadows, ${t.shadows});
        }

        #field-head-input-action-wrapper:hover > #actions {
          display: flex;
        }

        #field-head-input-action-wrapper:hover > #state-tray {
          display: none;
        }

        #field-head:hover > #drag-handler {
          display: block;
        }

        #field-head-input-action-wrapper > input:focus {
          background-color: var(--theme-gscape-primary, ${t.primary});
        }

        gscape-button {
          position:initial;
          width: fit-content;
          --gscape-icon-size: 20px;
          background: inherit;
        }

        #actions {
          display: none;
          align-items: center;
          gap: 10px;
        }

        .danger:hover {
          color: var(--theme-gscape-error, ${t.error});
        }

        .filters-function-list {
          display:flex;
          flex-direction: column;
          gap: 20px;
          padding: 10px 5px;
        }

        .section {
          padding: 5px;
          margin: 10px 0;
        }

        .section > .title {
          font-weight: bold;
        }

        #drag-handler {
          height: 20px;
          width: 20px;
        }

        #state-tray {
          display: flex;
        }
        #state-tray > svg {
          height: calc(var(--gscape-icon-size) - 6px);
          width: calc(var(--gscape-icon-size) - 6px);
        }
      `,ri()]}render(){var e,t;return this.ordering>0?(this.orderByButton.icon=Nt,this.orderByButton.highlighted=!0):this.ordering<0?(this.orderByButton.icon=zt,this.orderByButton.highlighted=!0):(this.orderByButton.icon=Qt,this.orderByButton.highlighted=!1),it`
      <div>
        <div id="field-head">
          <div
            id="drag-handler"
            draggable="true"
          >
            ${Ut}
          </div>
          <div id="field-head-input-action-wrapper">
            <input
              id="${"alias"}"
              @focusout="${this.handleInputChange}"
              placeholder="${this.alias||this.graphElementId}"
              value="${this.alias||this.graphElementId}"
              title="Rename Field"
            />
            ${this.hasAnythingInBody||this.ordering?it`
                <div id="state-tray">
                  ${(null===(e=this.filters)||void 0===e?void 0:e.length)>0?Bt:null}
                  ${this.function?Ft:null}
                  ${this.ordering>0?Nt:null}
                  ${this.ordering<0?zt:null}
                  ${this.groupBy?Wt:null}
                </div>
              `:null}
            <div id="actions">
              ${this.localizeButton}
              ${this.deleteButton}
              ${this.addFilterButton}
              ${this.function?null:this.addFunctionButton}
              ${this.orderByButton}
              ${this.groupBy?null:this.addAggregationButton}
            </div>
          </div>
          ${this.hasAnythingInBody?this.toggleBodyButton:null}
        </div>
        <div id="field-body" class="widget-body hide">
          ${this.groupBy?it`
              <div class="section">
                <div class="section-header">Aggregation</div>
                <div class="filters-function-list">
                  ${oi([this.groupBy])}
                </div>
                <span class="title">Having</span>
                <div class="filters-function-list">
                  ${oi(this.having)}
                </div>
              </div>
            `:null}

          ${this.function?it`
              <div class="section">
                <div class="section-header">Function</div>
                <div class="filters-function-list">
                  ${oi([this.function])}
                </div>
              </div>
            `:null}
          
          ${(null===(t=this.filters)||void 0===t?void 0:t.length)>0?it`
              <div class="section">
                <div class="section-header">Filters</div>
                <div class="filters-function-list">
                  ${oi(this.filters,this.editFilterCallback,this.deleteFilterCallback)}
                </div>
              </div>
            `:null}
          <!-- ******************  SORT  ****************** -->
          <div class="section" style="text-align: center; margin-bottom:0">
            ${this.getSelect("sort","sort-select","sort",{asc:"Ascending",desc:"Descending"})}
          </div>
        </div>
      </div>
    `}set headElement(e){if(this._id===e.id)return;e.id&&(this._id=e.id),e.alias&&(this.alias=e.alias),e.graphElementId&&(this.graphElementId=e.graphElementId),this.entityType=e.entityType,this.dataType=e.dataType||"Type",e.function&&(this.function=e.function),e.ordering&&(this.ordering=e.ordering),e.groupBy&&(this.groupBy=e.groupBy),e.having&&(this.having=e.having);if(this.style.backgroundColor=`var(--theme-gscape-${{class:"concept",objectProperty:"role",dataProperty:"attribute"}[this.entityType]})`,e.graphElementId){const t=te(e.graphElementId);t&&(this.filters=t)}}getSelect(e,t,i,n){const r=Object.values(n).includes(i);return it`
      <select name="${t}" sectionName="${e}">
        ${r?null:it`<option selected>${i}</option>`}
        ${Object.keys(n).map((e=>n[e]===i?it`<option value="${e}" selected>${n[e]}</option>`:it`<option value="${e}">${n[e]}</option>`))}
          </select>
    `}handleInputChange(e){let t=e.currentTarget;this.alias!==t.value&&t.value.length>0&&t.value!==this.graphElementId?this.renameCallback(this._id,t.value):t.value=this.alias||this.graphElementId}onRename(e){this.renameCallback=e}onLocalize(e){this.localizeCallback=e}onFunctionSet(e){}onAddFilter(e){this.addFilterCallback=e}onEditFilter(e){this.editFilterCallback=e}onDeleteFilter(e){this.deleteFilterCallback=e}onAddFunction(e){this.addFunctionCallback=e}onOrderByChange(e){this.orderByCallback=e}onAddAggregation(e){this.addAggregationCallback=e}get dragHandler(){return this.shadowRoot.querySelector("#drag-handler")}get hasAnythingInBody(){var e;return(null===(e=this.filters)||void 0===e?void 0:e.length)>0||this.function||this.groupBy}}customElements.define("head-element",No);const{GscapeWidget:zo}=t;class Wo extends zo{constructor(e){super(),this.headElements=[],this.collapsible=!0,e&&(this.headSlottedWidgets=e)}static get properties(){let e=super.properties;return e.headElements={attribute:!1},e}static get styles(){let e=super.styles,t=e[1];return[e[0],je`
        :host {
          position:initial;
          width: 300px;
          background: transparent;
          box-shadow: none;
          pointer-events:initial;
        }

        :host(:hover){
          box-shadow: none;
        }

        gscape-head {
          --title-text-align: 'left';
          border-radius: 8px;
        }

        gscape-head, #empty-head {
          background-color: var(--theme-gscape-primary, ${t.primary});
          box-shadow: 0 2px 4px 0 var(--theme-gscape-shadows, ${t.shadows});
        }

        .widget-body {
          margin:0;
          border-top: none;
          border-radius: inherit;
          border-bottom-left-radius:0;
          border-bottom-right-radius:0;
          max-height:350px;
        }

        #elems-wrapper {
          display: flex;
          flex-direction: column;
        }

        #buttons-tray > * {
          position: initial;
        }

        #buttons-tray {
          display: flex;
          align-items: center;
          justify-content: end;
          gap:10px;
          flex-grow: 3;
          padding: 0 10px;
        }

        #buttons-tray > gscape-button {
          --gscape-icon-size: 20px;
        }

        #empty-head {
          padding: 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 20px;
          text-align: center;
        }

        #empty-head > .icon {
          --gscape-icon-size: 60px;
        }

        #empty-head-msg {
          font-weight: bold;
        }

        .tip {
          font-size: 90%;
          color: var(--theme-gscape-shadows, ${t.shadows});
          border-bottom: dotted 2px;
          cursor: help;
        }

        .tip: hover {
          color:inherit;
        }
      `]}render(){return it`
      <div class="widget-body">
      ${ee()?it`
          <div id="empty-head">
            <div class="icon">${Jt}</div>
            <div id="empty-head-msg">${((e="en")=>({en:"Count the number of results",it:"Conta il numero di risultati"}[e]))()}</div>
          </div>
        `:0===this.headElements.length?it`
            <div id="empty-head">
              <div class="icon">${Ht}</div>
              <div id="empty-head-msg">${((e="en")=>({en:"Your query will output everything"}[e]))()}</div>
              <div class="tip" title="${((e="en")=>({en:"The query head is the output of your query\nand it seems like you have nothing in it yet.\n\nWe don't think an empty query is what you want\nso your result now will be everything. \n\nYou can choose what to see in output from the\nquery graph, data properties \nwill automatically go in the query head."}[e]))()}">${((e="en")=>({en:"Why?",it:"Perché?"}[e]))()}</div>
            </div>
            `:it`
            <div style="overflow-y:scroll; max-height:inherit; scrollbar-width: inherit;">
              <div id="elems-wrapper" @dragover=${Uo} @drop=${Uo}>
                ${this.headElements.map((e=>new No(e)))}
              </div>
            </div>
            `}
      </div>
      <gscape-head title="Query Results">
        <div id="buttons-tray">
          ${this.headSlottedWidgets}
        </div>
      </gscape-head>
    `}updated(){this.shadowRoot.querySelectorAll("head-element").forEach((e=>{e.deleteButton.onClick=()=>this.deleteElementCallback(e._id),e.onRename(this.renameElementCallback),e.onLocalize(this.localizeElementCallback),e.onAddFilter(this.addFilterCallback),e.onEditFilter(this.editFilterCallback),e.onDeleteFilter(this.deleteFilterCallback),e.onAddFunction(this.addFunctionCallback),e.onOrderByChange(this.orderByChangeCallback),e.onAddAggregation(this.addAggregationCallback)}))}firstUpdated(){super.firstUpdated();this.header.left_icon=jt,this.hide()}onDelete(e){this.deleteElementCallback=e}onRename(e){this.renameElementCallback=e}onLocalize(e){this.localizeElementCallback=e}onAddFilter(e){this.addFilterCallback=e}onEditFilter(e){this.editFilterCallback=e}onDeleteFilter(e){this.deleteFilterCallback=e}onAddFunction(e){this.addFunctionCallback=e}onOrderByChange(e){this.orderByChangeCallback=e}onAddAggregation(e){this.addAggregationCallback=e}blur(){this.shadowRoot.querySelectorAll("head-element").forEach((e=>{e.shadowRoot.querySelectorAll("input").forEach((e=>e.blur()))}))}hide(){super.hide()}show(){super.show()}}customElements.define("query-head",Wo);const Zo=new Wo;function Jo(e){Zo.onDelete((t=>{const i=K(t);i&&e(i)}))}function Yo(e){Zo.onRename(((t,i)=>{e(t,i)}))}function Xo(e){Zo.onLocalize((t=>{const i=K(t);i&&e(i)}))}function Ko(e){e&&(Zo.headElements=e)}function es(e){Zo.onAddFilter((t=>{e(t)}))}function ts(e){Zo.onEditFilter((t=>e(t)))}function is(e){Zo.onDeleteFilter((t=>e(t)))}function ns(e){Zo.onAddFunction((t=>e(t)))}function rs(e){Zo.onOrderByChange((t=>e(t)))}function os(e){Zo.onAddAggregation((t=>e(t)))}var ss=Object.freeze({__proto__:null,widget:Zo,onDelete:Jo,onRename:Yo,onLocalize:Xo,render:Ko,onAddFilter:es,onEditFilter:ts,onDeleteFilter:is,onAddFunction:ns,onOrderByChange:rs,onAddAggregation:os,onElementSortChange:Fo});function as(e){return!e||1===(null==e?void 0:e.code)||"error"===(null==e?void 0:e.type)}function ls(e,t=!0){return new Promise((function(i){ae+=1,Hi.startLoadingAnimation(),e.then((e=>{if(as(e.data))throw new Error(function(e){if(as(e))return e.message}(e.data));i(e.data)})).catch((e=>{console.error(e),t&&(Si.text=`${e.name} : ${e.message}`,Si.show())})).finally((()=>(ae-=1,void(0===ae&&Hi.stopLoadingAnimation()))))}))}let ds;var cs=()=>ds;function us(e){ds=e}function ps(e){let t=ds.renderer.cy.$(".sparqling-selected");if(t.empty())return!1;{const i=t.first().data().iri;return i.full===e||i.prefixed===e}}function hs(e){return c(this,void 0,void 0,(function*(){const t=cs();let i=t.ontology.getEntityOccurrences(e),n=i.find((e=>e.data("diagram_id")===t.actualDiagramID));n||(n=i[0]),gs(n)}))}function gs(e){return c(this,void 0,void 0,(function*(){const t=cs();(null==e?void 0:e.data("diagram_id"))!==t.actualDiagramID&&(yield t.showDiagram(e.data("diagram_id"))),e&&a(e,1.5)}))}let fs;Ei.onSuggestionSelection((e=>hs(e)));const vs=()=>fs;function ms(e){let t=cs().ontology.getEntityOccurrences(e);t&&t.forEach((e=>{e.addClass("highlighted")}))}function ys(e){if(!e)return;bs();ls(new H(void 0,ne()).highligths(e,void 0,re())).then((t=>{fs=t,xs(e),Ei.highlights=function(){var e,t,i;let n=JSON.parse(JSON.stringify(fs));const r=cs().ontology;return n.classes=null===(e=n.classes)||void 0===e?void 0:e.map((e=>o(e))),n.dataProperties=null===(t=n.dataProperties)||void 0===t?void 0:t.map((e=>o(e))),n.objectProperties=null===(i=n.objectProperties)||void 0===i?void 0:i.map((e=>(e.objectPropertyIRI=o(e.objectPropertyIRI||""),e))),n;function o(e){const t=r.destructureIri(e);return t?t.prefixed:e}}()}))}function bs(){const e=cs();Object.values(e.ontologies).forEach((e=>{var t;null===(t=null==e?void 0:e.diagrams)||void 0===t||t.forEach((e=>{let t=null==e?void 0:e.cy;t.$(".sparqling-selected").removeClass("sparqling-selected"),t.$(".highlighted").removeClass("highlighted"),t.$(".faded").removeClass("faded").selectify()}))})),fs=void 0,Ei.highlights=void 0}function Cs(e){var t,i,n;return(null===(t=null==fs?void 0:fs.classes)||void 0===t?void 0:t.includes(e))||(null===(i=null==fs?void 0:fs.dataProperties)||void 0===i?void 0:i.includes(e))||(null===(n=null==fs?void 0:fs.objectProperties)||void 0===n?void 0:n.map((e=>e.objectPropertyIRI)).includes(e))||!1}function ws(){let e=J();if(e){const t=ye(e);t&&xs(t)}}function xs(e){var t,i,n;const r=cs();null===(t=null==fs?void 0:fs.classes)||void 0===t||t.forEach((e=>ms(e))),null===(i=null==fs?void 0:fs.dataProperties)||void 0===i||i.forEach((e=>ms(e))),null===(n=null==fs?void 0:fs.objectProperties)||void 0===n||n.forEach((e=>ms(e.objectPropertyIRI)));for(const t of r.ontology.getEntityOccurrences(e))if(t.data("diagram_id")===r.actualDiagramID){t.addClass("sparqling-selected");break}const o=r.renderer.cy.$(".highlighted, .sparqling-selected");r.renderer.cy.elements().difference(o).addClass("faded")}let Os=(e,t)=>{};function Es(e){let t=cs().ontologies.default.getEntityOccurrences(e);if(t)for(let e of t){let t=e.openNeighborhood(`[type = "${i.RANGE_RESTRICTION}"]`).openNeighborhood(`[type = "${i.VALUE_DOMAIN}"]`);if(t[0]&&t.length>0){let e=t[0].data().iri.prefixed,i=Object.keys(T).find((t=>T[t]===e));if(i)return T[i]}}}function $s(e,t){t.forEach((t=>{e.style().selector(t.selector).style(t.style)}))}function As(e){var t;const i=vi.querySelector("input"),n=bi.querySelector("input");e.graph||(W(void 0),Y().clear(),bs(),cs().unselectEntity(),Pi.state=!1,_i.state=!1,i&&(i.value=""),n&&(n.value="")),Hi.canQueryRun=e.graph&&!oe()&&void 0!==Us.onQueryRun;let r=z(e);Ao.isBGPEmpty=null===r.graph||void 0===r.graph,jo(r.graph);Ho().forEach((e=>Y().delete(e))),zr(r.optionals),Ko(null===(t=r.head)||void 0===t?void 0:t.map((e=>function(e){const t=JSON.parse(JSON.stringify(e));if(t.graphElementId){let e=fe(t.graphElementId);if(e){const i=ye(e);if(i)return t.entityType=be(e),t.dataType=t.entityType===C.DataProperty?Es(i):null,t}}return t}(e)))),Ai.filterList=te(Ai.variable),xi.text=(null==r?void 0:r.sparql)?r.sparql:li(),i&&n&&(Pi.disabled=_i.disabled=i.disabled=n.disabled=!(null==e?void 0:e.graph))}const{CONCEPT:Ts,OBJECT_PROPERTY:js,DATA_PROPERTY:Hs}=i;let Ss,Is,Ls,Ps;function _s(e){var t,i;return c(this,void 0,void 0,(function*(){let n=e.data("iri").fullIri;const r=J();if(r&&Ce(r,n)&&!Ss)return void(ps(n)||(bs(),ys(n)));const o=cs();switch(e.data("type")){case js:break;case Ts:null===(t=Gs(e))||void 0===t||t.then((t=>{var i;if(!t)return;const r=Oe(null===(i=Z())||void 0===i?void 0:i.graph,t.graph),o=Rs(e,r);bs(),ys(n),As(t),o&&o.id&&W(To(o.id))}));break;case Hs:null===(i=ks(e))||void 0===i||i.then((t=>{var i;if(!t)return;const n=Oe(null===(i=Z())||void 0===i?void 0:i.graph,t.graph);Rs(e,n),As(t)}))}o.unselectEntity()}))}function Gs(e){return c(this,void 0,void 0,(function*(){const t=new L(void 0,ne());Bs(e);let i=new Promise((e=>{e(null)})),n=Z();if((null==n?void 0:n.graph)&&!Is&&!Ss&&!Ls)return console.log("selection ignored for class "+Ps),i;let r=J();return Ss&&Ss.objectPropertyIRI&&(null==r?void 0:r.id)?i=ls(t.putQueryGraphObjectProperty(r.id,"",Ss.objectPropertyIRI,Ps,Ss.direct||!1,n,re())):(null==n?void 0:n.graph)&&Is&&(null==r?void 0:r.id)?i=ls(t.putQueryGraphClass(r.id,"",Ps,n,re())):(null==n?void 0:n.graph)||(i=ls(t.getQueryGraph(Ps,re()))),Ss=null,i}))}function ks(e){return c(this,void 0,void 0,(function*(){Bs(e);let t=new Promise((e=>{e(null)}));if(!Is)return e.unselect(),t;const i=Z(),n=J();if(!(null==n?void 0:n.id))return t;if(we(n)){t=ls(new L(void 0,ne()).putQueryGraphDataProperty(n.id,"",Ps,i,re()))}return Ss=null,t}))}function Bs(e){Ps=e.data("iri").fullIri,Is=Cs(Ps),Ls=Bo(Ps)}function Rs(e,t){let i=null==t?void 0:t.find((e=>Ce(e,Ps)));return i&&Y().set(i.id+Ps,e.id()),i}!function(e){Os=e}(((e,t)=>{const i=cs();Ss=e,i.centerOnNode(t.id()),_s(t)}));var Vs=[{selector:'node[shape = "ellipse"], .bubble',style:{"underlay-shape":"ellipse"}},{selector:".sparqling-selected",style:{"underlay-color":"green","underlay-padding":"10px","underlay-opacity":.5}},{selector:".highlighted",style:{"underlay-color":"red","underlay-padding":"10px","underlay-opacity":.2}},{selector:".faded",style:{opacity:.25}}];function Ds(){if(oe()){const t=new U;ce().text().then((i=>{ls(t.standaloneOntologyGrapholGet()).then((n=>{i.trim()===n.trim()?e():ls(t.standaloneOntologyUploadPost(ce())).then((t=>e()))}))}))}else e();function e(){var e;!function(){if(le)return;const e=cs();$s(e.renderer.cy,Vs),Ms(e.renderer.cy),e.onLanguageChange((e=>Vi(e))),e.onEntityNameTypeChange((t=>{eo(t,e.languages.selected)})),e.onThemeChange((t=>{to(t),$s(e.renderer.cy,Vs)})),e.onDiagramChange((()=>{Ms(e.renderer.cy),$s(e.renderer.cy,Vs),ws()})),e.onRendererChange((()=>c(this,void 0,void 0,(function*(){$s(e.renderer.cy,Vs),yield e.SimplifiedOntologyPromise,ws()})))),pe(!0)}(),cs().widgets.OWL_VISUALIZER.disable(),Ao.show(),Zo.show(),Ei.show(),ge(!0),Hi.startSparqlingButton.highlighted=!0,Hi.canQueryRun=(null===(e=Z())||void 0===e?void 0:e.graph)&&!oe()&&void 0!==Us.onQueryRun;const t=J();if(t){const e=ye(t);e&&ys(e)}Us.onStart()}}function Ms(e){const t=`[displayed_name][type = "${i.OBJECT_PROPERTY}"]`;e.on("mouseover",t,(e=>{he()&&function(e,t){var i;const n=vs();if(!n||!Cs(e.data("iri").fullIri))return;const r=cs();let o=null===(i=n.objectProperties)||void 0===i?void 0:i.find((t=>{if(null==t?void 0:t.objectPropertyIRI)return r.ontology.checkEntityIri(e,t.objectPropertyIRI)}));if(!o||!o.relatedClasses||o.relatedClasses.length<=0)return;Oi.list=o.relatedClasses.map((e=>{var t;return r.ontology.destructureIri(e)?null===(t=r.ontology.destructureIri(e))||void 0===t?void 0:t.prefixed:e}));const s=J();s&&(Oi.class=function(e,t=0){if(null==e?void 0:e.entities)return e.entities[t].prefixedIri}(s)||ye(s),Oi.objProperty=e.data("iri").prefixed,Oi.reverseArrow=!o.direct,Oi.show(t),Oi.onSelection((e=>{try{if(o){let t=r.ontology.getEntityOccurrences(e).find((e=>e.data().diagram_id===r.actualDiagramID))||r.ontology.getEntityOccurrences(e)[0];t.selectify(),Oi.hide(),Os(o,t)}}catch(e){console.error(e)}})))}(e.target,e.renderedPosition)})),e.on("mouseout",t,(e=>{he()&&(Oi.list=[],Oi.hide())})),e.on("dblclick","[displayed_name].predicate",(e=>{he()&&_s(e.target)}))}function qs(){he()&&(Ao.hide(),Zo.hide(),Ei.hide(),xi.hide(),Oi.hide(),Oo.hide(),$i.hide(),Ai.hide(),Si.hide(),ds.ontology.diagrams.forEach((e=>{e.unselectAll()})),bs(),cs().widgets.ENTITY_DETAILS.hide(),ge(!1),Hi.startSparqlingButton.highlighted=!1,Hi.canQueryRun=!1,Us.onStop())}var Us={queryGraph:Ro,queryHead:ss,getQueryBody:Z,startStopButton:Hi.startSparqlingButton,runQueryButton:Hi.runQueryButton,onQueryRun:void 0,onStop:()=>{},onStart:()=>{},start:Ds,stop:qs};function Fs(){var e,t;const i=Z();if(null===(e=null==i?void 0:i.graph)||void 0===e?void 0:e.id){ls(I(void 0,ne()).deleteGraphElementId(null===(t=null==i?void 0:i.graph)||void 0===t?void 0:t.id,i,re())).then((e=>{As(e)}))}}function Qs(e,t){let i,n;if(function(e){return!!e.graphElementId}(e)&&e.graphElementId?(i=fe(e.graphElementId),n=e.alias):function(e){return!!e.entities}(e)&&(i=e),!i)return;const r=ye(i);r&&(we(i)?t.parametersType=A:t.parametersType=$,t.modality=ti.DEFINE,t._id=t instanceof ni?void 0:e.id,t.operator=void 0,t.parameters=[{type:E,constantType:Es(r),value:i.id}],t.variableName=n||i.id,t.show())}function Ns(e){return c(this,void 0,void 0,(function*(){if(null==e)return;ls(new k(void 0,ne()).removeFilter(e,Z(),re())).then((e=>{var t;As(e),$i._id=void 0,$i.operator=void 0,null===(t=$i.parameters)||void 0===t||t.splice(1),$i.modality=ti.DEFINE,$i.setAsCorrect("Deleted correctly")}))}))}function zs(e){var t,i,n;const r=function(e){const t=Z();if(t.filters)return t.filters[e]}(e);r&&($i.modality=ti.EDIT,$i._id=e,$i.operator=null===(t=r.expression)||void 0===t?void 0:t.operator,$i.parameters=null===(i=r.expression)||void 0===i?void 0:i.parameters,$i.parametersType=(null===(n=r.expression)||void 0===n?void 0:n.parameters)?r.expression.parameters[1].type:void 0,$i.show(),Ai.hide())}function Ws(e){ls(new _(void 0,ne()).distinctQueryGraph(e,Z(),re())).then((e=>{As(e)}))}Io((e=>c(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.id){const t=R(void 0,ne()),i=Z();ls(t.addHeadTerm(e.id,i,re())).then((e=>{As(e)}))}})))),Lo(((e,t)=>{if(!e.id)return;const i=I(void 0,ne()),n=Z(),r=J(),o=cs();function s(t){e.id&&(Y().delete(e.id),As(t))}t?ls(i.deleteGraphElementIdClass(e.id,t,n,re())).then((e=>{s(e)})):ls(i.deleteGraphElementId(e.id,n,re())).then((t=>{if(t.graph&&!me(t.graph,(e=>e.id===(null==r?void 0:r.id)))){let t=me(n.graph,(t=>{var i;return(null===(i=t.children)||void 0===i?void 0:i.some((t=>{var i;if(null===(i=t.children)||void 0===i?void 0:i.find((t=>t.id===e.id)))return!0})))||!1}));if(W(t),bs(),o.unselectEntity(),t){const e=ye(t);e&&(hs(e),ys(e))}(null==t?void 0:t.id)&&To(t.id)}s(t)}))})),Go(((e,t)=>c(void 0,void 0,void 0,(function*(){if(e.id&&t.id){const i=I(void 0,ne()),n=Z();ls(i.putQueryGraphJoin(e.id,t.id,n,re())).then((t=>{W(e),As(t)}))}})))),ko(((e,t)=>{const i=cs(),n=Y().get(e.id+t);n?function(e){c(this,void 0,void 0,(function*(){const t=cs().ontology.getElem(e);t&&gs(t)}))}(n):hs(t),we(e)&&J()!==e&&(W(e),ys(t)),i.widgets.ENTITY_DETAILS.setEntity(i.ontology.getEntityOccurrences(t)[0]);const r=J();(null==r?void 0:r.id)&&To(r.id)})),Eo((e=>{if(e.id){const t=M(void 0,ne()),i=Z();ls(t.newOptionalGraphElementId(e.id,i,re())).then((e=>{As(e)}))}})),$o((e=>{if(e.id){const t=M(void 0,ne()),i=Z();ls(t.removeOptionalGraphElementId(e.id,i,re())).then((e=>{As(e)}))}})),Po((e=>{Qs(e,$i)})),_o((e=>{if(e.id){for(const t of Zo.shadowRoot.querySelectorAll("head-element"))if(t.graphElementId===e.id)return t.focus(),t.showBody(),void t.scrollIntoView({behavior:"smooth"});const t=te(e.id);t&&(Ai.filterList=t),Ai.variable=e.id,Ai.show()}})),Ii.onClick=()=>{xi.isVisible?xi.hide():xi.show()},Li.onClick=()=>Fs(),Ai.onEdit((e=>zs(e))),Ai.onDelete((e=>{Ns(e)})),$i.onSubmit(((e,t,i)=>c(void 0,void 0,void 0,(function*(){const n=new k(void 0,ne()),r={expression:{operator:t,parameters:i}},o=X();function s(e){As(e),$i.setAsCorrect()}null==e?(o.filters||(o.filters=[]),e=o.filters.push(r)-1,ls(n.newFilter(e,o,re())).then((t=>{$i._id=e,$i.modality=ti.EDIT,s(t)}))):o.filters&&(o.filters[e]=r,ls(n.editFilter(e,o,re())).then((e=>{s(e)})))})))),$i.onDelete((e=>Ns(e))),Jo((e=>c(void 0,void 0,void 0,(function*(){const t=R(void 0,ne()),i=Z();e.id&&ls(t.deleteHeadTerm(e.id,i,re())).then((e=>{As(e)}))})))),Yo(((e,t)=>c(void 0,void 0,void 0,(function*(){const i=R(void 0,ne()),n=X(),r=K(e,n);(null==r?void 0:r.id)&&(r.alias=t,ls(i.renameHeadTerm(r.id,n,re())).then((e=>{As(e)})))})))),Xo((e=>{if(e.graphElementId){let t=fe(e.graphElementId);if(t){const e=ye(t);e&&(So(t),hs(e))}}})),es((e=>{const t=K(e);t&&Qs(t,$i)})),ts((e=>{zs(e)})),is((e=>{Ns(e)})),ns((e=>{const t=K(e);t&&Qs(t,Ti)})),Fo(((e,t)=>{const i=K(e);if(!i)return;const n=R(void 0,ne()),r=X(),o=r.head,s=o[t],a=o.map((e=>e.id));o.splice(a.indexOf(e),1),o.splice(a.indexOf(s.id),0,i),ls(n.reorderHeadTerms(r,re())).then((e=>As(e)))})),rs((e=>{const t=X(),i=t.head.find((t=>t.id===e));i&&(i.ordering=(i.ordering||0)+1,i.ordering>=2&&(i.ordering=-1));ls(R(void 0,ne()).orderByHeadTerm(e,t,re())).then((e=>{As(e)}))})),os((e=>{const t=K(e);t&&Qs(t,ji)})),Hi.onSparqlingStart((()=>{try{Ds()}catch(e){return console.log("caught"),void console.log(e)}Us.onStart()})),Hi.onSparqlingStop((()=>{qs(),Us.onStop()})),Hi.onQueryRun((()=>{var e;Us.onQueryRun(null===(e=Z())||void 0===e?void 0:e.sparql)})),ji.onSubmit(((e,t,i,n,r)=>{const o=new V(void 0,ne()),s=X(),a=K(e,s);a&&(a.groupBy={distinct:i,aggregateFunction:t},n&&r&&(a.having=[{expression:{operator:n,parameters:r}}]),ls(o.aggregationHeadTerm(e,s,re())).then((e=>{As(e),ji.setAsCorrect()})))})),Ti.onSubmit(((e,t,i)=>c(void 0,void 0,void 0,(function*(){const n=new V(void 0,ne()),r={name:t,parameters:i},o=X();if(e){const t=o.head.find((t=>t.id===e));t&&(t.function=r,ls(n.functionHeadTerm(e,o,re())).then((e=>{As(e),Ti.setAsCorrect()})))}})))),Pi.onToggle=()=>{if(ee()){ls(new _(void 0,ne()).countStarQueryGraph(Pi.state,Z(),re())).then((e=>As(e)))}else Ws(Pi.state)};const Zs=Ks(vi);Zs&&(Zs.onchange=Xs,Zs.addEventListener("focusout",Xs),Zs.onsubmit=Ys);const Js=Ks(bi);function Ys(){const e=Z();if(!(null==e?void 0:e.graph))return;const t=Ks(bi);if(t){let i=t.valueAsNumber;const n=new _(void 0,ne());if(Kt(t)&&i!==e.offset){if(isNaN(i)&&(i=-1,i===e.offset||!e.offset))return;ls(n.offsetQueryGraph(i,e,re())).then((e=>{As(e)}))}else t.value=e.offset&&e.offset>0?e.offset.toString():""}}function Xs(){const e=Z();if(!(null==e?void 0:e.graph))return;const t=Ks(vi);if(t){let i=t.valueAsNumber;const n=new _(void 0,ne());if(Kt(t)&&i!==e.limit){if(isNaN(i)&&(i=-1,i===e.limit||!e.limit))return;ls(n.limitQueryGraph(i,e,re())).then((e=>{As(e)}))}else t.value=e.limit&&e.limit>0?e.limit.toString():""}}function Ks(e){return e.querySelector("input")}function ea(e,t){return ia(e,t)}function ta(e,t,i){const n=ia(e,t);if(n){const e=re();i.version===e.params.version&&i.basePath===ne()||(Fs(),n.stop(),pe(!1)),function(e){ie=e}(i)}return n}function ia(e,t){if(t&&e){ue(new File([t],`${e.ontology.name}-from-string.graphol`));cs()!==e&&pe(!1),us(e),d.appendChild(Ei),d.appendChild(Zo);const i=e.container.querySelector("#gscape-ui");return i.insertBefore(Ao,i.firstChild),i.insertBefore(d,i.firstChild),i.appendChild(Oi),i.appendChild(xi),i.appendChild($i),i.appendChild(Ai),i.appendChild(Ti),i.appendChild(Si),i.appendChild(ji),e.container.querySelector("#gscape-ui-bottom-container").appendChild(Hi),eo(e.actualEntityNameType,e.languages.selected),to(e.themesController.actualTheme),Us}return null}Js&&(Js.onchange=Ys,Js.addEventListener("focusout",Ys),Js.onsubmit=Ys),_i.onToggle=()=>{const e=Z(),t=new _(void 0,ne()),i=Pi.state;if(ee()){const t=new V(void 0,ne()),n=e.head[0];(null==n?void 0:n.id)&&ls(t.deleteHeadTerm(n.id,e,re())).then((e=>{As(e),Ws(i)}))}else ls(t.countStarQueryGraph(i,e,re())).then((e=>{As(e),Ws(!1)}))};export{ta as sparqling,ea as sparqlingStandalone};
