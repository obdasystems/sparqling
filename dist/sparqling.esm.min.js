/**
 * MIT License
 *
 * Copyright (c) 2022-2024 OBDA Systems
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

import{ui as e,TypesEnum as t,RendererStatesEnum as i,Iri as n,ColoursNames as o,Shape as r,util as s,EntityNameType as a,DefaultThemesEnum as l,toPNG as d,toSVG as c,loadConfig as p,GrapholRendererState as u,LifecycleEvent as h,incrementalGraphStyle as g}from"grapholscape";import v from"axios";import f from"cytoscape";import m from"cytoscape-cola";import y from"cytoscape-compound-drag-and-drop";import b from"cytoscape-klay";import x from"cytoscape-popper";import w from"cytoscape-automove";import E from"cytoscape-svg";function C(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}let O={};function $(e={}){O=e}function S(e){return e&&O?O[e]:O}function I(e){return!1!==O[e]}const T="http://localhost:7979/sparqling/1.0.0".replace(/\/+$/,"");class A{constructor(e,t=T,i=v){this.basePath=t,this.axios=i,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class P extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}const R="https://example.com",L=function(e,t,i){if(null==i)throw new P(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},j=function(e,...t){const i=new URLSearchParams(e.search);for(const e of t)for(const t in e)if(Array.isArray(e[t])){i.delete(t);for(const n of e[t])i.append(t,n)}else i.set(t,e[t]);e.search=i.toString()},H=function(e,t,i){const n="string"!=typeof e;return(n&&i&&i.isJsonMime?i.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},_=function(e){return e.pathname+e.search+e.hash},k=function(e,t,i,n){return(o=t,r=i)=>{const s=Object.assign(Object.assign({},e.options),{url:((null==n?void 0:n.basePath)||r)+e.url});return o.request(s)}},q={Class:"class",ObjectProperty:"objectProperty",InverseObjectProperty:"inverseObjectProperty",DataProperty:"dataProperty",Annotation:"annotation"},G={Equal:"=",NotEqual:"!=",LessThan:"<",GreaterThan:">",LessThanOrEqualTo:"<=",GreaterThanOrEqualTo:">=",In:"IN",NotIn:"NOT IN",Regex:"REGEX",Isblank:"ISBLANK",NotIsblank:"NOT ISBLANK"},D={Add:"ADD",Subctract:"SUBCTRACT",Multiply:"MULTIPLY",Divide:"DIVIDE",Substr:"SUBSTR",Ucase:"UCASE",Lcase:"LCASE",Contains:"CONTAINS",Concat:"CONCAT",Round:"ROUND",Ceil:"CEIL",Floor:"FLOOR",Year:"YEAR",Month:"MONTH",Day:"DAY",Hours:"HOURS",Minutes:"MINUTES",Seconds:"SECONDS",Strlen:"STRLEN",Strstarts:"STRSTARTS",Strends:"STRENDS",Strbefore:"STRBEFORE",Strafter:"STRAFTER"},M={Count:"count",Sum:"sum",Min:"min",Max:"max",Average:"average"},N="var",U="constant",V="iri",Q={String:"xsd:string",Decimal:"xsd:decimal",DateTime:"xsd:dateTime"},B=function(e){const t=function(e){return{highligths:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("highligths","clickedClassIRI",t);const o=new URL("/highlights",R);let r;e&&(r=e.baseOptions);const s=Object.assign(Object.assign({method:"GET"},r),n),a={};void 0!==t&&(a.clickedClassIRI=t),i&&(a.params=i),j(o,a);let l=r&&r.headers?r.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},{}),l),n.headers),{url:_(o),options:s}})),highligthsPaths:(t,i,n,o={})=>C(this,void 0,void 0,(function*(){L("highligthsPaths","lastSelectedIRI",t),L("highligthsPaths","clickedIRI",i);const r=new URL("/highlights/paths",R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};void 0!==t&&(l.lastSelectedIRI=t),void 0!==i&&(l.clickedIRI=i),void 0!==n&&(l.kShortest=n),j(r,l);let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},{}),d),o.headers),{url:_(r),options:a}}))}}(e);return{highligths(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.highligths(i,n,o);return k(r,v,T,e)}))},highligthsPaths(i,n,o,r){return C(this,void 0,void 0,(function*(){const s=yield t.highligthsPaths(i,n,o,r);return k(s,v,T,e)}))}}};class F extends A{highligths(e,t,i){return B(this.configuration).highligths(e,t,i).then((e=>e(this.axios,this.basePath)))}highligthsPaths(e,t,i,n){return B(this.configuration).highligthsPaths(e,t,i,n).then((e=>e(this.axios,this.basePath)))}}const z=function(e){const t=function(e){return{addPathToQueryGraph:(t,i,n,o={})=>C(this,void 0,void 0,(function*(){L("addPathToQueryGraph","graphElementId",t),L("addPathToQueryGraph","path",i),L("addPathToQueryGraph","queryGraph",n);const r="/queryGraph/path/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),s=new URL(r,R);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),o),d={},c={};void 0!==i&&(c.path=i),d["Content-Type"]="application/json",j(s,c);let p=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},d),p),o.headers),l.data=H(n,l,e),{url:_(s),options:l}})),deleteGraphElementId:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("deleteGraphElementId","graphElementId",t),L("deleteGraphElementId","queryGraph",i);const o="/queryGraph/node/delete/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),deleteGraphElementIdClass:(t,i,n,o={})=>C(this,void 0,void 0,(function*(){L("deleteGraphElementIdClass","graphElementId",t),L("deleteGraphElementIdClass","classIRI",i),L("deleteGraphElementIdClass","queryGraph",n);const r="/queryGraph/node/delete/{graphElementId}/class".replace("{graphElementId}",encodeURIComponent(String(t))),s=new URL(r,R);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),o),d={},c={};void 0!==i&&(c.classIRI=i),d["Content-Type"]="application/json",j(s,c);let p=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},d),p),o.headers),l.data=H(n,l,e),{url:_(s),options:l}})),getQueryGraph:(t,i={})=>C(this,void 0,void 0,(function*(){L("getQueryGraph","clickedClassIRI",t);const n=new URL("/queryGraph/node",R);let o;e&&(o=e.baseOptions);const r=Object.assign(Object.assign({method:"GET"},o),i),s={};void 0!==t&&(s.clickedClassIRI=t),j(n,s);let a=o&&o.headers?o.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},{}),a),i.headers),{url:_(n),options:r}})),putQueryGraphAnnotation:(t,i,n,o,r={})=>C(this,void 0,void 0,(function*(){L("putQueryGraphAnnotation","graphElementId",t),L("putQueryGraphAnnotation","sourceClassIRI",i),L("putQueryGraphAnnotation","predicateIRI",n),L("putQueryGraphAnnotation","queryGraph",o);const s="/queryGraph/node/annotation/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),a=new URL(s,R);let l;e&&(l=e.baseOptions);const d=Object.assign(Object.assign({method:"PUT"},l),r),c={},p={};void 0!==i&&(p.sourceClassIRI=i),void 0!==n&&(p.predicateIRI=n),c["Content-Type"]="application/json",j(a,p);let u=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),d.data=H(o,d,e),{url:_(a),options:d}})),putQueryGraphClass:(t,i,n,o,r={})=>C(this,void 0,void 0,(function*(){L("putQueryGraphClass","graphElementId",t),L("putQueryGraphClass","sourceClassIRI",i),L("putQueryGraphClass","targetClassIRI",n),L("putQueryGraphClass","queryGraph",o);const s="/queryGraph/node/class/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),a=new URL(s,R);let l;e&&(l=e.baseOptions);const d=Object.assign(Object.assign({method:"PUT"},l),r),c={},p={};void 0!==i&&(p.sourceClassIRI=i),void 0!==n&&(p.targetClassIRI=n),c["Content-Type"]="application/json",j(a,p);let u=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),d.data=H(o,d,e),{url:_(a),options:d}})),putQueryGraphDataProperty:(t,i,n,o,r={})=>C(this,void 0,void 0,(function*(){L("putQueryGraphDataProperty","graphElementId",t),L("putQueryGraphDataProperty","sourceClassIRI",i),L("putQueryGraphDataProperty","predicateIRI",n),L("putQueryGraphDataProperty","queryGraph",o);const s="/queryGraph/node/dataProperty/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),a=new URL(s,R);let l;e&&(l=e.baseOptions);const d=Object.assign(Object.assign({method:"PUT"},l),r),c={},p={};void 0!==i&&(p.sourceClassIRI=i),void 0!==n&&(p.predicateIRI=n),c["Content-Type"]="application/json",j(a,p);let u=l&&l.headers?l.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),u),r.headers),d.data=H(o,d,e),{url:_(a),options:d}})),putQueryGraphJoin:(t,i,n,o={})=>C(this,void 0,void 0,(function*(){L("putQueryGraphJoin","graphElementId1",t),L("putQueryGraphJoin","graphElementId2",i),L("putQueryGraphJoin","queryGraph",n);const r="/queryGraph/node/join/{graphElementId1}/{graphElementId2}".replace("{graphElementId1}",encodeURIComponent(String(t))).replace("{graphElementId2}",encodeURIComponent(String(i))),s=new URL(r,R);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),o),d={"Content-Type":"application/json"};j(s,{});let c=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},d),c),o.headers),l.data=H(n,l,e),{url:_(s),options:l}})),putQueryGraphObjectProperty:(t,i,n,o,r,s,a={})=>C(this,void 0,void 0,(function*(){L("putQueryGraphObjectProperty","graphElementId",t),L("putQueryGraphObjectProperty","sourceClassIRI",i),L("putQueryGraphObjectProperty","predicateIRI",n),L("putQueryGraphObjectProperty","targetClassIRI",o),L("putQueryGraphObjectProperty","isPredicateDirect",r),L("putQueryGraphObjectProperty","queryGraph",s);const l="/queryGraph/node/objectProperty/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),d=new URL(l,R);let c;e&&(c=e.baseOptions);const p=Object.assign(Object.assign({method:"PUT"},c),a),u={},h={};void 0!==i&&(h.sourceClassIRI=i),void 0!==n&&(h.predicateIRI=n),void 0!==o&&(h.targetClassIRI=o),void 0!==r&&(h.isPredicateDirect=r),u["Content-Type"]="application/json",j(d,h);let g=c&&c.headers?c.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},u),g),a.headers),p.data=H(s,p,e),{url:_(d),options:p}}))}}(e);return{addPathToQueryGraph(i,n,o,r){return C(this,void 0,void 0,(function*(){const s=yield t.addPathToQueryGraph(i,n,o,r);return k(s,v,T,e)}))},deleteGraphElementId(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.deleteGraphElementId(i,n,o);return k(r,v,T,e)}))},deleteGraphElementIdClass(i,n,o,r){return C(this,void 0,void 0,(function*(){const s=yield t.deleteGraphElementIdClass(i,n,o,r);return k(s,v,T,e)}))},getQueryGraph(i,n){return C(this,void 0,void 0,(function*(){const o=yield t.getQueryGraph(i,n);return k(o,v,T,e)}))},putQueryGraphAnnotation(i,n,o,r,s){return C(this,void 0,void 0,(function*(){const a=yield t.putQueryGraphAnnotation(i,n,o,r,s);return k(a,v,T,e)}))},putQueryGraphClass(i,n,o,r,s){return C(this,void 0,void 0,(function*(){const a=yield t.putQueryGraphClass(i,n,o,r,s);return k(a,v,T,e)}))},putQueryGraphDataProperty(i,n,o,r,s){return C(this,void 0,void 0,(function*(){const a=yield t.putQueryGraphDataProperty(i,n,o,r,s);return k(a,v,T,e)}))},putQueryGraphJoin(i,n,o,r){return C(this,void 0,void 0,(function*(){const s=yield t.putQueryGraphJoin(i,n,o,r);return k(s,v,T,e)}))},putQueryGraphObjectProperty(i,n,o,r,s,a,l){return C(this,void 0,void 0,(function*(){const d=yield t.putQueryGraphObjectProperty(i,n,o,r,s,a,l);return k(d,v,T,e)}))}}},Z=function(e,t,i){const n=z(e);return{addPathToQueryGraph:(e,o,r,s)=>n.addPathToQueryGraph(e,o,r,s).then((e=>e(i,t))),deleteGraphElementId:(e,o,r)=>n.deleteGraphElementId(e,o,r).then((e=>e(i,t))),deleteGraphElementIdClass:(e,o,r,s)=>n.deleteGraphElementIdClass(e,o,r,s).then((e=>e(i,t))),getQueryGraph:(e,o)=>n.getQueryGraph(e,o).then((e=>e(i,t))),putQueryGraphAnnotation:(e,o,r,s,a)=>n.putQueryGraphAnnotation(e,o,r,s,a).then((e=>e(i,t))),putQueryGraphClass:(e,o,r,s,a)=>n.putQueryGraphClass(e,o,r,s,a).then((e=>e(i,t))),putQueryGraphDataProperty:(e,o,r,s,a)=>n.putQueryGraphDataProperty(e,o,r,s,a).then((e=>e(i,t))),putQueryGraphJoin:(e,o,r,s)=>n.putQueryGraphJoin(e,o,r,s).then((e=>e(i,t))),putQueryGraphObjectProperty:(e,o,r,s,a,l,d)=>n.putQueryGraphObjectProperty(e,o,r,s,a,l,d).then((e=>e(i,t)))}};class W extends A{addPathToQueryGraph(e,t,i,n){return z(this.configuration).addPathToQueryGraph(e,t,i,n).then((e=>e(this.axios,this.basePath)))}deleteGraphElementId(e,t,i){return z(this.configuration).deleteGraphElementId(e,t,i).then((e=>e(this.axios,this.basePath)))}deleteGraphElementIdClass(e,t,i,n){return z(this.configuration).deleteGraphElementIdClass(e,t,i,n).then((e=>e(this.axios,this.basePath)))}getQueryGraph(e,t){return z(this.configuration).getQueryGraph(e,t).then((e=>e(this.axios,this.basePath)))}putQueryGraphAnnotation(e,t,i,n,o){return z(this.configuration).putQueryGraphAnnotation(e,t,i,n,o).then((e=>e(this.axios,this.basePath)))}putQueryGraphClass(e,t,i,n,o){return z(this.configuration).putQueryGraphClass(e,t,i,n,o).then((e=>e(this.axios,this.basePath)))}putQueryGraphDataProperty(e,t,i,n,o){return z(this.configuration).putQueryGraphDataProperty(e,t,i,n,o).then((e=>e(this.axios,this.basePath)))}putQueryGraphJoin(e,t,i,n){return z(this.configuration).putQueryGraphJoin(e,t,i,n).then((e=>e(this.axios,this.basePath)))}putQueryGraphObjectProperty(e,t,i,n,o,r,s){return z(this.configuration).putQueryGraphObjectProperty(e,t,i,n,o,r,s).then((e=>e(this.axios,this.basePath)))}}const J=function(e){const t=function(e){return{countStarQueryGraph:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("countStarQueryGraph","active",t),L("countStarQueryGraph","queryGraph",i);const o="/queryGraph/countStar/{active}".replace("{active}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),distinctQueryGraph:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("distinctQueryGraph","distinct",t),L("distinctQueryGraph","queryGraph",i);const o=new URL("/queryGraph/distinct",R);let r;e&&(r=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},r),n),a={},l={};void 0!==t&&(l.distinct=t),a["Content-Type"]="application/json",j(o,l);let d=r&&r.headers?r.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=H(i,s,e),{url:_(o),options:s}})),limitQueryGraph:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("limitQueryGraph","limit",t),L("limitQueryGraph","queryGraph",i);const o=new URL("/queryGraph/limit",R);let r;e&&(r=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},r),n),a={},l={};void 0!==t&&(l.limit=t),a["Content-Type"]="application/json",j(o,l);let d=r&&r.headers?r.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=H(i,s,e),{url:_(o),options:s}})),offsetQueryGraph:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("offsetQueryGraph","offset",t),L("offsetQueryGraph","queryGraph",i);const o=new URL("/queryGraph/offset",R);let r;e&&(r=e.baseOptions);const s=Object.assign(Object.assign({method:"PUT"},r),n),a={},l={};void 0!==t&&(l.offset=t),a["Content-Type"]="application/json",j(o,l);let d=r&&r.headers?r.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),d),n.headers),s.data=H(i,s,e),{url:_(o),options:s}}))}}(e);return{countStarQueryGraph(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.countStarQueryGraph(i,n,o);return k(r,v,T,e)}))},distinctQueryGraph(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.distinctQueryGraph(i,n,o);return k(r,v,T,e)}))},limitQueryGraph(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.limitQueryGraph(i,n,o);return k(r,v,T,e)}))},offsetQueryGraph(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.offsetQueryGraph(i,n,o);return k(r,v,T,e)}))}}};class Y extends A{countStarQueryGraph(e,t,i){return J(this.configuration).countStarQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}distinctQueryGraph(e,t,i){return J(this.configuration).distinctQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}limitQueryGraph(e,t,i){return J(this.configuration).limitQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}offsetQueryGraph(e,t,i){return J(this.configuration).offsetQueryGraph(e,t,i).then((e=>e(this.axios,this.basePath)))}}const X=function(e){const t=function(e){return{editFilter:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("editFilter","filterId",t),L("editFilter","queryGraph",i);const o="/queryGraph/node/filter/edit/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),newFilter:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("newFilter","filterId",t),L("newFilter","queryGraph",i);const o="/queryGraph/node/filter/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),removeAllFilters:(t,i={})=>C(this,void 0,void 0,(function*(){L("removeAllFilters","queryGraph",t);const n=new URL("/queryGraph/node/filter/remove/all",R);let o;e&&(o=e.baseOptions);const r=Object.assign(Object.assign({method:"PUT"},o),i),s={"Content-Type":"application/json"};j(n,{});let a=o&&o.headers?o.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),r.data=H(t,r,e),{url:_(n),options:r}})),removeFilter:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("removeFilter","filterId",t),L("removeFilter","queryGraph",i);const o="/queryGraph/node/filter/remove/{filterId}".replace("{filterId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}}))}}(e);return{editFilter(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.editFilter(i,n,o);return k(r,v,T,e)}))},newFilter(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.newFilter(i,n,o);return k(r,v,T,e)}))},removeAllFilters(i,n){return C(this,void 0,void 0,(function*(){const o=yield t.removeAllFilters(i,n);return k(o,v,T,e)}))},removeFilter(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.removeFilter(i,n,o);return k(r,v,T,e)}))}}};class K extends A{editFilter(e,t,i){return X(this.configuration).editFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}newFilter(e,t,i){return X(this.configuration).newFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}removeAllFilters(e,t){return X(this.configuration).removeAllFilters(e,t).then((e=>e(this.axios,this.basePath)))}removeFilter(e,t,i){return X(this.configuration).removeFilter(e,t,i).then((e=>e(this.axios,this.basePath)))}}const ee=function(e){const t=function(e){return{addHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("addHeadTerm","graphElementId",t),L("addHeadTerm","queryGraph",i);const o="/queryGraph/head/add/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),aggregationHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("aggregationHeadTerm","headTerm",t),L("aggregationHeadTerm","queryGraph",i);const o="/queryGraph/head/aggregation/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),deleteHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("deleteHeadTerm","headTerm",t),L("deleteHeadTerm","queryGraph",i);const o="/queryGraph/head/delete/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),functionHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("functionHeadTerm","headTerm",t),L("functionHeadTerm","queryGraph",i);const o="/queryGraph/head/function/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),orderByHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("orderByHeadTerm","headTerm",t),L("orderByHeadTerm","queryGraph",i);const o="/queryGraph/head/orderBy/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),renameHeadTerm:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("renameHeadTerm","headTerm",t),L("renameHeadTerm","queryGraph",i);const o="/queryGraph/head/rename/{headTerm}".replace("{headTerm}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),reorderHeadTerms:(t,i={})=>C(this,void 0,void 0,(function*(){L("reorderHeadTerms","queryGraph",t);const n=new URL("/queryGraph/head/reorderHeadTerms",R);let o;e&&(o=e.baseOptions);const r=Object.assign(Object.assign({method:"PUT"},o),i),s={"Content-Type":"application/json"};j(n,{});let a=o&&o.headers?o.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),r.data=H(t,r,e),{url:_(n),options:r}}))}}(e);return{addHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.addHeadTerm(i,n,o);return k(r,v,T,e)}))},aggregationHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.aggregationHeadTerm(i,n,o);return k(r,v,T,e)}))},deleteHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.deleteHeadTerm(i,n,o);return k(r,v,T,e)}))},functionHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.functionHeadTerm(i,n,o);return k(r,v,T,e)}))},orderByHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.orderByHeadTerm(i,n,o);return k(r,v,T,e)}))},renameHeadTerm(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.renameHeadTerm(i,n,o);return k(r,v,T,e)}))},reorderHeadTerms(i,n){return C(this,void 0,void 0,(function*(){const o=yield t.reorderHeadTerms(i,n);return k(o,v,T,e)}))}}},te=function(e,t,i){const n=ee(e);return{addHeadTerm:(e,o,r)=>n.addHeadTerm(e,o,r).then((e=>e(i,t))),aggregationHeadTerm:(e,o,r)=>n.aggregationHeadTerm(e,o,r).then((e=>e(i,t))),deleteHeadTerm:(e,o,r)=>n.deleteHeadTerm(e,o,r).then((e=>e(i,t))),functionHeadTerm:(e,o,r)=>n.functionHeadTerm(e,o,r).then((e=>e(i,t))),orderByHeadTerm:(e,o,r)=>n.orderByHeadTerm(e,o,r).then((e=>e(i,t))),renameHeadTerm:(e,o,r)=>n.renameHeadTerm(e,o,r).then((e=>e(i,t))),reorderHeadTerms:(e,o)=>n.reorderHeadTerms(e,o).then((e=>e(i,t)))}};class ie extends A{addHeadTerm(e,t,i){return ee(this.configuration).addHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}aggregationHeadTerm(e,t,i){return ee(this.configuration).aggregationHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}deleteHeadTerm(e,t,i){return ee(this.configuration).deleteHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}functionHeadTerm(e,t,i){return ee(this.configuration).functionHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}orderByHeadTerm(e,t,i){return ee(this.configuration).orderByHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}renameHeadTerm(e,t,i){return ee(this.configuration).renameHeadTerm(e,t,i).then((e=>e(this.axios,this.basePath)))}reorderHeadTerms(e,t){return ee(this.configuration).reorderHeadTerms(e,t).then((e=>e(this.axios,this.basePath)))}}const ne=function(e){const t=function(e){return{newOptionalGraphElementId:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("newOptionalGraphElementId","graphElementId",t),L("newOptionalGraphElementId","queryGraph",i);const o="/queryGraph/node/optional/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}})),removeAllOptional:(t,i={})=>C(this,void 0,void 0,(function*(){L("removeAllOptional","queryGraph",t);const n=new URL("/queryGraph/node/optional/remove/all",R);let o;e&&(o=e.baseOptions);const r=Object.assign(Object.assign({method:"PUT"},o),i),s={"Content-Type":"application/json"};j(n,{});let a=o&&o.headers?o.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),r.data=H(t,r,e),{url:_(n),options:r}})),removeOptionalGraphElementId:(t,i,n={})=>C(this,void 0,void 0,(function*(){L("removeOptionalGraphElementId","graphElementId",t),L("removeOptionalGraphElementId","queryGraph",i);const o="/queryGraph/node/optional/remove/{graphElementId}".replace("{graphElementId}",encodeURIComponent(String(t))),r=new URL(o,R);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"PUT"},s),n),l={"Content-Type":"application/json"};j(r,{});let d=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),d),n.headers),a.data=H(i,a,e),{url:_(r),options:a}}))}}(e);return{newOptionalGraphElementId(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.newOptionalGraphElementId(i,n,o);return k(r,v,T,e)}))},removeAllOptional(i,n){return C(this,void 0,void 0,(function*(){const o=yield t.removeAllOptional(i,n);return k(o,v,T,e)}))},removeOptionalGraphElementId(i,n,o){return C(this,void 0,void 0,(function*(){const r=yield t.removeOptionalGraphElementId(i,n,o);return k(r,v,T,e)}))}}},oe=function(e,t,i){const n=ne(e);return{newOptionalGraphElementId:(e,o,r)=>n.newOptionalGraphElementId(e,o,r).then((e=>e(i,t))),removeAllOptional:(e,o)=>n.removeAllOptional(e,o).then((e=>e(i,t))),removeOptionalGraphElementId:(e,o,r)=>n.removeOptionalGraphElementId(e,o,r).then((e=>e(i,t)))}},re=function(e){const t=function(e){return{standaloneOntologyGrapholGet:(t={})=>C(this,void 0,void 0,(function*(){const i=new URL("/standalone/ontology/graphol",R);let n;e&&(n=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},n),t);j(i,{});let r=n&&n.headers?n.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},{}),r),t.headers),{url:_(i),options:o}})),standaloneOntologyUploadPost:(t,i={})=>C(this,void 0,void 0,(function*(){const n=new URL("/standalone/ontology/upload",R);let o;e&&(o=e.baseOptions);const r=Object.assign(Object.assign({method:"POST"},o),i),s={},a=new(e&&e.formDataCtor||FormData);void 0!==t&&a.append("file",t),s["Content-Type"]="multipart/form-data",j(n,{});let l=o&&o.headers?o.headers:{};return r.headers=Object.assign(Object.assign(Object.assign({},s),l),i.headers),r.data=a,{url:_(n),options:r}}))}}(e);return{standaloneOntologyGrapholGet(i){return C(this,void 0,void 0,(function*(){const n=yield t.standaloneOntologyGrapholGet(i);return k(n,v,T,e)}))},standaloneOntologyUploadPost(i,n){return C(this,void 0,void 0,(function*(){const o=yield t.standaloneOntologyUploadPost(i,n);return k(o,v,T,e)}))}}};class se extends A{standaloneOntologyGrapholGet(e){return re(this.configuration).standaloneOntologyGrapholGet(e).then((e=>e(this.axios,this.basePath)))}standaloneOntologyUploadPost(e,t){return re(this.configuration).standaloneOntologyUploadPost(e,t).then((e=>e(this.axios,this.basePath)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ae=window,le=ae.ShadowRoot&&(void 0===ae.ShadyCSS||ae.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,de=Symbol(),ce=new WeakMap;class pe{constructor(e,t,i){if(this._$cssResult$=!0,i!==de)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(le&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=ce.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&ce.set(t,e))}return e}toString(){return this.cssText}}const ue=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[n+1]),e[0]);return new pe(i,e,de)},he=le?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new pe("string"==typeof e?e:e+"",void 0,de))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var ge;const ve=window,fe=ve.trustedTypes,me=fe?fe.emptyScript:"",ye=ve.reactiveElementPolyfillSupport,be={toAttribute(e,t){switch(t){case Boolean:e=e?me:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},xe=(e,t)=>t!==e&&(t==t||e==e),we={attribute:!0,type:String,converter:be,reflect:!1,hasChanged:xe},Ee="finalized";class Ce extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,i)=>{const n=this._$Ep(i,t);void 0!==n&&(this._$Ev.set(n,i),e.push(n))})),e}static createProperty(e,t=we){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i="symbol"==typeof e?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);void 0!==n&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const o=this[e];this[t]=n,this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||we}static finalize(){if(this.hasOwnProperty(Ee))return!1;this[Ee]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const i of t)this.createProperty(i,e[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(he(e))}else void 0!==e&&t.push(he(e));return t}static _$Ep(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,i;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(i=e.hostConnected)||void 0===i||i.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{le?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const i=document.createElement("style"),n=ae.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=t.cssText,e.appendChild(i)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=we){var n;const o=this.constructor._$Ep(e,i);if(void 0!==o&&!0===i.reflect){const r=(void 0!==(null===(n=i.converter)||void 0===n?void 0:n.toAttribute)?i.converter:be).toAttribute(t,i.type);this._$El=e,null==r?this.removeAttribute(o):this.setAttribute(o,r),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,o=n._$Ev.get(e);if(void 0!==o&&this._$El!==o){const e=n.getPropertyOptions(o),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(i=e.converter)||void 0===i?void 0:i.fromAttribute)?e.converter:be;this._$El=o,this[o]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;void 0!==e&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||xe)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(i)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Oe;Ce[Ee]=!0,Ce.elementProperties=new Map,Ce.elementStyles=[],Ce.shadowRootOptions={mode:"open"},null==ye||ye({ReactiveElement:Ce}),(null!==(ge=ve.reactiveElementVersions)&&void 0!==ge?ge:ve.reactiveElementVersions=[]).push("1.6.3");const $e=window,Se=$e.trustedTypes,Ie=Se?Se.createPolicy("lit-html",{createHTML:e=>e}):void 0,Te=`lit$${(Math.random()+"").slice(9)}$`,Ae="?"+Te,Pe=`<${Ae}>`,Re=document,Le=()=>Re.createComment(""),je=e=>null===e||"object"!=typeof e&&"function"!=typeof e,He=Array.isArray,_e="[ \t\n\f\r]",ke=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,qe=/-->/g,Ge=/>/g,De=RegExp(`>|${_e}(?:([^\\s"'>=/]+)(${_e}*=${_e}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Me=/'/g,Ne=/"/g,Ue=/^(?:script|style|textarea|title)$/i,Ve=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),Qe=Ve(1),Be=Ve(2),Fe=Symbol.for("lit-noChange"),ze=Symbol.for("lit-nothing"),Ze=new WeakMap,We=Re.createTreeWalker(Re,129,null,!1);function Je(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Ie?Ie.createHTML(t):t}const Ye=(e,t)=>{const i=e.length-1,n=[];let o,r=2===t?"<svg>":"",s=ke;for(let t=0;t<i;t++){const i=e[t];let a,l,d=-1,c=0;for(;c<i.length&&(s.lastIndex=c,l=s.exec(i),null!==l);)c=s.lastIndex,s===ke?"!--"===l[1]?s=qe:void 0!==l[1]?s=Ge:void 0!==l[2]?(Ue.test(l[2])&&(o=RegExp("</"+l[2],"g")),s=De):void 0!==l[3]&&(s=De):s===De?">"===l[0]?(s=null!=o?o:ke,d=-1):void 0===l[1]?d=-2:(d=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?De:'"'===l[3]?Ne:Me):s===Ne||s===Me?s=De:s===qe||s===Ge?s=ke:(s=De,o=void 0);const p=s===De&&e[t+1].startsWith("/>")?" ":"";r+=s===ke?i+Pe:d>=0?(n.push(a),i.slice(0,d)+"$lit$"+i.slice(d)+Te+p):i+Te+(-2===d?(n.push(void 0),t):p)}return[Je(e,r+(e[i]||"<?>")+(2===t?"</svg>":"")),n]};class Xe{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let o=0,r=0;const s=e.length-1,a=this.parts,[l,d]=Ye(e,t);if(this.el=Xe.createElement(l,i),We.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(n=We.nextNode())&&a.length<s;){if(1===n.nodeType){if(n.hasAttributes()){const e=[];for(const t of n.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(Te)){const i=d[r++];if(e.push(t),void 0!==i){const e=n.getAttribute(i.toLowerCase()+"$lit$").split(Te),t=/([.?@])?(.*)/.exec(i);a.push({type:1,index:o,name:t[2],strings:e,ctor:"."===t[1]?nt:"?"===t[1]?rt:"@"===t[1]?st:it})}else a.push({type:6,index:o})}for(const t of e)n.removeAttribute(t)}if(Ue.test(n.tagName)){const e=n.textContent.split(Te),t=e.length-1;if(t>0){n.textContent=Se?Se.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],Le()),We.nextNode(),a.push({type:2,index:++o});n.append(e[t],Le())}}}else if(8===n.nodeType)if(n.data===Ae)a.push({type:2,index:o});else{let e=-1;for(;-1!==(e=n.data.indexOf(Te,e+1));)a.push({type:7,index:o}),e+=Te.length-1}o++}}static createElement(e,t){const i=Re.createElement("template");return i.innerHTML=e,i}}function Ke(e,t,i=e,n){var o,r,s,a;if(t===Fe)return t;let l=void 0!==n?null===(o=i._$Co)||void 0===o?void 0:o[n]:i._$Cl;const d=je(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==d&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===d?l=void 0:(l=new d(e),l._$AT(e,i,n)),void 0!==n?(null!==(s=(a=i)._$Co)&&void 0!==s?s:a._$Co=[])[n]=l:i._$Cl=l),void 0!==l&&(t=Ke(e,l._$AS(e,t.values),l,n)),t}class et{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:i},parts:n}=this._$AD,o=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Re).importNode(i,!0);We.currentNode=o;let r=We.nextNode(),s=0,a=0,l=n[0];for(;void 0!==l;){if(s===l.index){let t;2===l.type?t=new tt(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new at(r,this,e)),this._$AV.push(t),l=n[++a]}s!==(null==l?void 0:l.index)&&(r=We.nextNode(),s++)}return We.currentNode=Re,o}v(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class tt{constructor(e,t,i,n){var o;this.type=2,this._$AH=ze,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cp=null===(o=null==n?void 0:n.isConnected)||void 0===o||o}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Ke(this,e,t),je(e)?e===ze||null==e||""===e?(this._$AH!==ze&&this._$AR(),this._$AH=ze):e!==this._$AH&&e!==Fe&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>He(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==ze&&je(this._$AH)?this._$AA.nextSibling.data=e:this.$(Re.createTextNode(e)),this._$AH=e}g(e){var t;const{values:i,_$litType$:n}=e,o="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=Xe.createElement(Je(n.h,n.h[0]),this.options)),n);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===o)this._$AH.v(i);else{const e=new et(o,this),t=e.u(this.options);e.v(i),this.$(t),this._$AH=e}}_$AC(e){let t=Ze.get(e.strings);return void 0===t&&Ze.set(e.strings,t=new Xe(e)),t}T(e){He(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const o of e)n===t.length?t.push(i=new tt(this.k(Le()),this.k(Le()),this,this.options)):i=t[n],i._$AI(o),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class it{constructor(e,t,i,n,o){this.type=1,this._$AH=ze,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=o,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ze}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const o=this.strings;let r=!1;if(void 0===o)e=Ke(this,e,t,0),r=!je(e)||e!==this._$AH&&e!==Fe,r&&(this._$AH=e);else{const n=e;let s,a;for(e=o[0],s=0;s<o.length-1;s++)a=Ke(this,n[i+s],t,s),a===Fe&&(a=this._$AH[s]),r||(r=!je(a)||a!==this._$AH[s]),a===ze?e=ze:e!==ze&&(e+=(null!=a?a:"")+o[s+1]),this._$AH[s]=a}r&&!n&&this.j(e)}j(e){e===ze?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class nt extends it{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ze?void 0:e}}const ot=Se?Se.emptyScript:"";class rt extends it{constructor(){super(...arguments),this.type=4}j(e){e&&e!==ze?this.element.setAttribute(this.name,ot):this.element.removeAttribute(this.name)}}class st extends it{constructor(e,t,i,n,o){super(e,t,i,n,o),this.type=5}_$AI(e,t=this){var i;if((e=null!==(i=Ke(this,e,t,0))&&void 0!==i?i:ze)===Fe)return;const n=this._$AH,o=e===ze&&n!==ze||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==ze&&(n===ze||o);o&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==i?i:this.element,e):this._$AH.handleEvent(e)}}class at{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ke(this,e)}}const lt=$e.litHtmlPolyfillSupport;null==lt||lt(Xe,tt),(null!==(Oe=$e.litHtmlVersions)&&void 0!==Oe?Oe:$e.litHtmlVersions=[]).push("2.8.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var dt,ct;class pt extends Ce{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,i)=>{var n,o;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:t;let s=r._$litPart$;if(void 0===s){const e=null!==(o=null==i?void 0:i.renderBefore)&&void 0!==o?o:null;r._$litPart$=s=new tt(t.insertBefore(Le(),e),e,void 0,null!=i?i:{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return Fe}}pt.finalized=!0,pt._$litElement$=!0,null===(dt=globalThis.litElementHydrateSupport)||void 0===dt||dt.call(globalThis,{LitElement:pt});const ut=globalThis.litElementPolyfillSupport;null==ut||ut({LitElement:pt}),(null!==(ct=globalThis.litElementVersions)&&void 0!==ct?ct:globalThis.litElementVersions=[]).push("3.3.3");const ht=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M6.5 17q-.625 0-1.062-.438Q5 16.125 5 15.5v-10H4V4h4V3h4v1h4v1.5h-1v10q0 .625-.438 1.062Q14.125 17 13.5 17Zm7-11.5h-7v10h7ZM8 14h1.5V7H8Zm2.5 0H12V7h-1.5Zm-4-8.5v10Z"/></svg>`,gt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M12 16v-1.5h1.75q.312 0 .531-.219.219-.219.219-.531v-1.5q0-.854.573-1.469.573-.614 1.427-.719v-.083q-.854-.167-1.427-.771-.573-.604-.573-1.458v-1.5q0-.312-.219-.531-.219-.219-.531-.219H12V4h1.75q.938 0 1.594.656Q16 5.312 16 6.25v1.5q0 .312.219.531.219.219.531.219H18v3h-1.25q-.312 0-.531.219-.219.219-.219.531v1.5q0 .938-.656 1.594-.656.656-1.594.656Zm-5.75 0q-.938 0-1.594-.656Q4 14.688 4 13.75v-1.5q0-.312-.219-.531-.219-.219-.531-.219H2v-3h1.25q.312 0 .531-.219Q4 8.062 4 7.75v-1.5q0-.938.656-1.594Q5.312 4 6.25 4H8v1.5H6.25q-.312 0-.531.219-.219.219-.219.531v1.5q0 .875-.573 1.49-.573.614-1.427.718v.084q.854.083 1.427.708.573.625.573 1.5v1.5q0 .312.219.531.219.219.531.219H8V16Z"/></svg>`,vt=Be`<svg fill="currentColor" viewBox="0 0 24 24" style="height: 20px; width: 20px; padding:2px; box-sizing: border-box"><path d="M17 16.88C17.56 16.88 18 17.32 18 17.88S17.56 18.88 17 18.88 16 18.43 16 17.88 16.44 16.88 17 16.88M17 13.88C19.73 13.88 22.06 15.54 23 17.88C22.06 20.22 19.73 21.88 17 21.88S11.94 20.22 11 17.88C11.94 15.54 14.27 13.88 17 13.88M17 15.38C15.62 15.38 14.5 16.5 14.5 17.88S15.62 20.38 17 20.38 19.5 19.26 19.5 17.88 18.38 15.38 17 15.38M18 3H4C2.9 3 2 3.9 2 5V17C2 18.1 2.9 19 4 19H9.42C9.26 18.68 9.12 18.34 9 18C9.12 17.66 9.26 17.32 9.42 17H4V13H10V15.97C10.55 15.11 11.23 14.37 12 13.76V13H13.15C14.31 12.36 15.62 12 17 12C18.06 12 19.07 12.21 20 12.59V5C20 3.9 19.1 3 18 3M10 11H4V7H10V11M18 11H12V7H18V11Z" /></svg>`,ft=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M11,3H13V10.27L19.29,6.64L20.29,8.37L14,12L20.3,15.64L19.3,17.37L13,13.72V21H11V13.73L4.69,17.36L3.69,15.63L10,12L3.72,8.36L4.72,6.63L11,10.26V3Z" /></svg>`,mt=Be`<svg viewBox="0 0 943 1019" style="fill: currentColor; display: inline-block; height: 20px; width: 20px; padding:2px; box-sizing: border-box"><path fill-rule="evenodd" d="M845,668c-6-3-13-6-19-9l5-0c0,0-42-18-45-152 c-4-133,40-156,40-156l-0,0c33-17,61-43,79-78c48-91,14-203-77-252 C729-26,617,8,569,99c-20,37-25,78-19,117l-2-3c0,0,11,48-103,119 c-113,71-165,35-165,35l3,5c-3-2-6-4-10-6C183,317,70,352,22,443 c-48,91-14,203,77,252c68,36,147,26,204-19l-1,2c0,0,41-34,160,30 c94,50,108,100,110,118c-2,69,33,137,98,171c91,48,203,14,252-77 C970,829,935,717,845,668z M635,693c-15,5-58,11-148-37 c-98-53-113-97-115-110c1-16,1-32-2-48l1,1c0,0-8-43,104-112 c100-62,146-50,154-47c5,4,11,7,17,10c11,6,23,11,35,14 c14,13,39,50,42,149c3,99-26,137-42,150C664,671,648,681,635,693z   M622,81c-54,59-55,146-3,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C765,12,677,21,622,81z   M78,431c-54,59-55,146-03,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C221,363,133,371,78,431z   M654,728c-54,59-55,146-3,196c-26-25-25-77,1-126 c3-4,13-15,27-10c1,0,2,1,3,1c3,1,7,1,10,1 c22-1,38-19,37-41c-0-10-4-18-11-25c50-33,107-37,131-15l1,0 C797,659,709,668,654,728z"></path></svg>`,yt=Be`<svg fill="currentcolor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M9.333 18.5v-1.458q-2.541-.271-4.323-2.052-1.781-1.782-2.052-4.323H1.5V9.333h1.458Q3.229 6.792 5.01 5.01q1.782-1.781 4.323-2.052V1.5h1.334v1.458q2.541.271 4.323 2.052 1.781 1.782 2.052 4.323H18.5v1.334h-1.458q-.271 2.541-2.052 4.323-1.782 1.781-4.323 2.052V18.5ZM10 15.729q2.396 0 4.062-1.667 1.667-1.666 1.667-4.062 0-2.396-1.667-4.062Q12.396 4.271 10 4.271q-2.396 0-4.062 1.667Q4.271 7.604 4.271 10q0 2.396 1.667 4.062Q7.604 15.729 10 15.729Zm0-2.75q-1.229 0-2.104-.875T7.021 10q0-1.229.875-2.104T10 7.021q1.229 0 2.104.875T12.979 10q0 1.229-.875 2.104T10 12.979Zm0-1.333q.667 0 1.156-.49.49-.489.49-1.156 0-.667-.49-1.156-.489-.49-1.156-.49-.667 0-1.156.49-.49.489-.49 1.156 0 .667.49 1.156.489.49 1.156.49Zm.021-1.667Z"/></svg>`,bt=Be`<svg fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" height="20" width="20" style="padding:1px; box-sizing:border-box"><path d="m18.292 8.375-.521-1.187-1.188-.521 1.188-.542.521-1.167.541 1.167L20 6.667l-1.167.521Zm-2.459-3.292-.812-1.729-1.729-.812 1.729-.813L15.833 0l.813 1.729 1.729.813-1.729.812ZM7.5 18.333q-.688 0-1.177-.489-.49-.49-.49-1.177h3.313q0 .687-.479 1.177-.479.489-1.167.489Zm-3.333-2.416v-1.75h6.645v1.75Zm.229-2.5q-1.458-.855-2.302-2.302-.844-1.448-.844-3.157 0-2.646 1.802-4.468Q4.854 1.667 7.5 1.667q2.604 0 4.417 1.823 1.812 1.822 1.812 4.468 0 1.709-.844 3.157-.843 1.447-2.302 2.302Zm.542-1.75h5.124Q11 11 11.49 10.042q.489-.959.489-2.084 0-1.896-1.291-3.218Q9.396 3.417 7.5 3.417q-1.896 0-3.198 1.323Q3 6.062 3 7.958q0 1.125.5 2.084.5.958 1.438 1.625Zm2.562 0Z"/></svg>`,xt=Be`<svg  fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px" style="padding: 1px; box-sizing:border-box"><path d="M12 12V19.88C12.04 20.18 11.94 20.5 11.71 20.71C11.32 21.1 10.69 21.1 10.3 20.71L8.29 18.7C8.06 18.47 7.96 18.16 8 17.87V12H7.97L2.21 4.62C1.87 4.19 1.95 3.56 2.38 3.22C2.57 3.08 2.78 3 3 3H17C17.22 3 17.43 3.08 17.62 3.22C18.05 3.56 18.13 4.19 17.79 4.62L12.03 12H12M15 17H18V14H20V17H23V19H20V22H18V19H15V17Z" /></svg>`,wt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>`,Et=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M2,6V8H14V6H2M2,10V12H14V10H2M20.04,10.13C19.9,10.13 19.76,10.19 19.65,10.3L18.65,11.3L20.7,13.35L21.7,12.35C21.92,12.14 21.92,11.79 21.7,11.58L20.42,10.3C20.31,10.19 20.18,10.13 20.04,10.13M18.07,11.88L12,17.94V20H14.06L20.12,13.93L18.07,11.88M2,14V16H10V14H2Z" /></svg>`,Ct=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z" /></svg>`,Ot=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M11,2A2,2 0 0,1 13,4V20A2,2 0 0,1 11,22H2V2H11M4,10V14H11V10H4M4,16V20H11V16H4M4,4V8H11V4H4M15,11H18V8H20V11H23V13H20V16H18V13H15V11Z" /></svg>`,$t=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M13 2.03V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03M11 2.06C9.05 2.25 7.19 3 5.67 4.26L7.1 5.74C8.22 4.84 9.57 4.26 11 4.06V2.06M4.26 5.67C3 7.19 2.25 9.04 2.05 11H4.05C4.24 9.58 4.8 8.23 5.69 7.1L4.26 5.67M2.06 13C2.26 14.96 3.03 16.81 4.27 18.33L5.69 16.9C4.81 15.77 4.24 14.42 4.06 13H2.06M7.1 18.37L5.67 19.74C7.18 21 9.04 21.79 11 22V20C9.58 19.82 8.23 19.25 7.1 18.37M20 4H44M13 18H11V16H13V18M13 15H11C11 11.75 14 12 14 10C14 8.9 13.1 8 12 8S10 8.9 10 10H8C8 7.79 9.79 6 12 6S16 7.79 16 10C16 12.5 13 12.75 13 15Z" /></svg>`,St=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px" style="padding: 1px; box-sizing:border-box"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>`,It=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z" /></svg>`,Tt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" /></svg>`,At=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M7.5 15.688q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Zm5 0q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Zm-5-4.5q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Zm5 0q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Zm-5-4.5q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Zm5 0q-.5 0-.844-.355-.344-.354-.344-.833 0-.5.355-.844.354-.344.833-.344.5 0 .844.355.344.354.344.833 0 .5-.355.844-.354.344-.833.344Z"/></svg>`,Pt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M15.6,5.29C14.5,5.19 13.53,6 13.43,7.11L13.18,10H16V12H13L12.56,17.07C12.37,19.27 10.43,20.9 8.23,20.7C6.92,20.59 5.82,19.86 5.17,18.83L6.67,17.33C6.91,18.07 7.57,18.64 8.4,18.71C9.5,18.81 10.47,18 10.57,16.89L11,12H8V10H11.17L11.44,6.93C11.63,4.73 13.57,3.1 15.77,3.3C17.08,3.41 18.18,4.14 18.83,5.17L17.33,6.67C17.09,5.93 16.43,5.36 15.6,5.29Z" /></svg>`,Rt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M9.25,5L12.5,1.75L15.75,5H9.25M15.75,19L12.5,22.25L9.25,19H15.75M8.89,14.3H6L5.28,17H2.91L6,7H9L12.13,17H9.67L8.89,14.3M6.33,12.68H8.56L7.93,10.56L7.67,9.59L7.42,8.63H7.39L7.17,9.6L6.93,10.58L6.33,12.68M13.05,17V15.74L17.8,8.97V8.91H13.5V7H20.73V8.34L16.09,15V15.08H20.8V17H13.05Z" /></svg>`,Lt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M19 17H22L18 21L14 17H17V3H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z" /></svg>`,jt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M19 7H22L18 3L14 7H17V21H19M11 13V15L7.67 19H11V21H5V19L8.33 15H5V13M9 3H7C5.9 3 5 3.9 5 5V11H7V9H9V11H11V5C11 3.9 10.11 3 9 3M9 7H7V5H9Z" /></svg>`,Ht=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M18,6H8.83L14.83,12L8.83,18H18V20H6V18L12,12L6,6V4H18V6Z" /></svg>`,_t=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M10,9A1,1 0 0,1 11,8A1,1 0 0,1 12,9V13.47L13.21,13.6L18.15,15.79C18.68,16.03 19,16.56 19,17.14V21.5C18.97,22.32 18.32,22.97 17.5,23H11C10.62,23 10.26,22.85 10,22.57L5.1,18.37L5.84,17.6C6.03,17.39 6.3,17.28 6.58,17.28H6.8L10,19V9M11,5A4,4 0 0,1 15,9C15,10.5 14.2,11.77 13,12.46V11.24C13.61,10.69 14,9.89 14,9A3,3 0 0,0 11,6A3,3 0 0,0 8,9C8,9.89 8.39,10.69 9,11.24V12.46C7.8,11.77 7,10.5 7,9A4,4 0 0,1 11,5M11,3A6,6 0 0,1 17,9C17,10.7 16.29,12.23 15.16,13.33L14.16,12.88C15.28,11.96 16,10.56 16,9A5,5 0 0,0 11,4A5,5 0 0,0 6,9C6,11.05 7.23,12.81 9,13.58V14.66C6.67,13.83 5,11.61 5,9A6,6 0 0,1 11,3Z" /></svg>`,kt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M4,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M4,6V18H11V6H4M20,18V6H18.76C19,6.54 18.95,7.07 18.95,7.13C18.88,7.8 18.41,8.5 18.24,8.75L15.91,11.3L19.23,11.28L19.24,12.5L14.04,12.47L14,11.47C14,11.47 17.05,8.24 17.2,7.95C17.34,7.67 17.91,6 16.5,6C15.27,6.05 15.41,7.3 15.41,7.3L13.87,7.31C13.87,7.31 13.88,6.65 14.25,6H13V18H15.58L15.57,17.14L16.54,17.13C16.54,17.13 17.45,16.97 17.46,16.08C17.5,15.08 16.65,15.08 16.5,15.08C16.37,15.08 15.43,15.13 15.43,15.95H13.91C13.91,15.95 13.95,13.89 16.5,13.89C19.1,13.89 18.96,15.91 18.96,15.91C18.96,15.91 19,17.16 17.85,17.63L18.37,18H20M8.92,16H7.42V10.2L5.62,10.76V9.53L8.76,8.41H8.92V16Z" /></svg>`,qt=Be`<svg fill="currentColor" viewBox="0 0 24 24" height="20px" width="20px"><path d="M13 2.03V4.05C17.39 4.59 20.5 8.58 19.96 12.97C19.5 16.61 16.64 19.5 13 19.93V21.93C18.5 21.38 22.5 16.5 21.95 11C21.5 6.25 17.73 2.5 13 2.03M11 2.06C9.05 2.25 7.19 3 5.67 4.26L7.1 5.74C8.22 4.84 9.57 4.26 11 4.06V2.06M4.26 5.67C3 7.19 2.25 9.04 2.05 11H4.05C4.24 9.58 4.8 8.23 5.69 7.1L4.26 5.67M2.06 13C2.26 14.96 3.03 16.81 4.27 18.33L5.69 16.9C4.81 15.77 4.24 14.42 4.06 13H2.06M7.1 18.37L5.67 19.74C7.18 21 9.04 21.79 11 22V20C9.58 19.82 8.23 19.25 7.1 18.37M14.59 8L12 10.59L9.41 8L8 9.41L10.59 12L8 14.59L9.41 16L12 13.41L14.59 16L16 14.59L13.41 12L16 9.41L14.59 8Z" /></svg>`,Gt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M5.688 11.083q-.459 0-.771-.323-.313-.322-.313-.76 0-.458.323-.771.323-.312.761-.312.458 0 .77.323.313.322.313.76 0 .458-.313.771-.312.312-.77.312Zm4.312 0q-.458 0-.771-.323-.312-.322-.312-.76 0-.458.323-.771.322-.312.76-.312.458 0 .771.323.312.322.312.76 0 .458-.323.771-.322.312-.76.312Zm4.312 0q-.458 0-.77-.323-.313-.322-.313-.76 0-.458.313-.771.312-.312.77-.312.459 0 .771.323.313.322.313.76 0 .458-.323.771-.323.312-.761.312Z"/></svg>`,Dt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="m10 12.792-4.708-4.73.77-.77L10 11.229l3.938-3.937.77.77Z"/></svg>`,Mt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="m6.062 12.729-.77-.791L10 7.229l4.708 4.709-.77.791L10 8.792Z"/></svg>`,Nt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M10 13.771q.25 0 .417-.167.166-.166.166-.416 0-.25-.166-.417-.167-.167-.417-.167-.25 0-.417.167-.166.167-.166.417 0 .25.166.416.167.167.417.167Zm-.542-2.709h1.084v-5H9.458ZM10 17.583q-1.562 0-2.948-.593-1.385-.594-2.417-1.625-1.031-1.032-1.625-2.417-.593-1.386-.593-2.948 0-1.583.593-2.958.594-1.375 1.625-2.407Q5.667 3.604 7.052 3.01 8.438 2.417 10 2.417q1.583 0 2.958.593 1.375.594 2.407 1.625 1.031 1.032 1.625 2.417.593 1.386.593 2.948t-.593 2.948q-.594 1.385-1.625 2.417-1.032 1.031-2.417 1.625-1.386.593-2.948.593Zm0-1.083q2.708 0 4.604-1.896T16.5 10q0-2.708-1.896-4.604T10 3.5q-2.708 0-4.604 1.896T3.5 10q0 2.708 1.896 4.604T10 16.5Zm0-6.5Z"/></svg>`,Ut=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M0 5.75C0 4.784.784 4 1.75 4h12.5c.966 0 1.75.784 1.75 1.75v4.5A1.75 1.75 0 0114.25 12H1.75A1.75 1.75 0 010 10.25v-4.5zM4 7a1 1 0 100 2 1 1 0 000-2zm3 1a1 1 0 112 0 1 1 0 01-2 0zm5-1a1 1 0 100 2 1 1 0 000-2z"></path></svg>`,Vt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M4.5 17q-.625 0-1.062-.438Q3 16.125 3 15.5v-11q0-.625.438-1.062Q3.875 3 4.5 3h11q.625 0 1.062.438Q17 3.875 17 4.5v11q0 .625-.438 1.062Q16.125 17 15.5 17Zm0-1.5h11V6h-11v9.5Zm5.5-1.75q-1.542 0-2.75-.844T5.5 10.75q.542-1.312 1.75-2.156Q8.458 7.75 10 7.75t2.75.844q1.208.844 1.75 2.156-.542 1.312-1.75 2.156-1.208.844-2.75.844Zm0-1q1.104 0 2-.531.896-.531 1.396-1.469-.5-.938-1.396-1.469-.896-.531-2-.531t-2 .531q-.896.531-1.396 1.469.5.938 1.396 1.469.896.531 2 .531Zm0-.75q-.521 0-.885-.365-.365-.364-.365-.885t.365-.885Q9.479 9.5 10 9.5t.885.365q.365.364.365.885t-.365.885Q10.521 12 10 12Z"/></svg>`,Qt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M3.542 9.25q-.563 0-.948-.396-.386-.396-.386-.937V5.542q0-.542.396-.938.396-.396.938-.396H11V9.25Zm0-1.083h6.375V5.292H3.542q-.104 0-.177.073t-.073.177v2.375q0 .104.073.177t.177.073Zm0 7.625q-.542 0-.938-.396-.396-.396-.396-.938v-2.375q0-.541.396-.937t.938-.396H12.5v5.042Zm0-1.084h7.875v-2.875H3.542q-.104 0-.177.073t-.073.177v2.375q0 .104.073.177t.177.073ZM14 15.792V9.25h-1.5V4.208h5.188L16.25 7.854h1.438Zm-9.896-2.021h1v-1h-1Zm0-6.542h1v-1h-1Zm-.812.938V5.292v2.875Zm0 6.541v-2.875 2.875Z"/></svg>`,Bt=Be`<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path d="M7 15h6v-1.5H7Zm0-3h6v-1.5H7Zm-1.5 6q-.625 0-1.062-.438Q4 17.125 4 16.5v-13q0-.625.438-1.062Q4.875 2 5.5 2H12l4 4v10.5q0 .625-.438 1.062Q15.125 18 14.5 18ZM11 7V3.5H5.5v13h9V7ZM5.5 3.5v3.938V3.5v13-13Z"/></svg>`,Ft=Be`<svg fill="currentColor" style="position: relative; top: -1px" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M4.5 19.146q-.625 0-1.062-.438Q3 18.271 3 17.646v-11q0-.625.438-1.063.437-.437 1.062-.437h6.521l-1.5 1.5H4.5v11h11v-4.979l1.5-1.521v6.5q0 .625-.438 1.062-.437.438-1.062.438Zm5.5-7Zm3.625-6.813 1.083 1.084L9.5 11.583v1.063h1.062l5.188-5.167 1.042 1.063-5.604 5.604H8v-3.167Zm3.167 3.209-3.167-3.209 1.771-1.771q.437-.437 1.052-.437.614 0 1.052.437l1.083 1.084q.438.437.438 1.052 0 .614-.438 1.052Z"/></svg>`,zt=Be`<svg style="padding: 2px; box-sizing: border-box;" viewBox="64 64 896 896" width="20px" height="20px" fill="currentColor" aria-hidden="true"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"></path></svg>`;function Zt(){return Qe`<div class="lds-ring" title="Sparqling is loading"><div></div><div></div><div></div><div></div></div>`}const Wt=ue`
  .lds-ring {
    width: 20px;
    height: 20px;
  }

  .lds-ring div {
    box-sizing: border-box;
    display: block;
    position: absolute;
    width: 16px;
    height: 16px;
    margin: 2px;
    border: 2px solid var(--gscape-color-accent);
    border-radius: 50%;
    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
    border-color: var(--gscape-color-accent) transparent transparent transparent;
  }
  .lds-ring div:nth-child(1) {
    animation-delay: -0.45s;
  }
  .lds-ring div:nth-child(2) {
    animation-delay: -0.3s;
  }
  .lds-ring div:nth-child(3) {
    animation-delay: -0.15s;
  }
  @keyframes lds-ring {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`;function Jt(t){return Qe`
    <table id="query-results">
      <tr>${t.headTerms.map((e=>Qe`<th>${e}</th>`))}</tr>
      ${t.results.map((e=>Qe`
          <tr class="actionable" @mousedown=${Yt}>
            ${e.map((e=>Qe`<td value=${e.value}>${e.value}</td>`))}
          </tr>
        `))}
    </table>
    ${0===t.results.length?Qe`
      <div class="blank-slate">
        ${e.icons.searchOff}
        <div class="header">No results available</div>
      </div>
      `:null}
  `}function Yt(e){var t;const i=e.currentTarget;i.dispatchEvent(new CustomEvent("onexampleselection",{bubbles:!0,composed:!0,detail:{exampleValue:null===(t=i.querySelector("td"))||void 0===t?void 0:t.getAttribute("value")}}))}const Xt=ue`
  #query-results {
    width: 100%;
    background: var(--gscape-color-bg-inset);
    border-radius: var(--gscape-border-radius);
    border: solid 1px var(--gscape-color-border-subtle);
    border-collapse: collapse;
    white-space: pre;
  }

  #query-results th {
    border-bottom: solid 1px var(--gscape-color-border-subtle);
  }

  #query-results td, #query-results th {
    padding: 4px 8px;
  }

  #query-results tr:hover {
    background-color: var(--gscape-color-neutral-muted);
  }
`;var Kt,ei,ti,ii=ue`
  .top-bar {
    font-size: 12px;
    display: flex;
    flex-direction: row;    
    align-items: center;
    justify-content: space-between;
    gap: 4px;
    box-sizing: border-box;
    width: 100%;
    border-top-left-radius: var(--gscape-border-radius);
    border-top-right-radius: var(--gscape-border-radius);
    border-bottom-left-radius: 0px;
    border-bottom-right-radius: 0px;
    background: var(--gscape-color-bg-inset);
  }

  .top-bar.traslated-down {
    bottom: 0;
    left: 50%;
    transform: translate(-50%);
    width: fit-content;
    height: fit-content;
    position: absolute;
  }

  #widget-header {
    margin-left: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
  }

  #buttons-tray > * {
    position: initial;
  }

  #buttons-tray {
    display: flex;
    align-items: center;
    justify-content: end;
    flex-grow: 3;
    padding: 0 10px;
  }

  #buttons-tray > gscape-button {
    --gscape-icon-size: 20px;
  }

  #buttons-tray > input {
    max-width: 130px;
    margin: 0 5px;
    padding-right: 2px;
  }

  .gscape-panel {
    display: flex;
    flex-direction: column;
    width: unset;
    max-width: unset;
    height: 100%;
    box-sizing: border-box;
    overflow: unset;
    padding: 0;
  }

  .sparqling-blank-slate {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    max-width: unset;
    width: 100%;
    box-sizing: border-box;
  }

  [disabled] {
    cursor: not-allowed;
  }

  input:invalid, select:invalid {
    border-color: var(--gscape-color-danger);
    background-color: var(--gscape-color-danger-muted);
  }

  input:invalid:focus, select:invalid:focus {
    box-shadow: var(--gscape-color-danger) 0px 0px 0px 1px inset;
    border-color: var(--gscape-color-danger);
  }
`,ni=ue`
  .gscape-panel {
    position: absolute;
    top: 100px;
    left: 50%;
    transform: translate(-50%, 0);
    height: unset;
    max-height:unset;
  }

  .dialog-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    min-width: 350px;
    padding: 8px;
    margin-top: 8px;
    min-height: 150px;
    justify-content: space-between;
  }

  .form {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px;
  }

  .selects-wrapper {
    align-self: start;
    display: flex;
    flex-direction: column;
    gap: 8px;
    white-space: nowrap;
  }

  .inputs-wrapper {
    display: flex;
    align-items: center;
    flex-direction: column;
    overflow: auto;
    max-height: 260px;
    gap: 10px;
  }

  .inputs-wrapper gscape-button {
    --gscape-icon-size: 18px;
  }

  .bottom-buttons {
    display:flex;
    width: 100%;
    justify-content: end;
    gap: 4px;
  }

  .section-header {
    text-align: center;
    font-weight: bold;
    border-bottom: solid 1px var(--theme-gscape-borders);
    color: var(--theme-gscape-secondary);
    width: 85%;
    margin: auto;
    margin-bottom: auto;
    margin-bottom: 10px;
    padding-bottom: 5px;
  }

  #message-tray {
    font-size: 90%;
  }
  #message-tray > .correct-message {
    color: var(--gscape-color-success);
  }
  #message-tray > .error-message {
    color: var(--gscape-color-danger);
  }

  form abbr {
    margin: 0 5px;
  }

  *:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;function oi(e){const t=e.validity;return t.valueMissing?e.setCustomValidity("Please fill out this field."):t.rangeUnderflow?e.setCustomValidity(`Please select a number that is no lower than ${e.min}`):t.rangeOverflow?e.setCustomValidity(`Please select a number that is no greater than ${e.max}`):t.typeMismatch?e.setCustomValidity(`Please select a ${e.type}`):e.setCustomValidity(""),e.reportValidity()}function ri(e){e.checkValidity()||e.setCustomValidity("Please select an item in the list.");const t=e.reportValidity();return e.setCustomValidity(""),t}!function(e){e.DEFINE="Define",e.EDIT="Edit"}(Kt||(Kt={}));class si extends(e.ModalMixin(e.BaseMixin(pt))){constructor(){super(),this.modality=Kt.DEFINE,this.deleteCallback=e=>{},this.acceptExamples=!1,this.loadingExamples=!1,this.seeExamplesCallback=()=>{},this.addEventListener("onexampleselection",(e=>{if(this.parameters&&e.detail){let t=this.parameters.length-1;if(this.inputElems)for(const e of this.inputElems)if(e.matches(":focus")){t=parseInt(e.getAttribute("index")||"0")||t;break}this.parameters[t].value=e.detail.exampleValue,this.requestUpdate()}}))}handleSubmit(){this.formElement&&function(e){const t=e.querySelectorAll("input"),i=e.querySelectorAll("select");let n=!0;return null==t||t.forEach((e=>{n=n&&oi(e)})),null==i||i.forEach((e=>{n=n&&ri(e)})),n}(this.formElement)&&(this.normalizeDatatypes(),this.onValidSubmit())}normalizeDatatypes(){"xsd:int"===this.datatypeFromOntology||"xsd:integer"===this.datatypeFromOntology||"xsd:double"===this.datatypeFromOntology||"xsd:float"===this.datatypeFromOntology||"xsd:long"===this.datatypeFromOntology||"xsd:short"===this.datatypeFromOntology||"xsd:unsignedInt"===this.datatypeFromOntology||"xsd:unsignedLong"===this.datatypeFromOntology||"xsd:unsignedShort"===this.datatypeFromOntology?this.datatype=Q.Decimal:Object.values(Q).includes(this.datatypeFromOntology)?this.datatype=this.datatypeFromOntology:this.datatype=Q.String}onOperatorChange(e){var t,i;switch(this.operator=e,this.operator){case G.In:case G.NotIn:this.parametersIriOrConstants&&this.parametersIriOrConstants.length<2&&this.addInputValue(2-this.parametersIriOrConstants.length);break;case D.Ceil:case D.Floor:case D.Round:case D.Day:case D.Year:case D.Month:case D.Hours:case D.Minutes:case D.Seconds:case D.Lcase:case D.Ucase:case D.Strlen:case G.Isblank:case G.NotIsblank:null===(t=this.parameters)||void 0===t||t.splice(1);break;default:null===(i=this.parameters)||void 0===i||i.splice(2),this.parametersIriOrConstants&&this.parametersIriOrConstants.length<=0&&this.addInputValue()}}onDatatypeChange(e){this.datatype=e}onInputChange(e,t){var i;this.parameters&&(this.datatype===Q.DateTime?this.parameters[e].value=null===(i=t.valueAsDate)||void 0===i?void 0:i.toISOString():this.parameters[e].value=t.value)}addInputValue(e=1){var t;for(let i=0;i<e;i++)null===(t=this.parameters)||void 0===t||t.push({type:this.parametersType,value:"",constantType:this.datatype});this.requestUpdate()}removeInputValue(){var e;null===(e=this.parameters)||void 0===e||e.pop(),this.requestUpdate()}firstUpdated(e){super.firstUpdated(e),this.hide()}updated(e){var t,i,n,o;super.updated(e),this.selectOperatorElem&&(this.selectOperatorElem.onchange=()=>this.onOperatorChange(this.selectOperatorElem.value)),this.selectDatatypeElem&&(this.selectDatatypeElem.onchange=e=>this.onDatatypeChange(this.selectDatatypeElem.value)),null===(t=this.inputElems)||void 0===t||t.forEach((e=>e.onchange=t=>this.onInputChange(e.getAttribute("index"),t.currentTarget)));const r=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("#add-input-btn");r&&(r.onclick=()=>this.addInputValue());const s=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#remove-input-btn");s&&(s.onclick=()=>this.removeInputValue());const a=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("#show-examples");a&&(a.onclick=()=>this.handleShowHideExamplesClick()),this.searchExamplesInput&&(this.searchExamplesInput.onchange=()=>{this.examplesSearchValue=this.searchExamplesInput.value},this.searchExamplesInput.onkeyup=e=>{"Enter"===e.key&&this.seeExamplesCallback()})}addMessage(e,t){if(!this.messagesElem)return;let i=document.createElement("div");i.classList.add(t),i.innerHTML=e,this.messagesElem.appendChild(i)}resetMessages(){this.messagesElem&&(this.messagesElem.textContent="")}setAsCorrect(e){const t=e||"Correctly Saved";this.addMessage(t,"correct-message"),setTimeout((()=>this.resetMessages()),2e3)}onSeeExamples(e){this.seeExamplesCallback=()=>{this.variable&&(this.loadingExamples=!0,e(this.variable))}}setDefaultOperator(){this.onOperatorChange(this.operators[0])}handleShowHideExamplesClick(){this.variable&&!this.examples?this.seeExamplesCallback():(this.iriExamplesTable.classList.toggle("hide"),this.searchExamplesInput.classList.toggle("hide"))}onValidSubmit(){this.submitCallback(this._id,this.operator,this.parameters)}get operators(){return[]}get selectOperatorElem(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#select-operator > select")}get selectDatatypeElem(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#select-datatype > select")}get inputElems(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll(".inputs-wrapper > input")}get messagesElem(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#message-tray")}get variable(){var e;return null===(e=this.parameters)||void 0===e?void 0:e.find((e=>e.type===N))}get datatype(){var e;return null===(e=this.variable)||void 0===e?void 0:e.constantType}set datatype(e){var t;this.variable&&(this.variable.constantType=e),null===(t=this.parameters)||void 0===t||t.map((t=>t.constantType=e)),this.requestUpdate()}get parametersIriOrConstants(){var e;return null===(e=this.parameters)||void 0===e?void 0:e.filter((e=>e.type!==N))}get formElement(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("form")}get iriExamplesTable(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#query-results")}get searchExamplesInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#search-examples-input")}}function ai(t,i){var n;const o=t.operator||i[0],r=t.datatypeFromOntology||Q.String;return Qe`
    <div class="section">
      ${t.formTitle?Qe`<div class="header">${t.formTitle}</div>`:null}
      <form id="form-dialog" class="form" action="javascript:void(0)" onsubmit="this.handleSubmit">
        <div class="selects-wrapper">
          <div id="select-operator">
            <label>Operator</label>
            ${li(o,i)}
          </div>
          ${t.parametersType===U?Qe`
              <div id="select-datatype">
                <label>Datatype</label>
                ${li(r,Object.values(Q),void 0!==t.datatypeFromOntology)}
              </div>`:null}
        </div>
        <div class="inputs-wrapper">
          ${null===(n=t.parametersIriOrConstants)||void 0===n?void 0:n.map(((e,i)=>function(e,t,i="",n=""){t===Q.DateTime&&(i=(null==i?void 0:i.split("T")[0])||"value");let o=i||"value";const r=document.createElement("input");return r.type=function(e){switch(e){case Q.DateTime:return"date";case Q.Decimal:case"xsd:integer":case"xsd:int":return"number";case Q.String:return"text";default:return""}}(t),r.placeholder=o,r.title=n,r.setAttribute("index",(e+1).toString()),r.required=!0,r.value=i,Qe`${r}`}(i,t.datatypeFromOntology,e.value,"Set input value")))}
          ${t.operator===G.In||t.operator===G.NotIn?Qe`
              <div>
                <gscape-button id="add-input-btn" type="subtle" title="Add input value">
                  <span slot="icon">${e.icons.plus}</span>
                </gscape-button>
                ${t.parameters&&t.parameters.length>3?Qe`
                    <gscape-button id="remove-input-btn" type="subtle" title="Remove input value">
                      <span slot="icon">${e.icons.minus}</span>
                    </gscape-button>
                  `:null}
              </div>
            `:null}

          ${t.acceptExamples?Qe`
              <gscape-button 
                id="show-examples" 
                label="Show/Hide Examples"
                size='s' 
                title="Show/Hide examples"
              >
              </gscape-button>
            `:null}
        </div>
        ${t.operator===G.Regex?Qe`
              <input type="checkbox" id="case-sensitive" name="flag" value="i">
              <label for="case-sensitive">Case Sensitive</label>
            `:null}
      </form>
    </div>
    ${t.examples?Qe`
        ${t.parametersType===U?Qe`<input id="search-examples-input" placeholder="Search Examples" type="text" />`:null} 
        ${Jt(t.examples)}
      `:null}
    ${t.loadingExamples?Zt():null}
    <div id="message-tray"></div>
  `}function li(e,t,i=!1){const n=t.includes(e);return Qe`
    <select required ?disabled=${i}>
      ${n?null:Qe`<option value="" hidden selected>${e}</option>`}
      ${t.map((t=>t===e?Qe`<option value="${t}" selected>${t}</option>`:Qe`<option value="${t}">${t}</option>`))}
    </select>
  `}si.properties={operator:{attribute:!1},parameters:{attribute:!1},modality:{attribute:!1},datatype:{attribute:!1},datatypeFromOntology:{type:String},aggregateOperator:{attribute:!1},examples:{attribute:!1},loadingExamples:{attribute:!1,type:Boolean},acceptExamples:{attribute:!1,type:Boolean},canSave:{type:Boolean}},si.styles=[e.baseStyle,Xt,Wt,ii,ni];class di extends(ti=si){constructor(){super(...arguments),this.deleteCallback=e=>{}}render(){return this.title=`${this.modality} filter for ${this.variableName}`,Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${Ct}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        <div class="dialog-body">
          ${ai(this,this.operators)}
          
          <div class="bottom-buttons">
            ${this.modality===Kt.EDIT?Qe`
                <gscape-button type="subtle" title="Delete" style="margin-right: auto" id="delete-button" @click=${this.handleDeleteClick}>
                  <span slot="icon">${ht}</span>
                </gscape-button>
              `:null}
            <gscape-button label="Cancel" @click=${this.hide}></gscape-button>
            <gscape-button type="primary" @click=${this.handleSubmit} label="Save Filter"></gscape-button>
          </div>
        </div>
      </div>
    `}onSubmit(e){this.submitCallback=e}onDelete(e){this.deleteCallback=e}handleDeleteClick(){this.deleteCallback(this._id)}get caseSensitiveCheckbox(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#case-sensitive")}get isCaseSensitive(){var e;return null===(e=this.caseSensitiveCheckbox)||void 0===e?void 0:e.checked}get operators(){return Object.values(G)}}function ci(){return ue`
    .elem-with-operator {
      display: flex;
      gap: 10px;
      align-items:center;
      justify-content: center;
      padding-left: 8px;
    }

    .parameters {
      display: flex;
      flex-direction: column;
      gap: 2px;
      flex-grow:2;
      min-width: 0;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .parameter {
      background: var(--gscape-color-neutral-subtle);
      padding: 4px;
      padding-bottom: 4px;
      padding-bottom: 1px;
      border-radius: var(--gscape-border-radius);
      border: solid 1px var(--gscape-color-border-subtle);
    }
  `}function pi(e,t,i,n,o=(e=>{}),r,s){return Qe`
    <gscape-button
      id=${n}
      size="s"
      type="subtle"
      ?disabled=${s}
      title=${e}
      label=${r}
      @click=${o}
    >
      <span slot="icon">${t}</span>
      ${i?Qe`<span slot="alt-icon">${i}</span>`:null}
    </gscape-button>
  `}function ui(e,t,i){return Qe`
    ${null==e?void 0:e.map((e=>{var n,o;const r=e.value||e,s=(null===(n=null==r?void 0:r.expression)||void 0===n?void 0:n.operator)||r.name||r.aggregateFunction;if(!s)return null;const a=(null===(o=r.expression)||void 0===o?void 0:o.parameters)||r.parameters,l=Object.keys(G).find((e=>{var t;return G[e]===(null===(t=r.expression)||void 0===t?void 0:t.operator)}))||Object.keys(D).find((e=>D[e]===r.name))||Object.keys(M).find((e=>M[e]===r.aggregateFunction));return Qe`
        <div class="elem-with-operator">
          <div class="chip" title="${l}">${s}</div>

          ${a?Qe`
              <div class="parameters">
                ${null==a?void 0:a.map(((e,t)=>{if(0===t)return null;let i=e.value;return e.constantType===Q.DateTime&&(i=(null==i?void 0:i.split("T")[0])||i),s===G.Regex&&2===t?null:Qe`<div class="parameter ellipsed">${i}</div>`}))}
              </div>
            `:null}

          <div>
            ${t?pi("Edit",wt,void 0,`edit-${e.id}`,(()=>t(e.id))):null}
            ${i?pi("Delete",ht,void 0,`delete-${e.id}`,(()=>i(e.id))):null}
          </div>
        </div>
      `}))}
  `}ei=di,di.styles=Reflect.get(ti,"styles",ei),customElements.define("sparqling-filter-dialog",di);class hi extends(e.ModalMixin(e.BaseMixin(pt))){constructor(){super(...arguments),this.filterList=[],this.title=" ",this.editFilterCallback=()=>{},this.deleteFilterCallback=()=>{}}static get properties(){return Object.assign({filterList:{attribute:!1},variable:{attribute:!1}},super.properties)}static get styles(){return[e.baseStyle,ii,ci(),ue`
        .gscape-panel {
          position: absolute;
          top: 30%;
          left: 50%;
          transform: translate(-50%, 0);
          height: unset;
        }

        .dialog-body {
          display:flex;
          flex-direction: column;
          gap: 20px;
          padding: 10px 5px;
        }

        gscape-button {
          position: initial;
        }

        .danger:hover {
          color: var(--theme-gscape-error);
        }
      `]}render(){return this.title=`Defined Filters for ${this.variable}`,Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${Ct}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        <div class="dialog-body">
        ${this.filterList?ui(this.filterList,this.editFilterCallback,this.deleteFilterCallback):null}
        </div>
      </div>
    `}firstUpdated(e){super.firstUpdated(e),this.hide()}onEdit(e){this.editFilterCallback=e}onDelete(e){this.deleteFilterCallback=e}}customElements.define("sparqling-filter-list",hi);const gi=(e="en")=>({en:"Empty Query"}[e]),vi=(e="en")=>({en:"Entity currently not mapped to data",it:"Entit non mappata"}[e]);class fi extends(e.DropPanelMixin(e.BaseMixin(pt))){constructor(){super(),this.title="Suggestions",this.loading=!1,this.isDefaultClosed=!1,this._onSuggestionLocalization=e=>{},this._onSuggestionAddToQuery=(e,t,i)=>{},this._onAddLabel=()=>{},this._onAddComment=()=>{},this._onFindPathsClick=()=>{},this.togglePanel=()=>{super.togglePanel(),this.requestUpdate()},this.addEventListener("onsearch",(e=>{var i,n,o,r,s,a;const l=e.detail.searchText;if(this.shownIRIs&&l.length>2){const e=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),d=t=>e(t.value.iri.remainder,l)||t.value.getLabels().some((t=>e(t.lexicalForm,l)));(!this.entityFilters||this.entityFilters.areAllFiltersDisabled||this.entityFilters[t.CLASS])&&(this.shownIRIs.classes=(null===(n=null===(i=this.allHighlights)||void 0===i?void 0:i.classes)||void 0===n?void 0:n.filter((e=>d(e))).map((e=>e.value.iri.fullIri)))||[]),(!this.entityFilters||this.entityFilters.areAllFiltersDisabled||this.entityFilters[t.DATA_PROPERTY])&&(this.shownIRIs.dataProperties=(null===(r=null===(o=this.allHighlights)||void 0===o?void 0:o.dataProperties)||void 0===r?void 0:r.filter((e=>d(e))).map((e=>e.value.iri.fullIri)))||[]),(!this.entityFilters||this.entityFilters.areAllFiltersDisabled||this.entityFilters[t.OBJECT_PROPERTY])&&(this.shownIRIs.objectProperties=(null===(a=null===(s=this.allHighlights)||void 0===s?void 0:s.objectProperties)||void 0===a?void 0:a.filter((e=>d(e))).map((e=>e.value.iri.fullIri)))||[]),this.requestUpdate()}else this.setHighlights()})),this.addEventListener("onentityfilterchange",(e=>{this.entityFilters=e.detail,this.setHighlights()}))}render(){return Qe`
      ${this.isPanelClosed()?Qe`
          <div>
            <gscape-button 
              id="toggle-panel-button"
              @click=${this.togglePanel}
              label=${this.title}
            > 
              <span slot="icon">${bt}</span>
              <span slot="trailing-icon">${e.icons.plus}</span>
            </gscape-button>
          </div>
        `:null}

      <div class="gscape-panel" id="drop-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${bt}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.togglePanel}
          > 
            <span slot="icon">${e.icons.minus}</span>
          </gscape-button>
        </div>

        <gscape-entity-search
          class=0
          data-property=0
          object-property=0
        ></gscape-entity-search>

        <div class="content-wrapper">
          <div class="list">
            ${this.loading?Qe`<div style="align-self: center">${e.getContentSpinner()}</div>`:this.hasAnyHighlights?Qe`

                  <details open="">
                    <summary class="actionable" style="padding: 8px">Annotations</summary>

                    <gscape-action-list-item
                      label = 'Label'
                      @click=${this._onAddLabel}
                    >
                      <span slot="icon">${e.icons.labelIcon}</span>
                    </gscape-action-list-item>

                    <gscape-action-list-item
                      label = 'Comment'
                      @click=${this._onAddComment}
                    >
                      <span slot="icon">${e.icons.commentIcon}</span>
                    </gscape-action-list-item>
                  </details>

                  <div class="find-paths" style="margin: 4px auto">
                    <gscape-button 
                      size="s"
                      label="Find a path"
                      title="Get shortest paths suggestions to reach a class of interest from your current state"
                      @click=${this._onFindPathsClick}
                    >
                      ${e.getIconSlot("icon",e.icons.pathIcon)}
                    </gscape-button>
                  </div>

                  <div class="hr" style="flex-shrink: 0; margin: 8px auto"></div>

                  ${this.dataProperties.map((e=>this.getEntitySuggestionTemplate(e)))}
                  ${this.objectProperties.map((e=>this.getObjectPropertySuggestionTemplate(e)))}
                  ${this.classes.map((e=>this.getEntitySuggestionTemplate(e)))}

                  ${this.shownIRIs&&0===this.objectProperties.length&&0===this.dataProperties.length&&0===this.classes.length?e.emptySearchBlankState:null}
                `:Qe`
                  <div class="blank-slate">
                    ${e.icons.searchOff}
                    <div class="header">No suggestions available</div>
                    <div class="description">Add elements to the query and we will provide you next steps suggestions</div>
                  </div>
                `}
          </div>
        </div>
      </div>
    `}getObjectPropertySuggestionTemplate(e){return Qe`
      <gscape-entity-list-item
        displayedname=${e.displayedName}
        iri=${e.value.iri.fullIri}
        .types=${e.value.types}
        ?asaccordion=${!0}
        ?disabled=${e.disabled}
        direct=${e.direct}
        title=${e.disabled?vi():e.displayedName}
      >
        <div slot="accordion-body">
          ${e.connectedClasses.map((t=>this.getEntitySuggestionTemplate(t,(i=>this.handleAddToQueryClick(i,t.value.iri.fullIri,e.value.types,e.value.iri.fullIri)),e.disabled)))}
        </div>

        ${e.direct?null:Qe`
            <span slot="trailing-element" class="chip" style="line-height: 1">Inverse</span>
          `}

        ${Ya()?null:Qe`
            <div slot="trailing-element" class="actions">
              <gscape-button
                  title="Show in graphs"
                  size="s"
                  type="subtle"
                  @click=${t=>{this.handleSuggestionLocalization(t,e.value.iri.fullIri)}}
                >
                  <span slot='icon' class="slotted-icon">${yt}</span>
                </gscape-button>
            </div>
          `}
        
      </gscape-entity-list-item>
    `}getEntitySuggestionTemplate(e,t,i=!1){const n=i||!0===e.disabled;return Qe`
      <gscape-entity-list-item
        displayedname=${e.displayedName}
        iri=${e.value.iri}
        .types=${e.value.types}
        actionable
        ?disabled=${n}
        title=${e.disabled?vi():e.displayedName}
        @click=${i=>{t?t(i):this.handleAddToQueryClick(i,e.value.iri.fullIri,e.value.types)}}
      >
        <div slot="trailing-element" class="actions">
          ${Ya()?null:Qe`
              <gscape-button
                title="Show in graphs"
                size="s"
                type="subtle"
                @click=${t=>{this.handleSuggestionLocalization(t,e.value.iri.fullIri)}}
              >
                <span slot='icon' class="slotted-icon">${yt}</span>
              </gscape-button>
            `}
        </div>
      </gscape-entity-list-item>
    `}firstUpdated(e){super.firstUpdated(e),this.hide()}handleSuggestionLocalization(e,t){e.stopPropagation(),e.preventDefault(),t&&this._onSuggestionLocalization(t)}handleAddToQueryClick(e,i,n,o){e.preventDefault(),o?this._onSuggestionAddToQuery(o,t.OBJECT_PROPERTY,i):this._onSuggestionAddToQuery(i,Array.from(n)[0])}onSuggestionLocalization(e){this._onSuggestionLocalization=e}onSuggestionAddToQuery(e){this._onSuggestionAddToQuery=e}onAddLabel(e){this._onAddLabel=e}onAddComment(e){this._onAddComment=e}onFindPathsClick(e){this._onFindPathsClick=e}get objectProperties(){var e,t;return(null===(t=null===(e=this.allHighlights)||void 0===e?void 0:e.objectProperties)||void 0===t?void 0:t.sort(((e,t)=>e.displayedName.localeCompare(t.displayedName))).filter((e=>{var t;return!this.shownIRIs||(null===(t=this.shownIRIs)||void 0===t?void 0:t.objectProperties.includes(e.value.iri.fullIri))})))||[]}get classes(){var e,t;return(null===(t=null===(e=this.allHighlights)||void 0===e?void 0:e.classes)||void 0===t?void 0:t.sort(((e,t)=>e.displayedName.localeCompare(t.displayedName))).filter((e=>{var t;return!this.shownIRIs||(null===(t=this.shownIRIs)||void 0===t?void 0:t.classes.includes(e.value.iri.fullIri))})))||[]}get dataProperties(){var e,t;return(null===(t=null===(e=this.allHighlights)||void 0===e?void 0:e.dataProperties)||void 0===t?void 0:t.sort(((e,t)=>e.displayedName.localeCompare(t.displayedName))).filter((e=>{var t;return!this.shownIRIs||(null===(t=this.shownIRIs)||void 0===t?void 0:t.dataProperties.includes(e.value.iri.fullIri))})))||[]}set allHighlights(e){this._allHighlights=e,this.setHighlights()}get allHighlights(){return this._allHighlights}setHighlights(){var e,i,n;if(this.shownIRIs={classes:(null===(e=this.allHighlights)||void 0===e?void 0:e.classes.map((e=>e.value.iri.fullIri)))||[],dataProperties:(null===(i=this.allHighlights)||void 0===i?void 0:i.dataProperties.map((e=>e.value.iri.fullIri)))||[],objectProperties:(null===(n=this.allHighlights)||void 0===n?void 0:n.objectProperties.map((e=>e.value.iri.fullIri)))||[]},this.shownIRIs&&this.entityFilters&&!this.entityFilters.areAllFiltersDisabled){let e=0;this.entityFilters[t.CLASS]||(this.shownIRIs.classes=[],e+=1),this.entityFilters[t.OBJECT_PROPERTY]||(this.shownIRIs.objectProperties=[],e+=1),this.entityFilters[t.DATA_PROPERTY]||(this.shownIRIs.dataProperties=[],e+=1),3===e&&(this.shownIRIs=void 0)}this.requestUpdate()}get hasAnyHighlights(){if(this.allHighlights)return this.allHighlights.classes.length>0||this.allHighlights.dataProperties.length>0||this.allHighlights.objectProperties.length>0}get searchEntityComponent(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("gscape-entity-search")}blur(){var e;null===(e=this.shadowRoot)||void 0===e||e.querySelectorAll("input").forEach((e=>e.blur()))}}fi.properties={class:{type:String,attribute:!1},allHighlights:{type:Object,attribute:!1}},fi.styles=[e.baseStyle,e.entityListItemStyle,e.contentSpinnerStyle,ii,ue`
      :host {
        position:initial;
        pointer-events:initial;
        max-height: 55%;
      }

      .gscape-panel {
        max-height: unset;
        overflow-y: clip;
      }

      .content-wrapper {
        overflow: auto;
      }

      .list {
        overflow: hidden auto;
        scrollbar-width: inherit;
        max-height: 100%;
        padding: 0 8px 8px 8px;
        position: relative;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
      }

      details.entity-list-item > .summary-body {
        padding: 4px 8px;
      }

      details {
        white-space: nowrap;
      }

      div.entity-list-item {
        display: flex;
        align-items: center;
        gap: 2px;
        padding: 0 8px;
      }

      div.entity-list-item > .entity-name {
        flex-grow: 2;
      }

      div.entity-list-item > .entity-icon {
        line-height: 0;
      }

      gscape-entity-list-item {
        --custom-min-height: 26.5px;
      }

      gscape-entity-list-item > .actions {
        display: none;
      }

      gscape-entity-list-item:hover > .actions {
        display: unset;
      }

      .blank-slate {
        margin: 0 auto;
      }

      .ellipsed .actions, .ellipsed .entity-icon {
        overflow-x: unset
      }

      .disabled {
        opacity: 0.5

      }
    `],customElements.define("sparqling-highlights-list",fi);class mi extends(e.BaseMixin(pt)){constructor(){super(...arguments),this.reverseArrow=!1,this.onSelection=e=>{},this.onmouseout=()=>{this.hide()}}render(){var e;return Qe`
      <div class="gscape-panel">
        <div class="header">Add Object Property</div>
        <div class="gscape-panel-body">
          <div id="left-panel">
            <span class="text class">${this.class}</span>
            <span class="arrow${this.reverse}">
              <span class="arrow-tail"></span>
              <span class="text obj-property">${this.objProperty}</span>
              <span class="arrow-body"></span>
              <span class="arrow-head"></span>
            </span>
          </div>
          <div id="right-panel" class="list">
            ${null===(e=this.list)||void 0===e?void 0:e.map(((e,t)=>{const i=ya(e,q.Class);return Qe`
                <span 
                  class="actionable ${i?"disabled":null}"
                  ?hasEmptyUnfolding=${i}
                  index="${t}"
                  @click=${this.handleSelection}
                  title=${i?vi():e}
                >
                  ${e}
                </span>`}))}
          </div>
        </div>
      </div>
    `}handleSelection(e){if(e.preventDefault(),this.list){const t=e.currentTarget.getAttribute("index"),i=e.currentTarget.getAttribute("hasEmptyUnfolding");if(null!==t&&!i&&""!==i){let e=this.list[t];this.onSelection(e),this.hide()}}}showInPosition(e){this.show(),e&&(this.style.top=e.y+"px",this.style.left=e.x+"px")}get reverse(){return this.reverseArrow?"-reverse":null}firstUpdated(e){super.firstUpdated(e),this.hide()}}mi.properties={class:{attribute:!1},objProperty:{attribute:!1}},mi.styles=[e.baseStyle,ue`
      :host {
        position: absolute;
        min-width: 100px;
        transform: translate(-100%, -50%);
      }

      .gscape-panel-body {
        display: flex;
        padding: 0px 0px 8px 8px;
      }

      .gscape-panel {
        max-width: unset;
        max-height: unset;
        padding:0
      }

      .header {
        text-align:center;
      }

      #left-panel {
        display:flex;
        align-items:center;
      }

      .class {
        padding: 10px 20px;
        border-radius: 6px;
        background-color: var(--gscape-color-class);
        border: solid 2px var(--gscape-color-class-contrast);
      }

      .arrow {
        margin: 10px;
        display: flex;
        align-items: center;
      }

      .arrow-reverse {
        margin: 10px;
        display: flex;
        align-items: center;
        flex-direction: row-reverse;
      }

      .arrow-tail, .arrow-body {
        height:8px;
        background-color: var(--gscape-color-object-property-contrast);
      }

      .arrow-tail {
        width: 20px;
        border-top-left-radius: 3px;
        border-bottom-left-radius: 3px;
        border-top-right-radius: 0px;
        border-bottom-right-radius:0px;
      }

      .arrow-reverse > .arrow-tail {
        border-top-right-radius: 3px;
        border-bottom-right-radius: 3px;
        border-top-left-radius: 0px;
        border-bottom-left-radius:0px;
      }

      .arrow-body {
        width: 15px;
      }

      .arrow-head {
        width: 0; 
          width: 0; 
        width: 0; 
          width: 0; 
        width: 0; 
        height: 0; 
          height: 0; 
        height: 0; 
          height: 0; 
        height: 0; 
        border-top: 15px solid transparent;
        border-bottom: 15px solid transparent;
        background-color: initial;
      }

      .arrow > .arrow-head {
        border-left: 15px solid var(--gscape-color-object-property-contrast);
        border-right: 0;
      }

      .arrow-reverse > .arrow-head {
        border-right: 15px solid var(--gscape-color-object-property-contrast);
        border-left: 0;
      }

      .obj-property {
        padding: 5px;
      }

      .list {
        display: flex;
        flex-direction: column;
        max-height: 200px;
        overflow: hidden auto;
        padding-right: 8px;
      }

      .gscape-panel-title {
        padding-top:10px;
      }

      .disabled {
        opacity: 0.5
      }
    `],customElements.define("sparqling-related-classes",mi);class yi extends(e.ModalMixin(e.BaseMixin(pt))){constructor(){super(...arguments),this.text=gi(),this.title="SPARQL",this.arePrefixesVisible=!1,this.queryCopied=!1}render(){return Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${gt}
            <span>${this.title}</span>
          </div>

          <div id="buttons-tray">
            ${this.text===gi()||ra()?null:Qe`
                ${pi("Use query in SPARQL page",Ft,void 0,"advanced-mode-btn",ol.redirectToSPARQLPage)}
              `}
            
            ${pi("Copy Query",St,void 0,"copyt-query-code-btn",this.copyQuery)}
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
            title="Close"
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        ${this.queryCopied?Qe`<div id="query-copied-msg">&check; Query copied successfully</div>`:null}
        <div class="sparql-code-wrapper" title="Click to copy query" @click=${this.copyQuery}>
          ${this.text===gi()?Qe`<div class="sparql-code">${this.text.trim()}</div>`:Qe`
              ${this.arePrefixesVisible?Qe`
                  <div class="sparql-code">${this.queryPrefixes}</div>
                `:null}
              <gscape-button type="subtle" title="Show Prefixes" size="s" @click="${this.togglePrefixes}">
                <span slot="icon">${Ut}</span>
              </gscape-button>
              <div class="sparql-code">${this.queryText}</div>
            `}
        </div>
      </div>
    `}togglePrefixes(){this.arePrefixesVisible=!this.arePrefixesVisible}copyQuery(){if(this.queryCopied=!1,navigator.clipboard)navigator.clipboard.writeText(this.text).then((e=>{this.queryCopied=!0,setTimeout((()=>{this.queryCopied=!1}),1e3)}));else{const e=document.createElement("textarea");e.value=this.text,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this.queryCopied=!0,setTimeout((()=>{this.queryCopied=!1}),1e3)}}firstUpdated(e){super.firstUpdated(e),this.hide()}get queryPrefixes(){return this.text.substring(0,this.text.search("SELECT")).trim()}get queryText(){return this.text.substring(this.text.search("SELECT")).trim()}}yi.styles=[e.baseStyle,ii,ue`
      .gscape-panel {
        position: absolute;
        top: 100px;
        left: 50%;
        transform: translate(-50%, 0);
        min-width: 200px;
        max-width: 80vw;
        max-height: calc(-100px + 80vh);
        height: unset;
      }

      .sparql-code-wrapper {
        display: flex;
        flex-direction: column;
        gap: 8px;
        cursor: copy;
        font-family: monospace;
        overflow: auto;
        padding: 10px 20px;
        scrollbar-width: inherit;
      }

      .sparql-code {
        white-space: pre;
      }

      #query-copied-msg {
        color: var(--gscape-color-success);
        text-align: center;
        padding: 4px;
      }
    `],yi.properties={text:{type:String,attribute:!1},arePrefixesVisible:{type:Boolean,state:!0},queryCopied:{type:Boolean,state:!0}},customElements.define("sparqling-sparql-dialog",yi);var bi=Be`
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   version="1.1"
   viewBox="0 0 20 20"
   xml:space="preserve"
   fill="currentColor"
   style="width: 20px; height:20px; padding: 2px; box-sizing: border-box;"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
<g
   transform="translate(-268.25923,-224.085)"><path
     style="display:inline;stroke-width:0.04"
     class="st0"
     d="m 278.25923,224.085 c -2.672,0 -5.18396,1.03997 -7.07195,2.92797 -1.888,1.888 -2.92805,4.40003 -2.92805,7.07203 0,2.672 1.04005,5.18396 2.92805,7.07195 1.88799,1.888 4.39995,2.92805 7.07195,2.92805 2.672,0 5.18403,-1.04005 7.07203,-2.92805 1.888,-1.88799 2.92797,-4.39995 2.92797,-7.07195 0,-2.672 -1.03997,-5.18403 -2.92797,-7.07203 -1.888,-1.888 -4.40003,-2.92797 -7.07203,-2.92797 z m 10e-4,1.94516 1.55563,1.55562 -0.77781,0.77781 -5.72532,5.72532 1.69391,1.69382 5.72703,-5.7271 a 1.10011,1.10011 0 0 1 1.55563,0 l 3.2489,3.24882 a 1.10011,1.10011 0 0 1 0,1.55563 l -6.50187,6.50187 -0.77781,0.77782 -1.55563,-1.55563 0.77781,-0.77781 5.72407,-5.72406 -1.69321,-1.69321 -5.72711,5.72711 a 1.10011,1.10011 0 0 1 -1.55562,8e-5 l -3.24953,-3.24945 a 1.10011,1.10011 0 0 1 0,-1.55571 l 6.50312,-6.50312 z" /></g>

</svg>
`;let xi;var wi=()=>xi;function Ei(e){xi=e}function Ci(e){var t;return $i(null===(t=Ia())||void 0===t?void 0:t.graph,(t=>t.id===e))}function Oi(e){var t;return $i(null===(t=Ia())||void 0===t?void 0:t.graph,(t=>Ti(t,e)))}function $i(e,t){if(e){if(t(e))return e;if(e.children)for(let i of e.children){let e=$i(i,t);if(e)return e}}}function Si(e,t=0){var i;if(null==e?void 0:e.entities)return null===(i=null==e?void 0:e.entities[t])||void 0===i?void 0:i.iri}function Ii(e){if(null==e?void 0:e.entities)return e.entities[0].type}function Ti(e,t){var i;return(null===(i=null==e?void 0:e.entities)||void 0===i?void 0:i.some((e=>e.iri===t||e.prefixedIri===t)))||!1}function Ai(e){return Ii(e)===q.Class}function Pi(e){return Ii(e)===q.DataProperty}function Ri(e){return Ii(e)===q.ObjectProperty||function(e){return Ii(e)===q.InverseObjectProperty}(e)}function Li(e){return Ii(e)===q.Annotation}function ji(e,t){if(!e)return[t];let i=[],n=$i(e,(e=>function(e,t){if(!e.id||!t.id)return!1;const i=e.id===t.id,n=ja(e.id)===ja(t.id),o=JSON.stringify(e.entities)===JSON.stringify(t.entities);return i&&n&&o}(e,t)));if(n||i.push(t),null==t?void 0:t.children)for(let n of t.children){let t=ji(e,n);t&&i.push(...t)}return i}function Hi(e){var t;return(null===(t=e.entities)||void 0===t?void 0:t.map((e=>e.iri||"")).filter((e=>!!e)))||[]}function _i(e){ya(e)||Di(e,Va)}function ki(){wi().ontology.diagrams.forEach((e=>{for(let[t,i]of e.representations)i.cy.$(`.${Ba}`).removeClass(Ba),i.cy.$(`.${Va}`).removeClass(Va),i.cy.$(`.${Qa}`).removeClass(Qa)}))}function qi(){var e,t;const i=wi();if(!i.renderState)return;const n=(null===(e=i.renderer.cy)||void 0===e?void 0:e.$(".highlighted, .sparqling-selected"))||f().collection(),o=null===(t=i.renderer.cy)||void 0===t?void 0:t.elements().difference(n);null==o||o.addClass(Qa)}function Gi(e){Di(e,Ba)}function Di(e,t){var n;const o=wi();o.renderState&&(null===(n=o.renderer.cy)||void 0===n||n.batch((()=>{const n=o.ontology.getEntityOccurrences(e,o.diagramId);n&&(Mi(n.get(i.GRAPHOL)||[],t),o.renderState&&o.renderState!==i.GRAPHOL&&Mi(n.get(o.renderState)||[],t))})))}function Mi(e,t){const i=wi();e.forEach((e=>{var n;if(e.diagramId===i.diagramId){const o=null===(n=i.renderer.cy)||void 0===n?void 0:n.$id(e.id);null==o||o.addClass(t),t!==Va&&t!==Ba||null==o||o.removeClass(Qa)}}))}function Ni(e){var t,n;const o=wi();if(!o.renderState)return;let r=null===(t=o.ontology.getEntityOccurrences(e))||void 0===t?void 0:t.get(i.GRAPHOL);if(r&&Mi(r,Qa),o.renderState!==i.GRAPHOL){const t=null===(n=o.ontology.getEntityOccurrences(e))||void 0===n?void 0:n.get(o.renderState);t&&Mi(t,Qa)}}function Ui(e){const t=wi(),n=t.ontology.getEntity(e);if(n){let e=n.occurrences.get(t.renderState||i.GRAPHOL)||n.occurrences.get(i.GRAPHOL);if(e)return(null==e?void 0:e.find((e=>e.diagramId===t.diagramId)))||e[0]}}function Vi(e,t){t.forEach((t=>{e.style().selector(t.selector).style(t.style)}))}let Qi=(e,t,i)=>{};var Bi=e=>[{selector:'node[shape = "ellipse"], .bubble',style:{"underlay-shape":"ellipse"}},{selector:`.${Va}`,style:{"underlay-color":e.colours["sparqling-highlight"]||e.getColour(o.success_muted),"underlay-padding":"8px","underlay-opacity":1,"underlay-shape":e=>e.style("shape")===r.ELLIPSE?r.ELLIPSE:r.ROUND_RECTANGLE,"border-opacity":1}},{selector:`.${Ba}`,style:{"border-color":e.getColour(o.accent),"border-width":8,padding:4}},{selector:".faded",style:{opacity:.25}}];!function(){let e=document.createElement("div");e.setAttribute("id","grapholscape"),e.style.position="relative",e.style.height="100%"}();const Fi=function(){let e=document.createElement("div");return e.setAttribute("id","sparqling-query-graph"),e.style.position="relative",e.style.height="100%",e.style.width="100%",e.style.borderBottomRightRadius=e.style.borderBottomLeftRadius="var(--gscape-border-radius)",e}(),zi=function(){let e=document.createElement("div");return e.setAttribute("id","sparqling-left-column"),e.style.position="absolute",e.style.left="10px",e.style.bottom="0",e.style.display="flex",e.style.flexDirection="column-reverse",e.style.justifyContent="space-between",e.style.gap="30px",e.style.height="calc(100% - 40px)",e.style.boxSizing="border-box",e.style.marginTop="70px",e.style.pointerEvents="none",e.style.width="20%",e.style.padding="10px 0",e}(),Zi=document.createElement("div");let Wi,Ji;const Yi=document.createElement("hr");function Xi(e){e.preventDefault(),document.ondrop=null;const t=Yi.parentNode;if(t){t.replaceChild(Ji,Yi),setTimeout((()=>Ji.classList.remove("dragged")),100);const e=function(){const e=Ji.parentNode;if(e){let t=0;for(const i of e.children){if(i===Ji)return t;t+=1}}return null}();(e||0===e)&&Wi(Ji._id,e)}else Yi.remove()}function Ki(e){e.preventDefault()}function en(e){for(;"HEAD-ELEMENT"!==e.nodeName&&"body"!==e.nodeName;)e=e.parentNode;return"HEAD-ELEMENT"===e.nodeName?e:null}Yi.style.width="90%",Yi.style.opacity="0.5";class tn extends(e.BaseMixin(e.DropPanelMixin(pt))){constructor(e){super(),this.showCxtMenu=()=>{},this.onDelete=()=>{},this.onRename=()=>{},this.onLocalize=()=>{},this.onOrderBy=()=>{},this.addFilterCallback=e=>{},this.editFilterCallback=e=>{},this.deleteFilterCallback=e=>{},this.addFunctionCallback=e=>{},this.addAggregationCallback=e=>{},this.headElement=e,this.ondragstart=e=>function(e){var t;Ji=en(e.target),Ji.classList.add("dragged"),null===(t=e.dataTransfer)||void 0===t||t.setData("text/plain","")}(e),this.ondragover=e=>function(e){e.preventDefault();let t=en(e.target);const i=t.getBoundingClientRect(),n=i.y+i.height/2;e.clientY-n>0?t.parentNode.insertBefore(Yi,t.nextSibling):t.parentNode.insertBefore(Yi,t)}(e),this.ondragend=e=>Xi(e),this.ondrop=e=>e.preventDefault()}render(){var e,t;return Qe`
      <div>
        <div id="field-head">
          <div id="drag-handler" draggable="true">
            ${At}
          </div>
          <div id="alias-input">
            <input
              id="${"alias"}"
              @focusout="${this.handleInputChange}"
              @keyup=${this.checkAliasValidity}
              placeholder="${this.alias||this.graphElementId}"
              value="${this.alias||this.graphElementId}"
              title="Rename Field"
              pattern="^[A-Za-z][A-Za-z0-9_]*$"
            />
          </div>
          <div id="actions">
            ${pi("Show in graphs",yt,void 0,"localize-action",(()=>this.onLocalize(this._id)))}
            ${pi("Order results ascending/descending",this.orderIcon,void 0,"sort-action",(()=>this.onOrderBy(this._id)))}
            ${pi("More actions",Gt,void 0,"cxt-menu-action",(()=>this.showCxtMenu()))}
          </div>
          ${this.hasAnythingInBody||0!==this.ordering?Qe`
              <div id="state-tray">
                ${this.function?Pt:null}
                ${this.ordering&&0!==this.ordering?this.orderIcon:null}
                ${(null===(e=this.filters)||void 0===e?void 0:e.length)>0?Ct:null}
                ${this.groupBy?Ht:null}
              </div>
            `:null}
          ${this.hasAnythingInBody?Qe`
              <div id="toggle-panel">
                ${pi("Expand",Dt,Mt,"expand-action",this.togglePanel)}
              </div>
            `:null}
        </div>
        <div id="drop-panel" class="hide">
          ${this.groupBy?Qe`
              <div class="section">
                <div class="section-header bold-text">Aggregation</div>
                <div class="filters-function-list">
                  ${ui([this.groupBy])}
                </div>
                ${this.having?Qe`
                    <span class="title">Having</span>
                    <div class="filters-function-list">
                      ${ui(this.having)}
                    </div>
                  `:null}
              </div>
            `:null}

          ${this.function?Qe`
              <div class="section">
                <div class="section-header bold-text">Function</div>
                <div class="filters-function-list">
                  ${ui([this.function])}
                </div>
              </div>
            `:null}
          
          ${(null===(t=this.filters)||void 0===t?void 0:t.length)>0?Qe`
              <div class="section">
                <div class="section-header bold-text">Filters</div>
                <div class="filters-function-list">
                  ${ui(this.filters,this.editFilterCallback,this.deleteFilterCallback)}
                </div>
              </div>
            `:null}
        </div>
      </div>
    `}set headElement(e){if(this._id!==e.id){if(e.id&&(this._id=e.id),e.alias&&(this.alias=e.alias),e.graphElementId&&(this.graphElementId=e.graphElementId),this.entityType=e.entityType,this.dataType=e.dataType||"Type",e.function&&(this.function=e.function),e.ordering&&(this.ordering=e.ordering),e.groupBy&&(this.groupBy=e.groupBy),e.having&&(this.having=e.having),this.entityType===q.Annotation)this.style.borderColor="#DC8D00";else{let e={class:"class",objectProperty:"object-property",dataProperty:"data-property"};this.style.borderColor=`var(--gscape-color-${e[this.entityType]}-contrast)`}if(e.graphElementId){const t=ja(e.graphElementId);t&&(this.filters=t)}}}handleInputChange(e){let t=e.currentTarget;if(t.checkValidity())return this.alias&&t.value===this.graphElementId?(t.setCustomValidity("Please use an alias different from variable name"),void t.reportValidity()):void(this.alias!==t.value&&t.value.length>0&&t.value!==this.graphElementId?this.onRename(this._id,t.value):t.value=this.alias||this.graphElementId);t.reportValidity()}checkAliasValidity(e){const t=e.currentTarget;if(t.setCustomValidity(""),!t.checkValidity())return t.setCustomValidity("Only letters, numbers and underscore"),void t.reportValidity();"Enter"!==e.key&&"Escape"!==e.key||t.blur()}onFunctionSet(e){}onAddFilter(e){this.addFilterCallback=e}onEditFilter(e){this.editFilterCallback=e}onDeleteFilter(e){this.deleteFilterCallback=e}onAddFunction(e){this.addFunctionCallback=e}onAddAggregation(e){this.addAggregationCallback=e}get dragHandler(){return this.shadowRoot.querySelector("#drag-handler")}get hasAnythingInBody(){var e;return(null===(e=this.filters)||void 0===e?void 0:e.length)>0||this.function||this.groupBy}get orderIcon(){return this.ordering>0?Lt:this.ordering<0?jt:Rt}get moreActionsButton(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#cxt-menu-action")}get cxtMenuCommands(){const e=[];return I("filter")&&e.push({content:"Add Filter",icon:xt,select:()=>this.addFilterCallback(this._id)}),I("function")&&!this.function&&e.push({content:"Add Function",icon:Pt,select:()=>this.addFunctionCallback(this._id)}),I("aggregation")&&!this.groupBy&&e.push({content:"Add Aggregation Function",icon:Ht,select:()=>this.addAggregationCallback(this._id)}),e.push({content:"Delete Field",icon:ht,select:()=>this.onDelete(this._id)}),e}}tn.properties={alias:{attribute:!1},graphElementId:{attribute:!1},function:{attribute:!1},_entityType:{type:String}},tn.styles=[e.baseStyle,ci(),ii,ue`
      :host {
        display:block;
        height: fit-content;
        margin:5px 0;
        position: relative;
        opacity:1;
        border: none;
        transition: all 0.5s;
        border-left: solid 2px;
      }

      :host(.dragged) {
        opacity: 0.2;
        border: solid 2px var(--gscape-color-accent);
      }

      #alias-input {
        flex-grow: 2;
      }

      #alias-input > input {
        width: 100%;
      }

      #field-head{
        display: flex;
        align-items: center;
        gap: 2px;
        padding-left: 20px;
      }

      #drag-handler {
        cursor: grab;
        display: none;
        line-height: 0;
        position: absolute;
        left: 0;
      }

      :host(:hover) #drag-handler {
        display: inline-block;
      }

      #field-head:hover > #actions {
        display: flex;
      }

      #field-head:hover > #state-tray {
        display: none;
      }

      #field-head-input-action-wrapper:hover > #state-tray {
        display: none;
      }
      #field-head-input-action-wrapper > input:focus {
        background-color: blue;
      }

      #actions {
        align-items: center;
        display: none;
      }

      #actions > * {
        line-height: 0;
      }

      .danger:hover {
        color: var(--gscape-color-error);
      }

      .filters-function-list {
        display:flex;
        flex-direction: column;
        gap: 20px;
      }

      #state-tray {
        color: var(--gscape-color-accent);
        line-height: 0;
      }

      #state-tray > svg {
        height: 15px;
        width: 15px;
      }

      summary {
        list-style: none
      }

      #drop-panel {
        padding: 8px;
        padding-right: 0;
      }

      .section {
        margin: 8px 0;
      }
    `],customElements.define("head-element",tn);class nn extends(e.BaseMixin(e.DropPanelMixin(pt))){constructor(){super(...arguments),this.title="Query Columns",this.headElements=[],this.isDefaultClosed=!1,this.togglePanel=()=>{super.togglePanel(),this.requestUpdate()}}render(){return this.title=S("queryHeadWidgetTitle")||"Query Columns",Qe`
      ${this.isPanelClosed()?Qe`
          <div class="top-bar traslated-down">
            <gscape-button 
              id="toggle-panel-button"
              @click=${this.togglePanel}
              label=${this.title}
            > 
              <span slot="icon">${vt}</span>
              <span slot="trailing-icon">${e.icons.plus}</span>
            </gscape-button>
          </div>
        `:null}

      <div class="gscape-panel" id="drop-panel" style="width: 100%; overflow-y:clip">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${vt}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.togglePanel}
          > 
            <span slot="icon">${e.icons.minus}</span>
          </gscape-button>
        </div>

      ${Ra()?Qe`
          <div class="blank-slate sparqling-blank-slate">
            ${kt}
            <div class="header">${((e="en")=>({en:"Count the number of results",it:"Conta il numero di risultati"}[e]))()}</div>
          </div>
        `:0===this.headElements.length?Qe`
            <div class="blank-slate sparqling-blank-slate">
              ${ft}
              <div class="header">${((e="en")=>({en:"Your query will output everything"}[e]))()}</div>
              <div class="tip description" title="${((e="en")=>({en:"The query head is the output of your query\nand it seems like you have nothing in it yet.\n\nWe don't think an empty query is what you want\nso your result now will be everything. \n\nYou can choose what to see in output from the\nquery graph, data properties \nwill automatically go in the query head."}[e]))()}">${((e="en")=>({en:"Why?",it:"Perch?"}[e]))()}</div>
            </div>
          `:Qe`
            <div id="elems-wrapper" @dragover=${Ki} @drop=${Ki}>
              ${this.headElements.map((e=>new tn(e)))}
            </div>
          `}
      </div>
    `}updated(){var e;null===(e=this.shadowRoot)||void 0===e||e.querySelectorAll("head-element").forEach((e=>{const t=e;t.onDelete=this.deleteElementCallback,t.onRename=this.renameElementCallback,t.onLocalize=this.localizeElementCallback,t.onAddFilter(this.addFilterCallback),t.onEditFilter(this.editFilterCallback),t.onDeleteFilter(this.deleteFilterCallback),t.onAddFunction(this.addFunctionCallback),t.onOrderBy=this.orderByChangeCallback,t.onAddAggregation(this.addAggregationCallback),t.showCxtMenu=()=>{t.moreActionsButton&&Ws.attachTo(t.moreActionsButton,t.cxtMenuCommands)},t.onmouseover=()=>this.highlightVariableCallback(t._id),t.onmouseout=()=>this.resetHighlightCallback(t._id)}))}onDelete(e){this.deleteElementCallback=e}onRename(e){this.renameElementCallback=e}onLocalize(e){this.localizeElementCallback=e}onAddFilter(e){this.addFilterCallback=e}onEditFilter(e){this.editFilterCallback=e}onDeleteFilter(e){this.deleteFilterCallback=e}onAddFunction(e){this.addFunctionCallback=e}onOrderByChange(e){this.orderByChangeCallback=e}onAddAggregation(e){this.addAggregationCallback=e}onHighlightVariable(e){this.highlightVariableCallback=e}onResetHighlightOnVariable(e){this.resetHighlightCallback=e}blur(){var e;null===(e=this.shadowRoot)||void 0===e||e.querySelectorAll("head-element").forEach((e=>{var t;null===(t=e.shadowRoot)||void 0===t||t.querySelectorAll("input").forEach((e=>e.blur()))}))}firstUpdated(){this.hide()}}nn.properties={headElements:{type:Object,attribute:!1}},nn.styles=[e.baseStyle,ii,ue`
      :host {
        position:initial;
        min-height: 30%;
        background: transparent;
        box-shadow: none;
        pointer-events: none;
      }

      #elems-wrapper {
        display: flex;
        height:inherit;
        flex-direction: column;
        overflow: hidden scroll;
        scrollbar-width: inherit;
        padding: 4px 8px;
      }

      .blank-slate {
        max-width: unset;
      }

      .tip {
        font-size: 90%;
        border-bottom: dotted 2px;
        cursor: help;
      }

      .tip: hover {
        color:inherit;
      }

      .top-bar.traslated-down {
        bottom: 10px;
        left: 0;
        transform: initial;
      }

      .gscape-panel {
        max-height: unset;
      }
    `],customElements.define("query-head",nn);const on=new nn;function rn(e){const i="string"==typeof e?[e]:e;sn(),Ms.loading=!0;for(let e of i){const i=wi();ka(e).then((e=>{var n,o,r,a,l,d;if(Ms.allHighlights={classes:(null===(n=e.classes)||void 0===n?void 0:n.map((e=>dn(e,i))).filter((e=>void 0!==e)))||[],dataProperties:(null===(o=e.dataProperties)||void 0===o?void 0:o.map((e=>dn(e,i))).filter((e=>void 0!==e)))||[],objectProperties:(null===(r=e.objectProperties)||void 0===r?void 0:r.map((e=>{var n;if(e.objectPropertyIRI){const o=i.ontology.getEntity(e.objectPropertyIRI);if(o){let r=s.grapholEntityToEntityViewData(o,i);return r=Object.assign(Object.assign({},r),{direct:e.direct,connectedClasses:(null===(n=e.relatedClasses)||void 0===n?void 0:n.map((e=>dn(e,i))).filter((e=>void 0!==e)))||[],disabled:ya(e.objectPropertyIRI,t.OBJECT_PROPERTY)}),r}}})).filter((e=>void 0!==e)))||[]},Ms.loading=!1,!Ya()){const t=Sa();let i=[];t&&(i=Hi(null==t?void 0:t.graphElement),i.forEach((e=>Gi(e)))),null===(a=null==e?void 0:e.classes)||void 0===a||a.forEach((e=>{t&&i.includes(e)||_i(e)})),null===(l=null==e?void 0:e.dataProperties)||void 0===l||l.forEach((e=>_i(e))),null===(d=null==e?void 0:e.objectProperties)||void 0===d||d.forEach((e=>_i(e.objectPropertyIRI))),qi()}}))}}function sn(){Ha=void 0,Ya()||ki(),Ms.allHighlights=void 0,ln()}function an(){let e=Sa();(null==e?void 0:e.graphElement)&&rn(Hi(e.graphElement))}function ln(){for(const e of function(e){switch(e){case q.Class:return pa.emptyUnfoldingClasses;case q.DataProperty:return pa.emptyUnfoldingDataProperties;case q.ObjectProperty:case q.InverseObjectProperty:return pa.emptyUnfoldingObjectProperties;default:return(new Array).concat(...pa.emptyUnfoldingClasses,...pa.emptyUnfoldingDataProperties,...pa.emptyUnfoldingObjectProperties)}}())Ni(e.entityIRI)}function dn(e,t){const i=t.ontology.getEntity(e);if(i){const e=s.grapholEntityToEntityViewData(i,t);return e.disabled=ya(i.iri.fullIri),e}}function cn(e){var t,i;e.graph||($a(void 0),Ta().clear(),sn(),wi().unselect(),hn.checked=!0,qs.checked=!1,Bs.queryName=void 0,gn.value="",vn.value="",Ya()&&_s.show()),Bs.canQueryRun=void 0!==(null===(t=e.graph)||void 0===t?void 0:t.id)&&!ra()&&void 0!==ol.onQueryRun;let o=Oa(e);ss.isBGPEmpty=null===o.graph||void 0===o.graph,ds(o.graph);var r;if(cs().forEach((e=>Ta().delete(e))),Vr(o.optionals),(r=null===(i=o.head)||void 0===i?void 0:i.map((e=>function(e){const t=JSON.parse(JSON.stringify(e));if(t.graphElementId){let e=Ci(t.graphElementId);if(e){const i=Si(e);if(i){const n=wi().ontology.getEntity(i);return t.entityType=Ii(e),t.dataType=t.entityType===q.DataProperty?null==n?void 0:n.datatype:null,t}}}return t}(e))))&&(on.headElements=r),Us.filterList=ja(Us.variable),Gs.text=(null==o?void 0:o.sparql)?o.sparql:gi(),hn.disabled=qs.disabled=gn.disabled=vn.disabled=!(null==e?void 0:e.graph),hn.disabled||hn.classList.add("actionable"),qs.disabled||qs.classList.add("actionable"),e.activeGraphElementId){const t=Ci(e.activeGraphElementId);if(t){const i=Si(t);i&&($a({graphElement:t,iri:new n(i,wi().ontology.namespaces)}),ls(e.activeGraphElementId),sn(),rn(Hi(t)))}}Xa(!0)}function pn(e){const t=Ia();if(!(null==t?void 0:t.graph))return;const i=e.currentTarget;if(i){let e=i.valueAsNumber;const n=new Y(void 0,ta());if(oi(i)&&e!==t.offset){if(isNaN(e)&&(e=-1,e===t.offset||!t.offset))return;Xs(n.offsetQueryGraph(e,t,oa())).then((e=>{cn(e)}))}else i.value=t.offset&&t.offset>0?t.offset.toString():""}}function un(e){const t=Ia();if(!(null==t?void 0:t.graph))return;const i=e.currentTarget;if(i){let e=i.valueAsNumber;const n=new Y(void 0,ta());if(oi(i)&&e!==t.limit){if(isNaN(e)&&(e=-1,e===t.limit||!t.limit))return;Xs(n.limitQueryGraph(e,t,oa())).then((e=>{cn(e)}))}else i.value=t.limit&&t.limit>0?t.limit.toString():""}}const hn=new e.GscapeToggle;hn.label="Distinct",hn.labelPosition=e.GscapeToggle.ToggleLabelPosition.LEFT,hn.classList.add("actionable"),hn.disabled=!0,hn.checked=!0,hn.onclick=e=>{e.preventDefault(),hn.disabled||(hn.checked=!hn.checked,Xs(new Y(void 0,ta()).distinctQueryGraph(!La(),Ia(),oa())).then((e=>{cn(e)})))};const gn=document.createElement("input");gn.placeholder="Num. of results",gn.type="number",gn.id="limit-input",gn.min="1",gn.disabled=!0,gn.onchange=un,gn.addEventListener("focusout",un),gn.onsubmit=un;const vn=document.createElement("input");let fn,mn,yn,bn,xn,wn,En,Cn;vn.placeholder="Offset",vn.type="number",vn.id="offset-input",vn.min="1",vn.disabled=!0,vn.onchange=pn,vn.addEventListener("focusout",pn),vn.onsubmit=pn;const On={content:((e="en")=>({en:"Add to Query Head",it:"Aggiungi in Query Head"}[e]))(),icon:Ot,select:()=>fn(Cn.id())},$n={content:((e="en")=>({en:"Delete",it:"Elimina"}[e]))(),icon:ht,select:()=>{Cn.isChild()?mn(Cn.id(),Cn.data().iri):mn(Cn.id())}},Sn={content:((e="en")=>({en:"Add Filter",it:"Aggiungi Filtro"}[e]))(),icon:xt,select:()=>yn(Cn.id())},In={content:((e="en")=>({en:"Make Optional",it:"Rendi Opzionale"}[e]))(),icon:$t,select:()=>xn(Cn.id())},Tn={content:((e="en")=>({en:"Remove Optional",it:"Rendi non Opzionale"}[e]))(),icon:qt,select:()=>wn(Cn.id())},An={content:"See Filters",icon:Et,select:()=>bn(Cn.id())},Pn={content:"Show Examples",icon:Vt,select:()=>En(Cn.id())};var Rn,Ln;f.use(b),f.use(y),f.use(x),f.use(m),f.use(w),f.use(E);const jn=f({wheelSensitivity:.4,maxZoom:2});let Hn,_n;function kn(){return Hn}function qn(e){_n=e||_n}function Gn(e){const t=jn.$id(e);return t.empty()?void 0:t}function Dn(){return jn.elements()}jn.mount(Fi),null===(Ln=null===(Rn=jn.container())||void 0===Rn?void 0:Rn.firstElementChild)||void 0===Ln||Ln.appendChild(Zi),jn.on("resize",(()=>{var e,t;null===(t=null===(e=jn.container())||void 0===e?void 0:e.firstElementChild)||void 0===t||t.appendChild(Zi)})),jn.on("render",(()=>{try{jn.renderer().hoverData.capture=!0}catch(e){}})),jn.on("mouseover","[iri], [?isSuggestion]",(()=>{const e=jn.container();e&&(e.style.cursor="pointer")})),jn.on("mouseout",(()=>{const e=jn.container();e&&(e.style.cursor="unset")})),jn.on("cxttap","[iri][!isSuggestion]",(e=>{Ws.attachTo(e.target.popperRef(),function(e){Cn=e;const t=[];return e.data().type===q.ObjectProperty||e.data().type===q.InverseObjectProperty?e.data().optional?t.push(Tn):t.push(In):(e.isChild()||(Pa("?"+e.id())||Ra()||t.push(On),e.data().hasFilters&&t.push(An),I("filter")&&t.push(Sn),ra()||e.data().type!==q.Class&&e.data().type!==q.DataProperty&&e.data().type!==q.Annotation||t.push(Pn),e.incomers().empty()||e.data().type===q.Class||(e.data().optional?t.push(Tn):t.push(In))),t.push($n)),t}(e.target))})),jn.on("tap",(t=>{t.target===jn&&Ya()&&wi().widgets.get(e.WidgetEnum.ENTITY_DETAILS).hide()})),jn.automove({nodesMatching:e=>jn.$(":grabbed").neighborhood(`[type = "${q.DataProperty}"],[type = "${q.Annotation}"]`).has(e),reposition:"drag",dragWith:`[type ="${q.Class}"]`});var Mn="top",Nn="bottom",Un="right",Vn="left",Qn=[Mn,Nn,Un,Vn],Bn=Qn.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),Fn=[].concat(Qn,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),zn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Zn(e){return e?(e.nodeName||"").toLowerCase():null}function Wn(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Jn(e){return e instanceof Wn(e).Element||e instanceof Element}function Yn(e){return e instanceof Wn(e).HTMLElement||e instanceof HTMLElement}function Xn(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Wn(e).ShadowRoot||e instanceof ShadowRoot)}var Kn={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var i=t.styles[e]||{},n=t.attributes[e]||{},o=t.elements[e];Yn(o)&&Zn(o)&&(Object.assign(o.style,i),Object.keys(n).forEach((function(e){var t=n[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach((function(e){var n=t.elements[e],o=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce((function(e,t){return e[t]="",e}),{});Yn(n)&&Zn(n)&&(Object.assign(n.style,r),Object.keys(o).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]};function eo(e){return e.split("-")[0]}var to=Math.max,io=Math.min,no=Math.round;function oo(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function ro(){return!/^((?!chrome|android).)*safari/i.test(oo())}function so(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=1,r=1;t&&Yn(e)&&(o=e.offsetWidth>0&&no(n.width)/e.offsetWidth||1,r=e.offsetHeight>0&&no(n.height)/e.offsetHeight||1);var s=(Jn(e)?Wn(e):window).visualViewport,a=!ro()&&i,l=(n.left+(a&&s?s.offsetLeft:0))/o,d=(n.top+(a&&s?s.offsetTop:0))/r,c=n.width/o,p=n.height/r;return{width:c,height:p,top:d,right:l+c,bottom:d+p,left:l,x:l,y:d}}function ao(e){var t=so(e),i=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:n}}function lo(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Xn(i)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function co(e){return Wn(e).getComputedStyle(e)}function po(e){return["table","td","th"].indexOf(Zn(e))>=0}function uo(e){return((Jn(e)?e.ownerDocument:e.document)||window.document).documentElement}function ho(e){return"html"===Zn(e)?e:e.assignedSlot||e.parentNode||(Xn(e)?e.host:null)||uo(e)}function go(e){return Yn(e)&&"fixed"!==co(e).position?e.offsetParent:null}function vo(e){for(var t=Wn(e),i=go(e);i&&po(i)&&"static"===co(i).position;)i=go(i);return i&&("html"===Zn(i)||"body"===Zn(i)&&"static"===co(i).position)?t:i||function(e){var t=/firefox/i.test(oo());if(/Trident/i.test(oo())&&Yn(e)&&"fixed"===co(e).position)return null;var i=ho(e);for(Xn(i)&&(i=i.host);Yn(i)&&["html","body"].indexOf(Zn(i))<0;){var n=co(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(e)||t}function fo(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function mo(e,t,i){return to(e,io(t,i))}function yo(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function bo(e,t){return t.reduce((function(t,i){return t[i]=e,t}),{})}var xo={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,n=e.name,o=e.options,r=i.elements.arrow,s=i.modifiersData.popperOffsets,a=eo(i.placement),l=fo(a),d=[Vn,Un].indexOf(a)>=0?"height":"width";if(r&&s){var c=function(e,t){return yo("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:bo(e,Qn))}(o.padding,i),p=ao(r),u="y"===l?Mn:Vn,h="y"===l?Nn:Un,g=i.rects.reference[d]+i.rects.reference[l]-s[l]-i.rects.popper[d],v=s[l]-i.rects.reference[l],f=vo(r),m=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,y=g/2-v/2,b=c[u],x=m-p[d]-c[h],w=m/2-p[d]/2+y,E=mo(b,w,x),C=l;i.modifiersData[n]=((t={})[C]=E,t.centerOffset=E-w,t)}},effect:function(e){var t=e.state,i=e.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&lo(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wo(e){return e.split("-")[1]}var Eo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Co(e){var t,i=e.popper,n=e.popperRect,o=e.placement,r=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,d=e.adaptive,c=e.roundOffsets,p=e.isFixed,u=s.x,h=void 0===u?0:u,g=s.y,v=void 0===g?0:g,f="function"==typeof c?c({x:h,y:v}):{x:h,y:v};h=f.x,v=f.y;var m=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=Vn,x=Mn,w=window;if(d){var E=vo(i),C="clientHeight",O="clientWidth";if(E===Wn(i)&&"static"!==co(E=uo(i)).position&&"absolute"===a&&(C="scrollHeight",O="scrollWidth"),o===Mn||(o===Vn||o===Un)&&"end"===r)x=Nn,v-=(p&&E===w&&w.visualViewport?w.visualViewport.height:E[C])-n.height,v*=l?1:-1;if(o===Vn||(o===Mn||o===Nn)&&"end"===r)b=Un,h-=(p&&E===w&&w.visualViewport?w.visualViewport.width:E[O])-n.width,h*=l?1:-1}var $,S=Object.assign({position:a},d&&Eo),I=!0===c?function(e){var t=e.x,i=e.y,n=window.devicePixelRatio||1;return{x:no(t*n)/n||0,y:no(i*n)/n||0}}({x:h,y:v}):{x:h,y:v};return h=I.x,v=I.y,l?Object.assign({},S,(($={})[x]=y?"0":"",$[b]=m?"0":"",$.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",$)):Object.assign({},S,((t={})[x]=y?v+"px":"",t[b]=m?h+"px":"",t.transform="",t))}var Oo={passive:!0};var $o={left:"right",right:"left",bottom:"top",top:"bottom"};function So(e){return e.replace(/left|right|bottom|top/g,(function(e){return $o[e]}))}var Io={start:"end",end:"start"};function To(e){return e.replace(/start|end/g,(function(e){return Io[e]}))}function Ao(e){var t=Wn(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Po(e){return so(uo(e)).left+Ao(e).scrollLeft}function Ro(e){var t=co(e),i=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+o+n)}function Lo(e){return["html","body","#document"].indexOf(Zn(e))>=0?e.ownerDocument.body:Yn(e)&&Ro(e)?e:Lo(ho(e))}function jo(e,t){var i;void 0===t&&(t=[]);var n=Lo(e),o=n===(null==(i=e.ownerDocument)?void 0:i.body),r=Wn(n),s=o?[r].concat(r.visualViewport||[],Ro(n)?n:[]):n,a=t.concat(s);return o?a:a.concat(jo(ho(s)))}function Ho(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _o(e,t,i){return"viewport"===t?Ho(function(e,t){var i=Wn(e),n=uo(e),o=i.visualViewport,r=n.clientWidth,s=n.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var d=ro();(d||!d&&"fixed"===t)&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+Po(e),y:l}}(e,i)):Jn(t)?function(e,t){var i=so(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):Ho(function(e){var t,i=uo(e),n=Ao(e),o=null==(t=e.ownerDocument)?void 0:t.body,r=to(i.scrollWidth,i.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=to(i.scrollHeight,i.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-n.scrollLeft+Po(e),l=-n.scrollTop;return"rtl"===co(o||i).direction&&(a+=to(i.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}(uo(e)))}function ko(e,t,i,n){var o="clippingParents"===t?function(e){var t=jo(ho(e)),i=["absolute","fixed"].indexOf(co(e).position)>=0&&Yn(e)?vo(e):e;return Jn(i)?t.filter((function(e){return Jn(e)&&lo(e,i)&&"body"!==Zn(e)})):[]}(e):[].concat(t),r=[].concat(o,[i]),s=r[0],a=r.reduce((function(t,i){var o=_o(e,i,n);return t.top=to(o.top,t.top),t.right=io(o.right,t.right),t.bottom=io(o.bottom,t.bottom),t.left=to(o.left,t.left),t}),_o(e,s,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function qo(e){var t,i=e.reference,n=e.element,o=e.placement,r=o?eo(o):null,s=o?wo(o):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(r){case Mn:t={x:a,y:i.y-n.height};break;case Nn:t={x:a,y:i.y+i.height};break;case Un:t={x:i.x+i.width,y:l};break;case Vn:t={x:i.x-n.width,y:l};break;default:t={x:i.x,y:i.y}}var d=r?fo(r):null;if(null!=d){var c="y"===d?"height":"width";switch(s){case"start":t[d]=t[d]-(i[c]/2-n[c]/2);break;case"end":t[d]=t[d]+(i[c]/2-n[c]/2)}}return t}function Go(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=void 0===n?e.placement:n,r=i.strategy,s=void 0===r?e.strategy:r,a=i.boundary,l=void 0===a?"clippingParents":a,d=i.rootBoundary,c=void 0===d?"viewport":d,p=i.elementContext,u=void 0===p?"popper":p,h=i.altBoundary,g=void 0!==h&&h,v=i.padding,f=void 0===v?0:v,m=yo("number"!=typeof f?f:bo(f,Qn)),y="popper"===u?"reference":"popper",b=e.rects.popper,x=e.elements[g?y:u],w=ko(Jn(x)?x:x.contextElement||uo(e.elements.popper),l,c,s),E=so(e.elements.reference),C=qo({reference:E,element:b,strategy:"absolute",placement:o}),O=Ho(Object.assign({},b,C)),$="popper"===u?O:E,S={top:w.top-$.top+m.top,bottom:$.bottom-w.bottom+m.bottom,left:w.left-$.left+m.left,right:$.right-w.right+m.right},I=e.modifiersData.offset;if("popper"===u&&I){var T=I[o];Object.keys(S).forEach((function(e){var t=[Un,Nn].indexOf(e)>=0?1:-1,i=[Mn,Nn].indexOf(e)>=0?"y":"x";S[e]+=T[i]*t}))}return S}function Do(e,t){void 0===t&&(t={});var i=t,n=i.placement,o=i.boundary,r=i.rootBoundary,s=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,d=void 0===l?Fn:l,c=wo(n),p=c?a?Bn:Bn.filter((function(e){return wo(e)===c})):Qn,u=p.filter((function(e){return d.indexOf(e)>=0}));0===u.length&&(u=p);var h=u.reduce((function(t,i){return t[i]=Go(e,{placement:i,boundary:o,rootBoundary:r,padding:s})[eo(i)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var Mo={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0===s||s,l=i.fallbackPlacements,d=i.padding,c=i.boundary,p=i.rootBoundary,u=i.altBoundary,h=i.flipVariations,g=void 0===h||h,v=i.allowedAutoPlacements,f=t.options.placement,m=eo(f),y=l||(m===f||!g?[So(f)]:function(e){if("auto"===eo(e))return[];var t=So(e);return[To(e),t,To(t)]}(f)),b=[f].concat(y).reduce((function(e,i){return e.concat("auto"===eo(i)?Do(t,{placement:i,boundary:c,rootBoundary:p,padding:d,flipVariations:g,allowedAutoPlacements:v}):i)}),[]),x=t.rects.reference,w=t.rects.popper,E=new Map,C=!0,O=b[0],$=0;$<b.length;$++){var S=b[$],I=eo(S),T="start"===wo(S),A=[Mn,Nn].indexOf(I)>=0,P=A?"width":"height",R=Go(t,{placement:S,boundary:c,rootBoundary:p,altBoundary:u,padding:d}),L=A?T?Un:Vn:T?Nn:Mn;x[P]>w[P]&&(L=So(L));var j=So(L),H=[];if(r&&H.push(R[I]<=0),a&&H.push(R[L]<=0,R[j]<=0),H.every((function(e){return e}))){O=S,C=!1;break}E.set(S,H)}if(C)for(var _=function(e){var t=b.find((function(t){var i=E.get(t);if(i)return i.slice(0,e).every((function(e){return e}))}));if(t)return O=t,"break"},k=g?3:1;k>0;k--){if("break"===_(k))break}t.placement!==O&&(t.modifiersData[n]._skip=!0,t.placement=O,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function No(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function Uo(e){return[Mn,Un,Nn,Vn].some((function(t){return e[t]>=0}))}var Vo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.offset,r=void 0===o?[0,0]:o,s=Fn.reduce((function(e,i){return e[i]=function(e,t,i){var n=eo(e),o=[Vn,Mn].indexOf(n)>=0?-1:1,r="function"==typeof i?i(Object.assign({},t,{placement:e})):i,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[Vn,Un].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}(i,t.rects,r),e}),{}),a=s[t.placement],l=a.x,d=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=s}};var Qo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,n=e.name,o=i.mainAxis,r=void 0===o||o,s=i.altAxis,a=void 0!==s&&s,l=i.boundary,d=i.rootBoundary,c=i.altBoundary,p=i.padding,u=i.tether,h=void 0===u||u,g=i.tetherOffset,v=void 0===g?0:g,f=Go(t,{boundary:l,rootBoundary:d,padding:p,altBoundary:c}),m=eo(t.placement),y=wo(t.placement),b=!y,x=fo(m),w="x"===x?"y":"x",E=t.modifiersData.popperOffsets,C=t.rects.reference,O=t.rects.popper,$="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,S="number"==typeof $?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(E){if(r){var A,P="y"===x?Mn:Vn,R="y"===x?Nn:Un,L="y"===x?"height":"width",j=E[x],H=j+f[P],_=j-f[R],k=h?-O[L]/2:0,q="start"===y?C[L]:O[L],G="start"===y?-O[L]:-C[L],D=t.elements.arrow,M=h&&D?ao(D):{width:0,height:0},N=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=N[P],V=N[R],Q=mo(0,C[L],M[L]),B=b?C[L]/2-k-Q-U-S.mainAxis:q-Q-U-S.mainAxis,F=b?-C[L]/2+k+Q+V+S.mainAxis:G+Q+V+S.mainAxis,z=t.elements.arrow&&vo(t.elements.arrow),Z=z?"y"===x?z.clientTop||0:z.clientLeft||0:0,W=null!=(A=null==I?void 0:I[x])?A:0,J=j+F-W,Y=mo(h?io(H,j+B-W-Z):H,j,h?to(_,J):_);E[x]=Y,T[x]=Y-j}if(a){var X,K="x"===x?Mn:Vn,ee="x"===x?Nn:Un,te=E[w],ie="y"===w?"height":"width",ne=te+f[K],oe=te-f[ee],re=-1!==[Mn,Vn].indexOf(m),se=null!=(X=null==I?void 0:I[w])?X:0,ae=re?ne:te-C[ie]-O[ie]-se+S.altAxis,le=re?te+C[ie]+O[ie]-se-S.altAxis:oe,de=h&&re?function(e,t,i){var n=mo(e,t,i);return n>i?i:n}(ae,te,le):mo(h?ae:ne,te,h?le:oe);E[w]=de,T[w]=de-te}t.modifiersData[n]=T}},requiresIfExists:["offset"]};function Bo(e,t,i){void 0===i&&(i=!1);var n,o,r=Yn(t),s=Yn(t)&&function(e){var t=e.getBoundingClientRect(),i=no(t.width)/e.offsetWidth||1,n=no(t.height)/e.offsetHeight||1;return 1!==i||1!==n}(t),a=uo(t),l=so(e,s,i),d={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!i)&&(("body"!==Zn(t)||Ro(a))&&(d=(n=t)!==Wn(n)&&Yn(n)?{scrollLeft:(o=n).scrollLeft,scrollTop:o.scrollTop}:Ao(n)),Yn(t)?((c=so(t,!0)).x+=t.clientLeft,c.y+=t.clientTop):a&&(c.x=Po(a))),{x:l.left+d.scrollLeft-c.x,y:l.top+d.scrollTop-c.y,width:l.width,height:l.height}}function Fo(e){var t=new Map,i=new Set,n=[];function o(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!i.has(e)){var n=t.get(e);n&&o(n)}})),n.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){i.has(e.name)||o(e)})),n}var zo={placement:"bottom",modifiers:[],strategy:"absolute"};function Zo(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Wo(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,n=void 0===i?[]:i,o=t.defaultOptions,r=void 0===o?zo:o;return function(e,t,i){void 0===i&&(i=r);var o,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},zo,r),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],d=!1,c={state:a,setOptions:function(i){var o="function"==typeof i?i(a.options):i;p(),a.options=Object.assign({},r,a.options,o),a.scrollParents={reference:Jn(e)?jo(e):e.contextElement?jo(e.contextElement):[],popper:jo(t)};var s,d,u=function(e){var t=Fo(e);return zn.reduce((function(e,i){return e.concat(t.filter((function(e){return e.phase===i})))}),[])}((s=[].concat(n,a.options.modifiers),d=s.reduce((function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e}),{}),Object.keys(d).map((function(e){return d[e]}))));return a.orderedModifiers=u.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,i=e.options,n=void 0===i?{}:i,o=e.effect;if("function"==typeof o){var r=o({state:a,name:t,instance:c,options:n}),s=function(){};l.push(r||s)}})),c.update()},forceUpdate:function(){if(!d){var e=a.elements,t=e.reference,i=e.popper;if(Zo(t,i)){a.rects={reference:Bo(t,vo(i),"fixed"===a.options.strategy),popper:ao(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var o=a.orderedModifiers[n],r=o.fn,s=o.options,l=void 0===s?{}:s,p=o.name;"function"==typeof r&&(a=r({state:a,options:l,name:p,instance:c})||a)}else a.reset=!1,n=-1}}},update:(o=function(){return new Promise((function(e){c.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(o())}))}))),s}),destroy:function(){p(),d=!0}};if(!Zo(e,t))return c;function p(){l.forEach((function(e){return e()})),l=[]}return c.setOptions(i).then((function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)})),c}}var Jo=Wo({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,n=e.options,o=n.scroll,r=void 0===o||o,s=n.resize,a=void 0===s||s,l=Wn(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach((function(e){e.addEventListener("scroll",i.update,Oo)})),a&&l.addEventListener("resize",i.update,Oo),function(){r&&d.forEach((function(e){e.removeEventListener("scroll",i.update,Oo)})),a&&l.removeEventListener("resize",i.update,Oo)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=qo({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,n=i.gpuAcceleration,o=void 0===n||n,r=i.adaptive,s=void 0===r||r,a=i.roundOffsets,l=void 0===a||a,d={placement:eo(t.placement),variation:wo(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Co(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Co(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Kn,Vo,Mo,Qo,xo,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,n=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,s=Go(t,{elementContext:"reference"}),a=Go(t,{altBoundary:!0}),l=No(s,n),d=No(a,o,r),c=Uo(l),p=Uo(d);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}}]}),Yo={passive:!0,capture:!0},Xo=function(){return document.body};function Ko(e,t,i){if(Array.isArray(e)){var n=e[t];return null==n?Array.isArray(i)?i[t]:i:n}return e}function er(e,t){var i={}.toString.call(e);return 0===i.indexOf("[object")&&i.indexOf(t+"]")>-1}function tr(e,t){return"function"==typeof e?e.apply(void 0,t):e}function ir(e,t){return 0===t?e:function(n){clearTimeout(i),i=setTimeout((function(){e(n)}),t)};var i}function nr(e){return[].concat(e)}function or(e,t){-1===e.indexOf(t)&&e.push(t)}function rr(e){return[].slice.call(e)}function sr(e){return Object.keys(e).reduce((function(t,i){return void 0!==e[i]&&(t[i]=e[i]),t}),{})}function ar(){return document.createElement("div")}function lr(e){return["Element","Fragment"].some((function(t){return er(e,t)}))}function dr(e){return lr(e)?[e]:function(e){return er(e,"NodeList")}(e)?rr(e):Array.isArray(e)?e:rr(document.querySelectorAll(e))}function cr(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function pr(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function ur(e,t,i){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[n](t,i)}))}function hr(e,t){for(var i=t;i;){var n;if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var gr={isTouch:!1},vr=0;function fr(){gr.isTouch||(gr.isTouch=!0,window.performance&&document.addEventListener("mousemove",mr))}function mr(){var e=performance.now();e-vr<20&&(gr.isTouch=!1,document.removeEventListener("mousemove",mr)),vr=e}function yr(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var i=t._tippy;t.blur&&!i.state.isVisible&&t.blur()}}var br=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,xr=Object.assign({appendTo:Xo,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),wr=Object.keys(xr);function Er(e){var t=(e.plugins||[]).reduce((function(t,i){var n,o=i.name,r=i.defaultValue;o&&(t[o]=void 0!==e[o]?e[o]:null!=(n=xr[o])?n:r);return t}),{});return Object.assign({},e,t)}function Cr(e,t){var i=Object.assign({},t,{content:tr(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(Er(Object.assign({},xr,{plugins:t}))):wr).reduce((function(t,i){var n=(e.getAttribute("data-tippy-"+i)||"").trim();if(!n)return t;if("content"===i)t[i]=n;else try{t[i]=JSON.parse(n)}catch(e){t[i]=n}return t}),{})}(e,t.plugins));return i.aria=Object.assign({},xr.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}function Or(e,t){e.innerHTML=t}function $r(e){var t=ar();return!0===e?t.className="tippy-arrow":(t.className="tippy-svg-arrow",lr(e)?t.appendChild(e):Or(t,e)),t}function Sr(e,t){lr(t.content)?(Or(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?Or(e,t.content):e.textContent=t.content)}function Ir(e){var t=e.firstElementChild,i=rr(t.children);return{box:t,content:i.find((function(e){return e.classList.contains("tippy-content")})),arrow:i.find((function(e){return e.classList.contains("tippy-arrow")||e.classList.contains("tippy-svg-arrow")})),backdrop:i.find((function(e){return e.classList.contains("tippy-backdrop")}))}}function Tr(e){var t=ar(),i=ar();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=ar();function o(i,n){var o=Ir(t),r=o.box,s=o.content,a=o.arrow;n.theme?r.setAttribute("data-theme",n.theme):r.removeAttribute("data-theme"),"string"==typeof n.animation?r.setAttribute("data-animation",n.animation):r.removeAttribute("data-animation"),n.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?r.setAttribute("role",n.role):r.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||Sr(s,e.props),n.arrow?a?i.arrow!==n.arrow&&(r.removeChild(a),r.appendChild($r(n.arrow))):r.appendChild($r(n.arrow)):a&&r.removeChild(a)}return n.className="tippy-content",n.setAttribute("data-state","hidden"),Sr(n,e.props),t.appendChild(i),i.appendChild(n),o(e.props,e.props),{popper:t,onUpdate:o}}Tr.$$tippy=!0;var Ar=1,Pr=[],Rr=[];function Lr(e,t){var i,n,o,r,s,a,l,d,c=Cr(e,Object.assign({},xr,Er(sr(t)))),p=!1,u=!1,h=!1,g=!1,v=[],f=ir(z,c.interactiveDebounce),m=Ar++,y=(d=c.plugins).filter((function(e,t){return d.indexOf(e)===t})),b={id:m,reference:e,popper:ar(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(o)},setProps:function(t){if(b.state.isDestroyed)return;j("onBeforeUpdate",[b,t]),B();var i=b.props,n=Cr(e,Object.assign({},i,sr(t),{ignoreAttributes:!0}));b.props=n,Q(),i.interactiveDebounce!==n.interactiveDebounce&&(k(),f=ir(z,n.interactiveDebounce));i.triggerTarget&&!n.triggerTarget?nr(i.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):n.triggerTarget&&e.removeAttribute("aria-expanded");_(),L(),E&&E(i,n);b.popperInstance&&(Y(),K().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));j("onAfterUpdate",[b,t])},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,i=!b.state.isEnabled,n=gr.isTouch&&!b.props.touch,o=Ko(b.props.duration,0,xr.duration);if(e||t||i||n)return;if(T().hasAttribute("disabled"))return;if(j("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,I()&&(w.style.visibility="visible");L(),M(),b.state.isMounted||(w.style.transition="none");if(I()){var r=P(),s=r.box,l=r.content;cr([s,l],0)}a=function(){var e;if(b.state.isVisible&&!g){if(g=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,I()&&b.props.animation){var t=P(),i=t.box,n=t.content;cr([i,n],o),pr([i,n],"visible")}H(),_(),or(Rr,b),null==(e=b.popperInstance)||e.forceUpdate(),j("onMount",[b]),b.props.animation&&I()&&function(e,t){U(e,t)}(o,(function(){b.state.isShown=!0,j("onShown",[b])}))}},function(){var e,t=b.props.appendTo,i=T();e=b.props.interactive&&t===Xo||"parent"===t?i.parentNode:tr(t,[i]);e.contains(w)||e.appendChild(w);b.state.isMounted=!0,Y()}()},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,i=!b.state.isEnabled,n=Ko(b.props.duration,1,xr.duration);if(e||t||i)return;if(j("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,g=!1,p=!1,I()&&(w.style.visibility="hidden");if(k(),N(),L(!0),I()){var o=P(),r=o.box,s=o.content;b.props.animation&&(cr([r,s],n),pr([r,s],"hidden"))}H(),_(),b.props.animation?I()&&function(e,t){U(e,(function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(n,b.unmount):b.unmount()},hideWithInteractivity:function(e){A().addEventListener("mousemove",f),or(Pr,f),f(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;X(),K().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);Rr=Rr.filter((function(e){return e!==b})),b.state.isMounted=!1,j("onHidden",[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),B(),delete e._tippy,b.state.isDestroyed=!0,j("onDestroy",[b])}};if(!c.render)return b;var x=c.render(b),w=x.popper,E=x.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,e._tippy=b,w._tippy=b;var C=y.map((function(e){return e.fn(b)})),O=e.hasAttribute("aria-expanded");return Q(),_(),L(),j("onCreate",[b]),c.showOnCreate&&ee(),w.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",f)})),b;function $(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function S(){return"hold"===$()[0]}function I(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function T(){return l||e}function A(){var e,t,i=T().parentNode;return i?null!=(t=nr(i)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function P(){return Ir(w)}function R(e){return b.state.isMounted&&!b.state.isVisible||gr.isTouch||r&&"focus"===r.type?0:Ko(b.props.delay,e?0:1,xr.delay)}function L(e){void 0===e&&(e=!1),w.style.pointerEvents=b.props.interactive&&!e?"":"none",w.style.zIndex=""+b.props.zIndex}function j(e,t,i){var n;(void 0===i&&(i=!0),C.forEach((function(i){i[e]&&i[e].apply(i,t)})),i)&&(n=b.props)[e].apply(n,t)}function H(){var t=b.props.aria;if(t.content){var i="aria-"+t.content,n=w.id;nr(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(i);if(b.state.isVisible)e.setAttribute(i,t?t+" "+n:n);else{var o=t&&t.replace(n,"").trim();o?e.setAttribute(i,o):e.removeAttribute(i)}}))}}function _(){!O&&b.props.aria.expanded&&nr(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===T()?"true":"false"):e.removeAttribute("aria-expanded")}))}function k(){A().removeEventListener("mousemove",f),Pr=Pr.filter((function(e){return e!==f}))}function q(t){if(!gr.isTouch||!h&&"mousedown"!==t.type){var i=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!hr(w,i)){if(nr(b.props.triggerTarget||e).some((function(e){return hr(e,i)}))){if(gr.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),u=!0,setTimeout((function(){u=!1})),b.state.isMounted||N())}}}function G(){h=!0}function D(){h=!1}function M(){var e=A();e.addEventListener("mousedown",q,!0),e.addEventListener("touchend",q,Yo),e.addEventListener("touchstart",D,Yo),e.addEventListener("touchmove",G,Yo)}function N(){var e=A();e.removeEventListener("mousedown",q,!0),e.removeEventListener("touchend",q,Yo),e.removeEventListener("touchstart",D,Yo),e.removeEventListener("touchmove",G,Yo)}function U(e,t){var i=P().box;function n(e){e.target===i&&(ur(i,"remove",n),t())}if(0===e)return t();ur(i,"remove",s),ur(i,"add",n),s=n}function V(t,i,n){void 0===n&&(n=!1),nr(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,i,n),v.push({node:e,eventType:t,handler:i,options:n})}))}function Q(){var e;S()&&(V("touchstart",F,{passive:!0}),V("touchend",Z,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(V(e,F),e){case"mouseenter":V("mouseleave",Z);break;case"focus":V(br?"focusout":"blur",W);break;case"focusin":V("focusout",W)}}))}function B(){v.forEach((function(e){var t=e.node,i=e.eventType,n=e.handler,o=e.options;t.removeEventListener(i,n,o)})),v=[]}function F(e){var t,i=!1;if(b.state.isEnabled&&!J(e)&&!u){var n="focus"===(null==(t=r)?void 0:t.type);r=e,l=e.currentTarget,_(),!b.state.isVisible&&er(e,"MouseEvent")&&Pr.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||p)&&!1!==b.props.hideOnClick&&b.state.isVisible?i=!0:ee(e),"click"===e.type&&(p=!i),i&&!n&&te(e)}}function z(e){var t=e.target,i=T().contains(t)||w.contains(t);if("mousemove"!==e.type||!i){var n=K().concat(w).map((function(e){var t,i=null==(t=e._tippy.popperInstance)?void 0:t.state;return i?{popperRect:e.getBoundingClientRect(),popperState:i,props:c}:null})).filter(Boolean);(function(e,t){var i=t.clientX,n=t.clientY;return e.every((function(e){var t=e.popperRect,o=e.popperState,r=e.props.interactiveBorder,s=o.placement.split("-")[0],a=o.modifiersData.offset;if(!a)return!0;var l="bottom"===s?a.top.y:0,d="top"===s?a.bottom.y:0,c="right"===s?a.left.x:0,p="left"===s?a.right.x:0,u=t.top-n+l>r,h=n-t.bottom-d>r,g=t.left-i+c>r,v=i-t.right-p>r;return u||h||g||v}))})(n,e)&&(k(),te(e))}}function Z(e){J(e)||b.props.trigger.indexOf("click")>=0&&p||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function W(e){b.props.trigger.indexOf("focusin")<0&&e.target!==T()||b.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||te(e)}function J(e){return!!gr.isTouch&&S()!==e.type.indexOf("touch")>=0}function Y(){X();var t=b.props,i=t.popperOptions,n=t.placement,o=t.offset,r=t.getReferenceClientRect,s=t.moveTransition,l=I()?Ir(w).arrow:null,d=r?{getBoundingClientRect:r,contextElement:r.contextElement||T()}:e,c={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(I()){var i=P().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?i.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?i.setAttribute("data-"+e,""):i.removeAttribute("data-"+e)})),t.attributes.popper={}}}},p=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},c];I()&&l&&p.push({name:"arrow",options:{element:l,padding:3}}),p.push.apply(p,(null==i?void 0:i.modifiers)||[]),b.popperInstance=Jo(d,w,Object.assign({},i,{placement:n,onFirstUpdate:a,modifiers:p}))}function X(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function K(){return rr(w.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&j("onTrigger",[b,e]),M();var t=R(!0),n=$(),o=n[0],r=n[1];gr.isTouch&&"hold"===o&&r&&(t=r),t?i=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),j("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&p)){var t=R(!1);t?n=setTimeout((function(){b.state.isVisible&&b.hide()}),t):o=requestAnimationFrame((function(){b.hide()}))}}else N()}}function jr(e,t){void 0===t&&(t={});var i=xr.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",fr,Yo),window.addEventListener("blur",yr);var n=Object.assign({},t,{plugins:i}),o=dr(e).reduce((function(e,t){var i=t&&Lr(t,n);return i&&e.push(i),e}),[]);return lr(e)?o[0]:o}jr.defaultProps=xr,jr.setDefaultProps=function(e){Object.keys(e).forEach((function(t){xr[t]=e[t]}))},jr.currentInput=gr,Object.assign({},Kn,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}});var Hr={name:"sticky",defaultValue:!1,fn:function(e){var t=e.reference,i=e.popper;function n(t){return!0===e.props.sticky||e.props.sticky===t}var o=null,r=null;function s(){var a=n("reference")?(e.popperInstance?e.popperInstance.state.elements.reference:t).getBoundingClientRect():null,l=n("popper")?i.getBoundingClientRect():null;(a&&_r(o,a)||l&&_r(r,l))&&e.popperInstance&&e.popperInstance.update(),o=a,r=l,e.state.isMounted&&requestAnimationFrame(s)}return{onMount:function(){e.props.sticky&&s()}}}};function _r(e,t){return!e||!t||(e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left)}jr.setDefaultProps({render:Tr});const kr=`\n  <div style="\n    color: var(--gscape-color-accent);\n    background: var(--gscape-color-accent-subtle);\n    border: solid 1px;\n    line-height: 0;\n    padding: 2px 4px;\n    margin: 0 8px;\n    border-radius: 12px;"\n  >\n    ${Ct.strings.join("").replace(/20px/g,"15px")}\n  </div>`;function qr(e){var t;null===(t=e.scratch().tippy)||void 0===t||t.destroy(),e.removeScratch("tippy")}function Gr(e){!function(e){return(null==e?void 0:e.data().hasFilters)&&!e.scratch().tippy}(e)?(null==e?void 0:e.data().hasFilters)||qr(e):function(e){const t=document.createElement("div");Zi&&(e.scratch("tippy",jr(t,{content:kr,trigger:"manual",hideOnClick:!1,allowHTML:!0,getReferenceClientRect:e.popperRef().getBoundingClientRect,sticky:"reference",appendTo:Zi,placement:"right",plugins:[Hr],offset:[0,0]})),e.scratch().tippy.show())}(e)}const Dr={name:"klay",klay:{spacing:80,fixedAlignment:"BALANCED",nodePlacement:"LINEAR_SEGMENTS",thoroughness:10}};let Mr;function Nr(e){var t,i,n,o;if(!e||!e.id)return;const r=Qr(e),s=Gn(e.id);let a;s?(e.entities&&(null===(n=e.entities)||void 0===n?void 0:n.length)>1&&(null===(o=e.entities)||void 0===o||o.forEach(((t,i)=>{(null==s?void 0:s.children().some((e=>e[0].data("iri")===t.iri)))||(a=jn.add({data:Qr(e,i)}),Ur())}))),s.removeData(),s.data(r)):(a=jn.add({data:r}),e.entities&&(null===(t=e.entities)||void 0===t?void 0:t.length)>1&&(null===(i=e.entities)||void 0===i||i.forEach(((t,i)=>{(null==a?void 0:a.children().some((e=>e[0].data("iri")===t.iri)))||(jn.add({data:Qr(e,i)}),Ur())}))),Ur()),a=a||s,a&&Gr(a)}function Ur(){const e=`node[type = "${q.DataProperty}"][!isSuggestion]`,t=`node[type = "${q.Annotation}"][!isSuggestion]`,i=`node[type = "${q.Class}"][!isSuggestion]`;if(Dn().length<=1){const e=jn.container();return void(e&&0!==e.clientHeight&&0!==e.clientWidth&&(e.style.visibility="hidden",setTimeout((()=>{jn.fit(),e.style.visibility="visible"}),200)))}const n=jn.elements().difference(`${e},${t}`).layout(Dr);n.on("layoutstop",(()=>{jn.$(i).forEach((i=>{const n=i.neighborhood(`${e},${t}`);i.isChildless()||i.children().layout(function(e){const t=e.position();return{name:"grid",condense:!0,padding:10,fit:!1,cols:2,boundingBox:{x1:t.x-20,x2:t.x+20,y1:t.y-20,y2:t.y+20}}}(i)).run(),n.empty()||n.layout(function(e){const t=e.position(),i=Math.sqrt(Math.pow(e.width()/2,2)+Math.pow(e.height()/2,2))+20;return{name:"circle",avoidOverlap:!1,fit:!1,boundingBox:{x1:t.x-2,x2:t.x+2,y1:t.y-2,y2:t.y+2},startAngle:-Math.PI/2,radius:i,nodeDimensionsIncludeLabels:!0}}(i)).run()})),jn.fit()})),n.run()}function Vr(e){Dn().filter("[?optional]").data("optional",!1),null==e||e.forEach((e=>{var t;null===(t=e.graphIds)||void 0===t||t.forEach((e=>{var t;return null===(t=Gn(e))||void 0===t?void 0:t.data("optional",!0)}))}))}function Qr(e,t){var i;if(e.entities&&e.id){let n=Object.assign({},e.entities[t||0]);null!=t?(n.parent=e.id,n.id=`${e.id}-${n.iri}`):n.id=e.id;const o=null===(i=ja(e.id))||void 0===i?void 0:i.length;return n.hasFilters=!!(o&&o>0),n.displayed_name=Br(n),n.width=60,n}}function Br(e){let t=e.labels;const i=kn();return i===a.LABEL&&t&&Object.keys(t).length>0?t[_n]||t[Object.keys(t)[0]]:i===a.FULL_IRI?e.iri:e.prefixedIri||e.iri}jn.on("tap","node, edge",(e=>{if(Object.values(q).includes(e.target.data().type)){let t=e.target.isChild()?e.target.data().parent:e.target.id();Mr(t,e.target.data().iri)}}));const{DataProperty:Fr,Class:zr,ObjectProperty:Zr,InverseObjectProperty:Wr,Annotation:Jr}=q;function Yr(e,t){Hn=e||Hn,t&&qn(t),jn.elements("[displayed_name]").forEach((e=>{e.data("displayed_name",Br(e.data()))}))}function Xr(e){var t;jn.style([{selector:"*",style:{color:(t=e).getColour(o.label),"border-width":"1px","font-size":"8px"}},{selector:`node[type = "${zr}"][!isSuggestion]`,style:{shape:"round-rectangle","background-color":t.getColour(o.class),"border-color":t.getColour(o.class_contrast),"text-halign":"center","text-valign":"center",width:60,height:30}},{selector:"edge[!isSuggestion]",style:{"line-style":"solid","target-arrow-shape":"triangle","target-arrow-fill":"filled","curve-style":"bezier","text-rotation":"autorotate","text-margin-y":-10,width:2}},{selector:"[displayed_name]",style:{"text-wrap":"wrap","text-max-width":"60px",label:"data(displayed_name)"}},{selector:`edge[type = "${Fr}"]`,style:{"curve-style":"straight","target-arrow-shape":"none","line-color":t.getColour(o.data_property_contrast)}},{selector:`node[type = "${Fr}"][!isSuggestion]`,style:{shape:"ellipse",height:10,width:10,"background-color":t.getColour(o.data_property),"border-color":t.getColour(o.data_property_contrast)}},{selector:`edge[type = "${Zr}"], edge[type = "${Wr}"]`,style:{"line-color":t.getColour(o.object_property_contrast),"target-arrow-color":t.getColour(o.object_property_contrast),"source-arrow-color":t.getColour(o.object_property_contrast),"text-max-width":"60px"}},{selector:`node[type = "${Jr}"]`,style:{shape:"ellipse",height:10,width:10,"background-color":t.id===l.GRAPHOL?t.getColour(o.data_property):"#EDCF9A","border-color":t.id===l.GRAPHOL?t.getColour(o.data_property_contrast):"#DC8D00"}},{selector:`edge[type = "${Jr}"]`,style:{"curve-style":"straight","target-arrow-shape":"none","line-color":t.id===l.GRAPHOL?t.getColour(o.data_property_contrast):"#DC8D00"}},{selector:`edge[type = "${Wr}"]`,style:{"target-arrow-shape":"none","source-arrow-shape":"triangle","source-arrow-fill":"filled"}},{selector:".cdnd-drop-target[!isSuggestion]",style:{"background-color":t.getColour(o.bg_inset),"border-style":"dashed","border-color":t.getColour(o.accent_muted),shape:"round-rectangle",label:"Release to join these classes","font-size":"12px"}},{selector:"[?optional]",style:{opacity:.8}},{selector:"node[?optional]",style:{"border-style":"dashed"}},{selector:"edge[?optional]",style:{"line-style":"dashed"}},{selector:"$node > node",style:{label:""}},{selector:":active",style:{"overlay-opacity":.2,"overlay-padding":"4px","overlay-color":t.getColour(o.accent_muted)}},{selector:`.${Ba}`,style:{"border-color":t.getColour(o.accent),"border-width":4,padding:4}},{selector:".highlight",style:{"underlay-color":t.getColour(o.accent_muted),"underlay-padding":"8px","underlay-opacity":.6}}]);const i=jn.container(),n=e.getColour(o.bg_graph);i&&n&&(i.style.background=n)}let Kr,es,ts;jn.on("cdnddrop",((e,t,i)=>{t.empty()||i.empty()||(i.move({parent:null}),e.target.move({parent:null}),t.remove(),ts(e.target.id(),i.id()))}));const is={grabbedNode:e=>Kr(e.id()),dropTarget:e=>es(null==e?void 0:e.id(),jn.$(":grabbed").id()),dropSibling:(e,t)=>es(null==e?void 0:e.id(),jn.$(":grabbed").id())};jn.compoundDragAndDrop(is);class ns extends(e.BaseMixin(e.DropPanelMixin(pt))){constructor(t){super(),this._isBGPEmpty=!0,this._withoutBGP=!1,this.isDefaultClosed=!1,this.onQueryClear=()=>{},this.onSparqlButtonClick=()=>{},this.onFullScreenEnter=()=>{},this.onCenterDiagram=()=>{},this.title="Query Graph",this.cxtMenuCommands=[{content:"Export as PNG",icon:e.icons.save,select:()=>d(`query-graph-${ia()}`,jn,wi().theme.getColour(o.bg_graph))},{content:"Export as SVG",icon:e.icons.save,select:()=>c(`query-graph-${ia()}`,jn,wi().theme.getColour(o.bg_graph))}],this.bgpContainer=t}render(){return this.title=S("queryGraphWidgetTitle")||"Query Graph",Qe`
      ${this.isPanelClosed()?Qe`
          <div class="top-bar traslated-down">
            <gscape-button 
              id="toggle-panel-button"
              @click=${this.togglePanel}
              label=${this.title}
            > 
              <span slot="icon">${mt}</span>
              <span slot="trailing-icon">${e.icons.plus}</span>
            </gscape-button>
          </div>
        `:null}

      <div class="gscape-panel" id="drop-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${mt}
            <span>${this.title}</span>
          </div>

          <div id="buttons-tray">
            ${I("distinct")?hn:null}
            ${I("countStar")?qs:null}
            ${pi("Clear Query",Tt,void 0,"clear-query-btn",this.onQueryClear)}
            ${pi("View SPARQL Code",gt,void 0,"sparql-code-btn",this.onSparqlButtonClick)}
            ${pi("Center Query Graph",e.icons.centerDiagram,void 0,"center-btn",this.onCenterDiagram)}
            ${Ya()?null:pi("Fullscreen",e.icons.enterFullscreen,void 0,"fullscreen-btn",this.onFullScreenEnter)}
            ${pi("More actions",Gt,void 0,"cxt-menu-action",this.showCxtMenu)}
          </div>

          ${this.withoutBGP?null:Qe`
              <gscape-button 
                id="toggle-panel-button"
                size="s"
                type="subtle"
                @click=${this.togglePanel}
              > 
                <span slot="icon">${e.icons.minus}</span>
              </gscape-button>
            `}
        </div>

        ${this.withoutBGP?null:Qe`
            ${this.isBGPEmpty?Qe`
                  <div class="blank-slate sparqling-blank-slate">
                    ${_t}
                    <div class="header">${((e="en")=>({en:"Double click on a class to add it to the query"}[e]))()}</div>
                    <div class="tip description" title="${((e="en")=>({en:"The query graph is the set of conditions\nyou specify to be satisfied by results.\n\nIf you add a class (e.g. Person), only\ninstances belonging to that class will\nbe included in the results (e.g. only persons). \n\nIf you then add a object property \ninvolving that class (e.g. hasCar), results will now\ninclude only those participating in such relationship\n(e.g. only persons having a Car)."}[e]))()}">${((e="en")=>({en:"What is a Query Graph?",it:"Cos' il Query Graph?"}[e]))()}</div>
                  </div>
                `:this.bgpContainer}
          `}
      </div>
    `}onTogglePanel(){this.isPanelClosed()?this.style.height="fit-content":this.style.height="30%"}firstUpdated(){this.hide()}createRenderRoot(){const e=super.createRenderRoot();return e.addEventListener("mouseover",(e=>{try{jn.renderer().hoverData.capture=!0}catch(e){}})),e}blur(){}set isBGPEmpty(e){this._isBGPEmpty=e}updated(e){if(e.has("_isBGPEmpty")||!this.isPanelClosed()){const e=jn.container();e&&(jn.mount(e),jn.resize(),jn.updateStyle(),jn.fit())}}showCxtMenu(){this.moreActionsButton&&(Ws.showFirst="elements",Ws.attachTo(this.moreActionsButton,this.cxtMenuCommands,this.cxtMenuElements))}get moreActionsButton(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#cxt-menu-action")}get isBGPEmpty(){return this._isBGPEmpty}get clearQueryButton(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#clear-query-btn")}get withoutBGP(){return this._withoutBGP}set withoutBGP(e){this._withoutBGP=e,e?(this.openPanel(),this.style.height="fit-content"):this.style.height="30%"}get cxtMenuElements(){const e=[];return I("limit")&&e.push(gn),I("offset")&&e.push(vn),e}}function os(e){!function(e){xn=e}((t=>{const i=Ci(t);i&&e(i)}))}function rs(e){!function(e){wn=e}((t=>{const i=Ci(t);i&&e(i)}))}ns.properties={_isBGPEmpty:{attribute:!1,type:Boolean},_withoutBGP:{reflect:!0,type:Boolean}},ns.styles=[e.baseStyle,ii,ue`
      :host {
        width: calc(50%);
        height: 30%;
        position: absolute;
        left: 50%;
        top: 100%;
        transform: translate(-50%, calc(-100% - 10px));
        pointer-events: none;
      }

      :host([withoutBGP]) {
        height: unset;
      }

      .top-bar {
        z-index: 1;
      }
      
      .tip {
        border-bottom: dotted 2px;
        cursor: help;
      }

      .tip: hover {
        color:inherit;
      }

      .input-elem {
        color: inherit;
        padding: 5px;
        border: none;
        border-bottom: solid 1px var(--gscape-color-border-default);
        max-width: 50px;
      }

      :host([withoutBGP]) > .gscape-panel {
        padding: 0;
        overflow: unset;
      }

      :host([withoutBGP]) > .gscape-panel > .top-bar {
        position: initial;
        border-radius: var(--gscape-border-radius);
      }

      .gscape-panel {
        max-height: unset;
      }
    `],customElements.define("query-graph",ns);const ss=new ns(Fi);var as;function ls(e){let t=Ci(e)||Oi(e);return(null==t?void 0:t.id)&&function(e){Dn().removeClass("sparqling-selected");let t=jn.$id(e);t.addClass("sparqling-selected")}(t.id),t}function ds(e,t,i){var n,o;if(e)return Ri(e)||(Nr(e),t&&function(e,t,i){let n;if(!t.id||!t.entities)return;Gn(t.id)||Nr(t),n=i?Qr(i):{id:`${e.id}-${t.id}`,type:t.entities[0].type};const o=Gn(n.id);o?o.move({source:e.id,target:t.id}):(n.source=e.id,n.target=t.id,jn.add({data:n}),Ur())}(t,e,i)),Ri(e)?null===(n=e.children)||void 0===n||n.forEach((i=>ds(i,t,e))):null===(o=e.children)||void 0===o||o.forEach((t=>ds(t,e))),jn}function cs(){let e=[];return Dn().forEach((t=>{const i=Ci(t.id());t.data("displayed_name")&&!i&&(t.isChild()&&Oi(t.data("iri"))||(e.push(t.id()),function(e){const t=Gn(e);if(t&&!t.empty()){if(qr(t),t.isChild()){const e=t.parent();2===e.children().length&&e.children().each((e=>{e.remove()}))}t.remove()}}(t.id())))})),e}function ps(e){if(e.id){let t=Gn(e.id);t&&function(e,t){let i=e.cy();t&&i.zoom(t);let n=e.renderedPosition(),o=i.width()/2,r=i.height()/2;i.panBy({x:-(n.x-o),y:-(n.y-r)})}(t,t.cy().maxZoom())}}function us(e){jn.unmount(),jn.mount(e),jn.resize(),jn.fit()}function hs(e){!function(e){fn=e}((t=>{const i=Ci(t);i&&e(i)}))}function gs(e){!function(e){mn=e}(((t,i)=>{const n=Ci(t)||function(e){var t;const i=e.split("-"),n=i[0],o=i[1];return $i(null===(t=Ia())||void 0===t?void 0:t.graph,(e=>Ti(e,o)&&e.id===n))}(t);n&&e(n,i)}))}function vs(e){!function(e){yn=e}((t=>{const i=Ci(t);i&&e(i)}))}function fs(e){!function(e){bn=e}((t=>{const i=Ci(t);i&&e(i)}))}function ms(e){!function(e){En=e}((t=>{const i=Ci(t);i&&e(i)}))}function ys(e){!function(e){ts=e}(((t,i)=>{let n=Ci(t),o=Ci(i);n&&o&&e(n,o)}))}function bs(e){!function(e){Mr=e}(((t,i)=>{const n=Ci(t);n&&e(n,i)}))}function xs(e){return!!Oi(e)}function ws(e){const t="string"==typeof e?Ci(e):e;(null==t?void 0:t.id)&&jn.$id(t.id).addClass("highlight")}function Es(e){const t="string"==typeof e?Ci(e):e;(null==t?void 0:t.id)?jn.$id(t.id).removeClass("highlight"):jn.$(".highlight").removeClass("highlight")}as=e=>{const t=Ci(e);return!!t&&function(e){var t;return!!e&&1===(null===(t=e.entities)||void 0===t?void 0:t.length)&&Ai(e)}(t)},Kr=as,function(e){es=e}(((e,t)=>{let i=Ci(e),n=Ci(t);return!(!i||!n)&&function(e,t){if(!e||!t)return!1;const i=Ai(t)&&Ai(e),n=Si(t),o=!!n&&Ti(e,n);return i&&o}(i,n)}));var Cs=Object.freeze({__proto__:null,widget:ss,selectElement:ls,render:ds,removeNodesNotInQuery:cs,centerOnElem:ps,getSelectedGraphElement:function(){var e;return Ci(null===(e=Dn().filter(".sparqling-selected")[0])||void 0===e?void 0:e.id())},setContainer:us,unmount:function(){jn.unmount()},onAddHead:hs,onDelete:gs,onAddFilter:vs,onSeeFilters:fs,onShowExamples:ms,onJoin:ys,onElementClick:bs,isIriInQueryGraph:xs,highlightNode:ws,resetHighlight:Es,renderOptionals:Vr,setLanguage:qn,onMakeOptional:os,onRemoveOptional:rs,setDisplayedNameType:Yr,setTheme:Xr});function Os(e){zi.style.bottom=e?"40px":"0",zi.style.height=e?"calc(100% - 80px)":"calc(100% - 40px)"}let $s={};function Ss(){var t,i;const n=wi();Ja(!1),ss.withoutBGP=!1,us(Fi),setTimeout((()=>jn.fit()),500),!n.renderState||!p().selectedRenderer&&n.renderers.length>1?(null===(t=n.widgets.get(e.WidgetEnum.INITIAL_RENDERER_SELECTOR))||void 0===t||t.show(),n.showDiagram(0)):void 0!==n.diagramId&&n.renderer.diagram?(n.renderer.cy=null===(i=n.renderer.diagram.representations.get(n.renderState))||void 0===i?void 0:i.cy,n.renderer.mount()):n.showDiagram(0),function(t){let i;Object.entries($s).forEach((([n,o])=>{o.enabled&&n!==e.WidgetEnum.OWL_VISUALIZER&&(i=t.widgets.get(n),i.enable(),o.visible||i.hide(),n===e.WidgetEnum.ENTITY_DETAILS&&(i.showOccurrences=!0))}))}(n),_s.hide(),n.renderer.cy&&Vi(n.renderer.cy,Bi(n.theme)),Xr(n.theme),Ms.style.marginTop="60px",an(),Bs.ontologyGraphEnabled=!0,localStorage.setItem("obda-systems.sparqling-ontologyGraph","true")}function Is(){const t=wi();Ja(!0),t.renderer.stopRendering(),function(t){let i;t.widgets.forEach(((t,n)=>{switch(i=t,$s[n]={enabled:i.enabled,visible:i.isVisible},n){case e.WidgetEnum.DIAGRAM_SELECTOR:case e.WidgetEnum.RENDERER_SELECTOR:case e.WidgetEnum.FILTERS:case e.WidgetEnum.ONTOLOGY_EXPLORER:case e.WidgetEnum.OWL_VISUALIZER:case e.WidgetEnum.COLOR_BUTTON:case e.WidgetEnum.ENTITY_COLOR_LEGEND:i.disable();break;case e.WidgetEnum.ENTITY_DETAILS:i.showOccurrences=!1}}))}(t),us(t.renderer.container),ss.withoutBGP=!0,t.renderer.cy=jn;const i=Ia();i&&i.graph&&i.graph.id||(_s.classes=Hs(wi()),_s.show()),Ms.style.marginTop="10px",Os(t.widgets.get(e.WidgetEnum.COLOR_BUTTON).active),Bs.ontologyGraphEnabled=!1,localStorage.setItem("obda-systems.sparqling-ontologyGraph","false")}class Ts extends(e.BaseMixin(e.DropPanelMixin(pt))){constructor(){super(...arguments),this.id="sparqling-start-run-widget",this.isLoading=!1,this.canQueryRun=!1,this.endpoints=[],this.showResultsEnabled=!1,this.allowOntologyGraph=!0,this.ontologyGraphEnabled=!1,this._onSparqlingStartCallback=()=>{},this._onSparqlingStopCallback=()=>{},this._onQueryRunCallback=()=>{},this._onQuerySaveCallback=()=>{},this._onShowSettingsCallback=()=>{},this._onEndpointChangeCallback=e=>{},this._onShowResults=()=>{},this._onToggleCatalog=()=>{}}render(){return Qe`
      <div id="widget-body" class="gscape-panel">
        <div id="widget-header" style="${ra()?null:"margin-left: 8px"}">
          ${ra()?Qe`
              <gscape-button
                @click="${this.handleStartButtonCLick}" 
                type="subtle"
                title="Start/Stop Sparqling"
                ?active=${Za()}
                label="Sparqling"
              >
                <span slot="icon">
                  ${this.isLoading?Zt():bi}
                </span>
              </gscape-button>
            `:Qe`
                ${this.isLoading?Qe`${Zt()}`:null}
                <div class="bold-text">
                  ${this.queryName||"new_query"}${Ua?"*":null}
                </div>
                <div class="hr"></div>
            `}
        </div>

        ${ra()?null:Qe`            
            <gscape-button
              @click=${this._onToggleCatalog}
              type="subtle"
              title="Toggle query catalog"
            >
              <span slot="icon">${zt}</span>
            </gscape-button>

            <div class="hr"></div>

            <gscape-button
              @click="${this._onQuerySaveCallback}"
              type="subtle"
              title="Save query in catalog"
            >
              <span slot="icon">${e.icons.save}</span>
            </gscape-button>

            <div class="hr"></div>   

            <gscape-button
              @click="${this._onShowSettingsCallback}"
              type="subtle"
              title="Edit query metadata"
            >
              <span slot="icon">${Bt}</span>
            </gscape-button>

            <div class="hr"></div>

            <gscape-button
              @click=${this.togglePanel}
              type="subtle"
              title="Select Mastro endpoint"
            >
              <span slot="icon">${Qt}</span>
            </gscape-button>

            <div class="hr"></div>

            <gscape-button
              @click="${this._onQueryRunCallback}"
              type="subtle"
              title="Run query"
              ?disabled=${!this.canQueryRun}
            >
              <span slot="icon">${It}</span>
            </gscape-button>

            ${this.showResultsEnabled?Qe`
                <gscape-button
                  @click="${this._onShowResults}"
                  type="subtle"
                  size="s"
                  title="Show results drawer"
                  label="Stored Results"
                >
                </gscape-button>
              `:null}

            <div class="hr"></div>

            ${this.allowOntologyGraph?Qe`<gscape-toggle
                class="actionable"
                label="Ontology Graph"
                ?checked=${this.ontologyGraphEnabled}
                @click=${e=>{e.preventDefault(),Ya()?Ss():Is()}}
              ></gscape-toggle>`:void 0}
          `}
      </div>

      <div class="gscape-panel drop-down hide" id="drop-panel">
        <div class="header">Endpoint Selector</div>
        <div class="content-wrapper">
          ${this.endpoints.map((e=>Qe`
              <gscape-action-list-item
                @click=${this.handleEndpointClick}
                label="${e.name}"
                ?selected = "${this.selectedEndpointName===e.name}"
              >
              </gscape-action-list-item>
            `))}

          ${0===this.endpoints.length?Qe`
              <div class="blank-slate">
                ${e.icons.searchOff}
                <div class="header">No endpoint available</div>
              </div>
            `:null}
        </div>
      </div>
    `}onSparqlingStart(e){this._onSparqlingStartCallback=e}onSparqlingStop(e){this._onSparqlingStopCallback=e}onQueryRun(e){this._onQueryRunCallback=e}onQuerySave(e){this._onQuerySaveCallback=e}onShowSettings(e){this._onShowSettingsCallback=e}onEndpointChange(e){this._onEndpointChangeCallback=e}onShowResults(e){this._onShowResults=e}onToggleCatalog(e){this._onToggleCatalog=e}requestEndpointSelection(){return new Promise(((e,t)=>{const i=this._onEndpointChangeCallback;this.openPanel(),this.onEndpointChange((n=>{const o=this.endpoints.find((e=>e.name===n));o?e(o):t(),i(n),this._onEndpointChangeCallback=i}))}))}handleEndpointClick(e){e.currentTarget.label&&e.currentTarget.label!==this.selectedEndpointName&&this._onEndpointChangeCallback(e.currentTarget.label)}handleStartButtonCLick(){Ya()||(Za()?this._onSparqlingStopCallback():this._onSparqlingStartCallback())}startLoadingAnimation(){this.isLoading=!0}stopLoadingAnimation(){this.isLoading=!1}get startButton(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("")}}Ts.properties={canQueryRun:{type:Boolean,attribute:!1},isLoading:{type:Boolean,attribute:!1},endpoints:{type:Object,attribute:!1},selectedEndpointName:{type:String,attribute:!1},queryName:{type:String,attribute:!1},showResultsEnabled:{type:Boolean,attribute:!1},ontologyGraphEnabled:{type:Boolean},allowOntologyGraph:{type:Boolean}},Ts.styles=[e.GscapeButtonStyle,e.baseStyle,Wt,ue`
      :host {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translate(-50%);
      }

      #widget-body, #widget-header {
        display: flex;
        align-items: center;
        padding: 0;
        min-width: unset;
      }

      #widget-header {
        gap: 8px;
      }

      #drop-panel {
        margin: 4px auto 0;
      }

      .header {
        text-align: center;
      }

      .hr {
        background-color: var(--gscape-color-border-subtle);
        width: 1px;
        height: 1.7em;
      }

      .gscape-panel {
        max-width: unset;
      }
    `],customElements.define("sparqling-start-run-buttons",Ts);class As extends si{constructor(){super()}render(){return this.title=`${this.modality} function for ${this.variableName}`,Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${Pt}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        <div class="dialog-body">
          ${ai(this,this.operators)}
          
          <div class="bottom-buttons">
            <gscape-button label="Cancel" @click=${this.hide}></gscape-button>
            ${this.canSave?Qe`
                <gscape-button type="primary" @click=${this.handleSubmit} label="Save Function"></gscape-button>
              `:null}
          </div>
        </div>
      </div>
    `}onSubmit(e){this.submitCallback=e}setAsCorrect(e){super.setAsCorrect(e),this.canSave=!1}get operators(){switch(this.datatypeFromOntology){case Q.String:return this.operatorsOnString;case Q.Decimal:case"xsd:int":case"xsd:float":case"xsd:long":case"xsd:double":case"xsd:integer":case"xsd:short":case"xsd:unsignedInt":case"xsd:unsignedLong":case"xsd:unsignedShort":return this.operatorsOnNumber;case Q.DateTime:return this.operatorsOnDate;default:return Object.values(D)}}get operatorsOnString(){return[D.Concat,D.Contains,D.Lcase,D.Substr,D.Ucase,D.Strlen,D.Strstarts,D.Strends,D.Strbefore,D.Strafter]}get operatorsOnNumber(){return[D.Add,D.Subctract,D.Multiply,D.Divide,D.Round,D.Ceil,D.Floor]}get operatorsOnDate(){return[D.Year,D.Month,D.Day,D.Hours,D.Minutes,D.Seconds]}}customElements.define("sparqling-function-dialog",As);class Ps extends si{constructor(){super(...arguments),this.definingHaving=!1,this.distinct=!1,this.formTitle="Having"}static get properties(){const e=super.properties,t={definingHaving:{type:Boolean,state:!0},distinct:{type:Boolean,state:!0}};return Object.assign(e,t)}render(){return this.title=`${this.modality} aggregate function for ${this.variableName}`,Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${Ht}
            <span>${this.title}</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        <div class="dialog-body">
          <div style="text-align: center;">
            <div id="select-aggregate-function">
              ${li(this.aggregateOperator||"Aggregate Function",Object.values(M))}
            </div>
            <div style="margin: 10px 0">
              <label>
                <input id="distinct-checkbox" type="checkbox" @click="${this.onDistinctChange}" ?checked=${this.distinct}>
                Only distinct values
              </label>
            </div>
          </div>
          <div class="hr"></div>
          ${this.definingHaving?ai(this,Object.values(G)):Qe`
                <gscape-button title="Add Having" label="Filter Groups - Having" @click=${this.handleHavingButtonClick}>
                  <span slot="icon">${xt}</span>
                </gscape-button>
                <div id="message-tray"></div>
              `}
          
          <div class="bottom-buttons">
            <gscape-button label="Cancel" @click=${this.hide}></gscape-button>
            ${this.canSave?Qe`
                <gscape-button type="primary" @click=${this.handleSubmit} label="Save Function"></gscape-button>
              `:null}
          </div>
        </div>
      </div>
    `}handleHavingButtonClick(){this.definingHaving=!0}handleSubmit(){ri(this.selectAggregateOperatorElem)&&(this.definingHaving?super.handleSubmit():this.onValidSubmit())}onValidSubmit(){this._id&&this.aggregateOperator&&this.parameters&&this.submitCallback(this._id,this.aggregateOperator,this.distinct,this.operator,this.parameters)}onSubmit(e){this.submitCallback=e}setAsCorrect(e){super.setAsCorrect(e),this.canSave=!1}get operators(){return Object.values(G)}firstUpdated(e){super.firstUpdated(e),this.selectAggregateOperatorElem&&(this.selectAggregateOperatorElem.onchange=()=>this.onAggregateOperatorChange(this.selectAggregateOperatorElem.value))}onAggregateOperatorChange(e){this.aggregateOperator=e}onDistinctChange(e){this.distinct=e.target.checked}get isAggregateOperatorValid(){return this.aggregateOperator&&Object.values(M).includes(this.aggregateOperator)}get selectAggregateOperatorElem(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#select-aggregate-function > select")}get distinctCheckboxElem(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#distinct-checkbox")}get datatype(){return super.datatype}set datatype(e){super.datatype=e}}customElements.define("sparqling-aggregation-dialog",Ps);class Rs extends(e.ModalMixin(e.BaseMixin(pt))){constructor(){super(...arguments),this.errorText=""}render(){return Qe`
      <div class="gscape-panel">
        <div class="top-bar">
          <div id="widget-header" class="bold-text">
            ${Nt}
            <span>Error</span>
          </div>

          <gscape-button 
            id="toggle-panel-button"
            size="s" 
            type="subtle"
            @click=${this.hide}
          > 
            <span slot="icon">${e.icons.close}</span>
          </gscape-button>
        </div>

        <div class="dialog-body">${this.errorText}</div>
      </div>
    `}firstUpdated(e){super.firstUpdated(e),this.hide()}}Rs.properties={errorText:{attribute:!1,type:String}},Rs.styles=[e.baseStyle,ii,ue`
      .gscape-panel {
        position: absolute;
        top: 100px;
        left: 50%;
        transform: translate(-50%, 0);
        height: unset;
      }

      .dialog-body {
        display: flex;
        flex-direction: column;
        gap: 30px;
        align-items: center;
        min-width: 350px;
        max-width: 450px;
        padding: 16px 8px;
        background: var(--gscape-color-danger-subtle);
        white-space: pre-line;
        border-bottom-right-radius: inherit;
        border-bottom-left-radius: inherit;
      }

      .dialog-body, #widget-header {
        color: var(--gscape-color-danger);
      }
    `],customElements.define("error-dialog",Rs);class Ls extends(e.ModalMixin(e.BaseMixin(pt))){constructor(){super(...arguments),this.isLoading=!1,this.title="Query Results Preview",this.searchExamplesCallback=()=>{}}render(){return Qe`
    <div class="gscape-panel">
      <div class="top-bar">
        <div id="widget-header" class="bold-text">
          ${Vt}
          <span>${this.title}</span>
        </div>

        <gscape-button 
          id="toggle-panel-button"
          size="s" 
          type="subtle"
          @click=${this.hide}
          title="Close"
        > 
          <span slot="icon">${e.icons.close}</span>
        </gscape-button>
      </div>

      <div class="dialog-body">
        ${this.result||this.isLoading?null:Qe`<div class="danger">Select Endpoint</div>`}
        ${this.result?Qe`
            ${this.allowSearch?Qe`
                <input id="search-examples-input" placeholder="Search Examples" type="text" value=${this.examplesSearchValue} />
              `:null}
            ${Jt(this.result)}
          `:null}
        ${this.isLoading?Zt():null}
      </div>
    </div>
    `}onSearchExamples(e){this.searchExamplesCallback=e}firstUpdated(e){super.firstUpdated(e),this.hide()}updated(e){this.allowSearch&&this.searchExamplesInput&&(this.searchExamplesInput.onchange=()=>{this.examplesSearchValue=this.searchExamplesInput.value},this.searchExamplesInput.onkeyup=e=>{"Enter"===e.key&&this.searchExamplesCallback()})}get searchExamplesInput(){var e;return null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#search-examples-input")}}Ls.properties={result:{attribute:!1},isLoading:{attribute:!1,type:Boolean},allowSearch:{type:Boolean},exampleSearchValue:{type:String}},Ls.styles=[e.baseStyle,Wt,ii,Xt,ue`
      .gscape-panel {
        position: absolute;
        top: 100px;
        left: 50%;
        transform: translate(-50%, 0);
        min-width: 200px;
        max-width: 800px;
        height: unset;
      }

      .dialog-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
        padding: 8px;
        max-height: 400px;
        overflow: scroll;
        scrollbar-width: inherit;
      }

      .gscape-panel {
        max-height: 450px;
      }

      .danger {
        color: var(--gscape-color-danger);
        padding: 8px;
      }
    `],customElements.define("sparqling-preview-dialog",Ls);class js extends(e.BaseMixin(pt)){render(){return Qe`
      <div class="gscape-panel">
        <div class="header">Sparqling is loading...</div>
        <div class="spinner">${Zt()}</div>
      </div>
    `}firstUpdated(e){this.hide()}}function Hs(i){return e.createEntitiesList(i,{[t.CLASS]:1,areAllFiltersDisabled:!1}).map((e=>(e.disabled=ya(e.value.iri.fullIri,q.Class),e)))}js.styles=[Wt,e.baseStyle,ue`
      :host {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 100;
      }

      .lds-ring {
        width: 30px;
        height: 30px;
      }

      .lds-ring div {
        width: 26px;
        height: 26px;
      }

      .spinner {
        display: flex;
        padding: 8px;
        justify-content: center;
      }
    `],customElements.define("sparqling-loading-dialog",js);const _s=new e.IncrementalInitialMenu;_s.hide();const ks=new e.GscapeToggle;ks.label="Count Results",ks.labelPosition=e.GscapeToggle.ToggleLabelPosition.LEFT,ks.classList.add("actionable"),ks.disabled=!0,ks.onclick=e=>{e.preventDefault(),ks.disabled||(ks.checked=!ks.checked,Xs(new Y(void 0,ta()).countStarQueryGraph(!Ra(),Ia(),oa())).then((e=>{cn(e)})))};var qs=ks;const Gs=new yi,Ds=new mi,Ms=new fi,Ns=new di,Us=new hi,Vs=new As,Qs=new Ps,Bs=new Ts,Fs=new Rs,zs=new Ls,Zs=new js,Ws=new e.GscapeContextMenu,Js=new e.GscapeButton;function Ys(e){return!e||1===(null==e?void 0:e.code)||"error"===(null==e?void 0:e.type)}function Xs(t,i=!0){return new Promise((function(n){Ea(!0),setTimeout((()=>{da&&Zs.show()}),500),wa+=1,Bs.startLoadingAnimation(),t.then((e=>{if(Ys(e.data))throw new Error(function(e){if(Ys(e))return e.message}(e.data));n(e.data)})).catch((t=>{if(console.error(t),i){let i=`${t.name}: ${t.message}`;if(t.response)if(401===t.response.status){const e=document.getElementById("logout");null==e||e.click()}else t.response.data&&(i+=`\n\nServer message: ${t.response.data}`);e.showMessage(i,"Error",wi().uiContainer,"error")}})).finally((()=>(wa-=1,void(0===wa&&(Ea(!1),Zs.hide(),Bs.stopLoadingAnimation())))))}))}Js.innerHTML=`<span slot="icon">${e.icons.exitFullscreen.strings.join("")}</span>`,Js.style.position="absolute",Js.style.top="10px",Js.style.right="10px";let Ks={basePath:void 0,version:void 0,headers:void 0,name:void 0};function ea(e){Ks=e}function ta(){return Ks.basePath}function ia(){return Ks.name}function na(){return Ks.headers}function oa(){return{params:{version:Ks.version},headers:Ks.headers}}function ra(){return!Ks.basePath}var sa,aa;!function(e){e.RUNNNING="RUNNING",e.STOPPED="STOPPED"}(sa||(sa={})),function(e){e.FINISHED="FINISHED",e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR"}(aa||(aa={}));let la,da,ca=[],pa={emptyUnfoldingClasses:[],emptyUnfoldingDataProperties:[],emptyUnfoldingObjectProperties:[]};function ua(){return ca.sort(((e,t)=>e.name.localeCompare(t.name)))}function ha(){return C(this,void 0,void 0,(function*(){if(ra())return;const e={method:"get",url:`${localStorage.getItem("mastroUrl")}/endpoints/running`};Object.assign(e,oa()),ca=(yield Xs(v.request(e))).endpoints.filter((e=>e.mastroID.ontologyID.ontologyName===ia()&&e.mastroID.ontologyID.ontologyVersion===Ks.version)),la&&ca.map((e=>e.name)).includes(la.name)?yield ma():yield fa(ca[0])}))}function ga(){return C(this,void 0,void 0,(function*(){return!!la&&function(e){return C(this,void 0,void 0,(function*(){const t={method:"get",url:`${localStorage.getItem("mastroUrl")}/endpoint/${e.name}/status`};return Object.assign(t,oa()),(yield Xs(v.request(t))).status.status===sa.RUNNNING}))}(la)}))}function va(){return la}function fa(e){return C(this,void 0,void 0,(function*(){la=e,yield ma()}))}function ma(){return C(this,void 0,void 0,(function*(){if(la){const e={method:"get",url:`${localStorage.getItem("mastroUrl")}/endpoint/${la.name}/emptyUnfoldingEntities`};Object.assign(e,oa()),yield Xs(v.request(e)).then((e=>{pa=e}))}}))}function ya(e,i){let n=[];switch(i){case t.CLASS:case q.Class:n=n.concat(...pa.emptyUnfoldingClasses);break;case t.DATA_PROPERTY:case q.DataProperty:n=n.concat(...pa.emptyUnfoldingDataProperties);break;case t.OBJECT_PROPERTY:case q.ObjectProperty:case q.InverseObjectProperty:n=n.concat(...pa.emptyUnfoldingObjectProperties);break;default:n=n.concat(...pa.emptyUnfoldingClasses,...pa.emptyUnfoldingDataProperties,...pa.emptyUnfoldingObjectProperties)}return n.some((t=>t.entityIRI===e||t.entityPrefixIRI===e))}let ba,xa,wa=0;function Ea(e){da=e}const Ca=new Map;function Oa(e){return ba=e,ba}function $a(e){xa=e,ba.activeGraphElementId=null==e?void 0:e.graphElement.id}function Sa(){return xa}function Ia(){return ba}function Ta(){return Ca}function Aa(){return JSON.parse(JSON.stringify(ba))}function Pa(e,t=ba){var i;return null===(i=null==t?void 0:t.head)||void 0===i?void 0:i.find((t=>t.id===e))}function Ra(){return(null==ba?void 0:ba.count_star)||!1}function La(){return(null==ba?void 0:ba.distinct)||!1}function ja(e){var t;const i=Ia();let n=null===(t=null==i?void 0:i.filters)||void 0===t?void 0:t.map(((e,t)=>({id:t,value:e})));return null==n?void 0:n.filter((t=>{var i;if(null===(i=t.value.expression)||void 0===i?void 0:i.parameters)return t.value.expression.parameters[0].type===N&&t.value.expression.parameters[0].value===e}))}let Ha,_a;function ka(e){return C(this,void 0,void 0,(function*(){const t=new F(void 0,ta()),i=yield Xs(t.highligths(e,void 0,oa()));if(Ha){if(i.classes&&Ha.classes&&(Ha.classes=Array.from(new Set([...Ha.classes,...i.classes]))),i.dataProperties&&Ha.dataProperties&&(Ha.dataProperties=Array.from(new Set([...Ha.dataProperties,...i.dataProperties]))),i.objectProperties&&Ha.objectProperties){const e=[];for(let t of i.objectProperties)Ha.objectProperties.every((e=>e.objectPropertyIRI!==t.objectPropertyIRI))&&e.push(t);Ha.objectProperties.push(...e)}}else Ha=i,Ha.classes=i.classes||[],Ha.dataProperties=i.dataProperties||[],Ha.objectProperties=i.objectProperties||[];return Ha}))}function qa(){return Ha}function Ga(e){var t,i,n;return(null===(t=null==Ha?void 0:Ha.classes)||void 0===t?void 0:t.includes(e))||(null===(i=null==Ha?void 0:Ha.dataProperties)||void 0===i?void 0:i.includes(e))||(null===(n=null==Ha?void 0:Ha.objectProperties)||void 0===n?void 0:n.some((t=>t.objectPropertyIRI===e)))}let Da,Ma=!1,Na=!1,Ua=!0;const Va="highlighted",Qa="faded",Ba="sparqling-selected";function Fa(){return _a}function za(e){_a=e}function Za(){return Ma}function Wa(e){Ma=e}function Ja(e){Na=e}function Ya(){return Na}function Xa(e){Ua=e}function Ka(){O={},ca=[],la=void 0,pa={emptyUnfoldingClasses:[],emptyUnfoldingDataProperties:[],emptyUnfoldingObjectProperties:[]},Oa({head:[],graph:null,sparql:""}),$a(void 0),da=!1,wa=0,ea({basePath:void 0,version:void 0,headers:void 0,name:void 0})}function el(){ss.hide(),on.hide(),Ms.hide(),Gs.hide(),Ds.hide(),Ns.hide(),Us.hide(),Fs.hide()}function tl(){return C(this,void 0,void 0,(function*(){let t=Promise.resolve();if(ra()){const e=new se,n=Fa();yield n.text().then((n=>C(this,void 0,void 0,(function*(){yield Xs(e.standaloneOntologyGrapholGet()).then((o=>{n.trim()===o.trim()?i():(t=Xs(e.standaloneOntologyUploadPost(Fa())),t.then((e=>i())))}))}))))}return t.then((e=>i())),t;function i(){var t,i,n;const o=wi().widgets.get(e.WidgetEnum.OWL_VISUALIZER);var r;r=o.enabled,Da=r,o.disable();const s=wi().widgets.get(e.WidgetEnum.COLOR_BUTTON),a=wi().widgets.get(e.WidgetEnum.ENTITY_COLOR_LEGEND);if(s){const e=s.onclick;s.onclick=t=>{e&&e(t),Os(s.active)},Os(s.active),null==a||a.closePanel()}el(),ss.show(),on.show(),Ms.show(),Wa(!0),Bs.canQueryRun=(null===(t=Ia())||void 0===t?void 0:t.graph)&&!ra()&&void 0!==ol.onQueryRun,Bs.endpoints=ua(),Bs.selectedEndpointName=null===(i=va())||void 0===i?void 0:i.name,Bs.showResultsEnabled=!1,Bs.requestUpdate();const l=null===(n=Sa())||void 0===n?void 0:n.graphElement;l&&rn(Hi(l)),ol.onStart()}}))}function il(){Za()&&(el(),function(){for(const e of xi.ontology.diagrams)for(const[t,i]of e.representations)i.cy.elements().unselect()}(),sn(),wi().widgets.get(e.WidgetEnum.ENTITY_DETAILS).hide(),Wa(!1),Bs.canQueryRun=!1,Bs.requestUpdate(),Da&&wi().widgets.get(e.WidgetEnum.OWL_VISUALIZER).enable(),ol.onStop())}function nl(){var e,t;return C(this,void 0,void 0,(function*(){const i=Ia();if(null===(e=null==i?void 0:i.graph)||void 0===e?void 0:e.id){const e=Z(void 0,ta());cn(yield Xs(e.deleteGraphElementId(null===(t=null==i?void 0:i.graph)||void 0===t?void 0:t.id,i,oa())))}}))}var ol={getSelectedEndpoint:()=>{var e;return null===(e=va())||void 0===e?void 0:e.name},getQueryBody:Ia,startStopButton:Bs.startSparqlingButton,runQueryButton:Bs.runQueryButton,onQueryRun:void 0,onQuerySave:void 0,onShowSettings:void 0,onEndpointSelection:void 0,onToggleCatalog:void 0,redirectToSPARQLPage:void 0,onStop:()=>{},onStart:()=>{},start:tl,stop:il,loadQuery:function(t,i){return C(this,void 0,void 0,(function*(){yield nl(),_s.hide(),wi().widgets.get(e.WidgetEnum.INITIAL_RENDERER_SELECTOR).hide();const n=wi();n.renderState||Ya()||n.setRenderer(new u),cn(t),Xr(n.theme),qs.checked=Ra(),hn.checked=La(),t.limit&&t.limit>0&&(gn.value=t.limit.toString()),(t.offset||0===t.offset)&&(vn.value=t.offset.toString()),Xa(!1),Bs.queryName=i,setTimeout((()=>jn.fit()),200)}))},setQueryDirtyState:e=>{Xa(e),Bs.requestUpdate()},setQueryName:e=>Bs.queryName=e};let rl;function sl(e,i,o){var r,s;return C(this,void 0,void 0,(function*(){const a=wi();new n(e,a.ontology.namespaces);const l=Sa();if(!l||!Ti(l.graphElement,e)||rl){switch(i){case t.OBJECT_PROPERTY:break;case t.CLASS:null===(r=function(e){var t,i,n;return C(this,void 0,void 0,(function*(){const o=new W(void 0,ta()),r="string"==typeof e?e:e.data().iri;let s=new Promise((e=>{e(null)})),a=Ia();if((null===(t=a.graph)||void 0===t?void 0:t.id)&&!Ga(r)&&!rl&&!xs(r))return console.warn("selection ignored for class "+r),s;let l=Sa();if(rl&&rl.objectPropertyIRI&&(null==l?void 0:l.graphElement.id))s=Xs(o.putQueryGraphObjectProperty(l.graphElement.id,"",rl.objectPropertyIRI,r,rl.direct||!1,a,oa()));else if((null===(i=a.graph)||void 0===i?void 0:i.id)&&Ga(r)&&(null==l?void 0:l.graphElement.id))s=Xs(o.putQueryGraphClass(l.graphElement.id,"",r,a,oa()));else if(!(null===(n=a.graph)||void 0===n?void 0:n.id)){const e=yield Xs(o.getQueryGraph(r,oa()));s=Xs(new Y(void 0,ta()).distinctQueryGraph(!0,e,oa()))}return rl=null,s}))}(e))||void 0===r||r.then((t=>{t&&(cn(t),o&&Ta().set(t.activeGraphElementId+e,o))}));break;case t.DATA_PROPERTY:null===(s=function(e){return C(this,void 0,void 0,(function*(){const t="string"==typeof e?e:e.data().iri;let i=new Promise((e=>{e(null)}));if(!Ga(t))return i;const n=Ia(),o=Sa();if(!(null==o?void 0:o.graphElement.id))return i;if(Ai(o.graphElement)){i=Xs(new W(void 0,ta()).putQueryGraphDataProperty(o.graphElement.id,"",t,n,oa()))}return rl=null,i}))}(e))||void 0===s||s.then((t=>{var i;if(!t)return;const n=ji(null===(i=Ia())||void 0===i?void 0:i.graph,t.graph);o&&function(e,t,i){let n=null==t?void 0:t.find((e=>Ti(e,i)));n&&Ta().set(n.id+i,e)}(o,n,e),cn(t)}))}a.unselect()}}))}function al(e,i,n){const o=wi();rl=e,!Ya()&&n&&(o.centerOnElement(n.id,n.diagramId),o.selectElement(n.id)),sl(i,t.CLASS,n)}function ll(e){return C(this,void 0,void 0,(function*(){let t;if(yield ha(),!(yield ga()))return ua().length>1?(t=yield Bs.requestEndpointSelection(),void e(t)):void e(void 0);e(va())}))}var dl;!function(e){Qi=e}(al),function(e){e[e.TIMEOUT_EXPIRED=0]="TIMEOUT_EXPIRED",e[e.DONE=1]="DONE",e[e.RUNNING=2]="RUNNING",e[e.IDLE=3]="IDLE"}(dl||(dl={}));class cl{constructor(e,t,i){this.lastRequestFulfilled=!0,this.onNewResults=e=>{},this.onTimeoutExpiration=()=>{},this.onStop=()=>{},this.status=dl.IDLE,this.endpoint=e,this.executionID=t,this.limit=i}poll(){this.status=dl.RUNNING,Xs(v.request(this.queryResultRequestOptions)).then((e=>{this._result=e,this.lastRequestFulfilled=!0,e.results.length>=this.limit&&this.stop(),this.onNewResults(e)}))}start(){this.interval=setInterval((()=>{this.lastRequestFulfilled&&(this.lastRequestFulfilled=!1,this.poll())}),cl.INTERVAL_LENGTH),this.timeout=setTimeout((()=>{0===this.result.results.length?this.stop(!0):this.stop()}),cl.TIMEOUT_LENGTH)}stop(e=!1){e?(this.status=dl.TIMEOUT_EXPIRED,console.warn(`[Sparqling] Timeout expired for query with id = [${this.executionID}]`),this.onTimeoutExpiration()):this.status=dl.DONE,clearInterval(this.interval),clearTimeout(this.timeout),this.onStop()}get result(){return this._result}get queryResultRequestOptions(){return{url:localStorage.getItem("mastroUrl")+"/endpoint/"+this.endpoint.name+"/query/"+this.executionID+"/results",method:"get",params:{pagesize:10,pagenumber:1},headers:na()}}}function pl(e,t){return C(this,void 0,void 0,(function*(){ll((i=>C(this,void 0,void 0,(function*(){if(!i)return console.warn("No endpoints available"),t.loadingExamples=!1,t.addMessage("No endpoint available","error-message"),void setTimeout((()=>t.resetMessages()),3e3);const n=Ci(e);if(n){const e=yield gl(n,i,t.examplesSearchValue);if(!e)return;const o=yield Xs(v.request(ul(i,e))),r=new cl(i,o.executionId,10);r.onNewResults=e=>{r.status!==dl.RUNNING&&(t.loadingExamples=!1),t.examples=e},r.onTimeoutExpiration=r.onStop=()=>{t.loadingExamples=!1},r.start()}}))))}))}function ul(e,t){const i=new URLSearchParams({useReplaceForUrlEncoding:"true",querySemantics:"auto",reasoning:"true",expandSparqlTables:"true"});return{method:"post",url:new URL(`${localStorage.getItem("mastroUrl")}/endpoint/${e.name}/query/start?${i.toString()}`).toString(),data:{queryID:Math.random(),queryDescription:"",queryCode:t},headers:na()}}function hl(e){return C(this,void 0,void 0,(function*(){const t=Ci(e);t&&((Pi(t)||Li(t))&&(zs.allowSearch=!0),zs.result=void 0,zs.title="Examples",zs.show(),zs.onSearchExamples((()=>{hl(e)})),ll((e=>C(this,void 0,void 0,(function*(){if(!e)return;zs.isLoading=!0;const i=yield gl(t,e,zs.examplesSearchValue);if(!i)return;const n=yield Xs(v.request(ul(e,i))),o=new cl(e,n.executionId,10);o.onNewResults=e=>{o.status!==dl.RUNNING&&(zs.isLoading=!1),zs.result=e},o.onTimeoutExpiration=o.onStop=()=>{zs.isLoading=!1},o.start()})))))}))}function gl(e,t,i){var n;return C(this,void 0,void 0,(function*(){let o=(yield Xs(v.request({method:"get",url:localStorage.getItem("mastroUrl")+"/endpoint/"+t.name+"/prefixes",headers:na()}))).map((e=>`PREFIX ${e.name} <${e.namespace}>`)).join("\n"),r=Hi(e);if(r.length>0){if(Ai(e))o+=`\nSELECT DISTINCT * WHERE { \n        ${r.map((e=>`?Examples  rdf:type <${e}>.`)).join("\n")}\n      }`;else{const t=$i(null===(n=Ia())||void 0===n?void 0:n.graph,(t=>{var i;return(null===(i=t.children)||void 0===i?void 0:i.includes(e))||!1})),s=Si(e);if(t){if(r=Hi(t),!(r.length>0&&s))return;o+=`\nSELECT DISTINCT ?Examples WHERE {\n            ${r.map((e=>`?x rdf:type <${e}>.`)).join("\n")}\n            ?x <${s}> ?Examples;`}else s&&(o+=`\nSELECT DISTINCT ?Examples WHERE { ?x  <${s}> ?Examples;`);i&&(o+="contains"===localStorage.getItem("instances-search-function")?`\nFILTER (contains(?Examples, "${i}"))`:`\nFILTER (regex(?Examples, "${i}", 'i'))`),o+=" }"}return o+="\nLIMIT 10",o}}))}function vl(e){Ya()&&Ss(),e.renderer.cy&&e.renderState!==i.INCREMENTAL&&(fl(e.renderer.cy),Vi(e.renderer.cy,Bi(e.theme))),e.renderState!==i.INCREMENTAL&&Za()&&(ki(),ln(),an())}function fl(e){const i=`[iri][type = "${t.OBJECT_PROPERTY}"]`;e.on("mouseover",i,(e=>{Za()&&!ya(e.target.data().iri)&&function(e,t){var i;const o=qa();if(!o||!Ga(e))return;const r=wi(),s=r.ontology.getEntity(e);if(!s)return;let a=null===(i=o.objectProperties)||void 0===i?void 0:i.find((e=>{if(null==e?void 0:e.objectPropertyIRI)return s.iri.equals(e.objectPropertyIRI)}));if(!a||!a.relatedClasses||a.relatedClasses.length<=0)return;Ds.list=a.relatedClasses.map((e=>new n(e,r.ontology.namespaces).prefixed));const l=Sa();l&&(Ds.class=l.iri.prefixed||l.iri.fullIri,Ds.objProperty=s.iri.prefixed,Ds.reverseArrow=!a.direct,Ds.showInPosition(t),Ds.onSelection=e=>{try{if(a){const t=Ui(e);(null==t?void 0:t.iri)&&Qi(a,t.iri,t)}}catch(e){console.error(e)}})}(e.target.data("iri"),e.renderedPosition)})),e.on("mouseover",`.${Qa}`,(e=>{if(ya(e.target.data().iri)){const t=e.target.popperRef(),i=document.createElement("span");i.innerHTML=vi(),Ws.attachTo(t,void 0,[i]),setTimeout((()=>Ws.tippyWidget.hide()),1e3)}})),e.on("mouseout",i,(e=>{Za()&&(Ds.list=[],Ds.hide())})),e.on("dblclick","[iri]",(e=>{const t=wi(),i=t.ontology.getGrapholElement(e.target.id(),t.diagramId,t.renderState);i&&Za()&&void 0!==t.diagramId&&!ya(e.target.data().iri)&&sl(e.target.data().iri,e.target.data().type,i)}))}function ml(e,t){var i;let n,o;if(function(e){return!!e.graphElementId}(e)&&e.graphElementId?(n=Ci(e.graphElementId),o=e.alias):function(e){return!!e.entities}(e)&&(n=e),!n)return;const r=Si(n);r&&(Ai(n)?t.parametersType=V:t.parametersType=U,t.modality=Kt.DEFINE,t._id=t instanceof di?void 0:e.id,t.parameters=[{type:N,constantType:void 0,value:n.id}],t.datatypeFromOntology=Ii(n)===q.Annotation?"xsd:string":null===(i=wi().ontology.getEntity(r))||void 0===i?void 0:i.datatype,t.setDefaultOperator(),t.variableName=o||n.id,t.examples=void 0,t.acceptExamples=!ra()&&(Ai(n)||Pi(n)||Li(n)),t.examplesSearchValue=void 0,t.loadingExamples=!1,t.canSave=!0,t.show())}function yl(e){return C(this,void 0,void 0,(function*(){if(null==e)return;Xs(new K(void 0,ta()).removeFilter(e,Ia(),oa())).then((e=>{var t;cn(e),Ns._id=void 0,Ns.operator=void 0,null===(t=Ns.parameters)||void 0===t||t.splice(1),Ns.modality=Kt.DEFINE,Ns.setAsCorrect("Deleted correctly")}))}))}function bl(e){var t,i,n,o,r,s,a,l;const d=function(e){const t=Ia();if(t.filters)return t.filters[e]}(e);if(d){Ns.modality=Kt.EDIT,Ns._id=e,Ns.operator=null===(t=d.expression)||void 0===t?void 0:t.operator,Ns.variableName=(null===(i=d.expression)||void 0===i?void 0:i.parameters)&&(null===(o=null===(n=d.expression)||void 0===n?void 0:n.parameters[0])||void 0===o?void 0:o.value);let c=null===(r=d.expression)||void 0===r?void 0:r.parameters;(null===(s=d.expression)||void 0===s?void 0:s.parameters)&&d.expression.operator===G.Regex&&(c=JSON.parse(JSON.stringify(null===(a=d.expression)||void 0===a?void 0:a.parameters)),c&&c[2]&&(Ns.caseSensitiveCheckbox&&(Ns.caseSensitiveCheckbox.checked="i"!==c[2].value),c.splice(2))),Ns.parameters=c,Ns.parametersType=(null===(l=d.expression)||void 0===l?void 0:l.parameters)?d.expression.parameters[1].type:void 0,Ns.show(),Us.hide()}}function xl(e){return C(this,void 0,void 0,(function*(){if("label"!==e&&"comment"!==e)return void console.warn(`Annotations of kind [${e}] are not supported yet.`);const t=new W(void 0,ta()),i=Sa();if(null==i?void 0:i.graphElement.id){const n=yield Xs(t.putQueryGraphAnnotation(i.graphElement.id,"",`http://www.w3.org/2000/01/rdf-schema#${e}`,Ia(),oa()));n&&cn(n)}}))}cl.TIMEOUT_LENGTH=5e3,cl.INTERVAL_LENGTH=1e3,hs((e=>C(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.id){const t=te(void 0,ta()),i=Ia();Xs(t.addHeadTerm(e.id,i,oa())).then((e=>{cn(e)}))}})))),gs(((e,t)=>{var i;if(!e.id)return;const n=Z(void 0,ta()),o=Ia(),r=null===(i=Sa())||void 0===i?void 0:i.graphElement;function s(t){e.id&&(Ta().delete(e.id),cn(t))}t?Xs(n.deleteGraphElementIdClass(e.id,t,o,oa())).then((e=>{s(e)})):Xs(n.deleteGraphElementId(e.id,o,oa())).then((t=>{if(t.graph&&!$i(t.graph,(e=>e.id===(null==r?void 0:r.id)))){let i=$i(o.graph,(t=>{var i;return(null===(i=t.children)||void 0===i?void 0:i.some((t=>{var i;if(null===(i=t.children)||void 0===i?void 0:i.find((t=>t.id===e.id)))return!0})))||!1}));t.activeGraphElementId=null==i?void 0:i.id}s(t)}))})),ys(((e,t)=>C(void 0,void 0,void 0,(function*(){if(e.id&&t.id){const i=Z(void 0,ta()),n=Ia();Xs(i.putQueryGraphJoin(e.id,t.id,n,oa())).then((e=>{cn(e)}))}})))),bs(((t,i)=>{var o;const r=wi();Ai(t)&&(null===(o=Sa())||void 0===o?void 0:o.graphElement)!==t&&($a({graphElement:t,iri:new n(i,r.ontology.namespaces)}),rn(Hi(t))),Ya()||function(e,t){const i=wi(),n=t||Si(e);if(n){const t=Ta().get(e.id+n);t?(i.centerOnElement(t.id,t.diagramId,1.5),i.selectElement(t.id)):i.selectEntity(n,void 0,1.5)}}(t,i);const s=r.widgets.get(e.WidgetEnum.ENTITY_DETAILS);s.setGrapholEntity(r.ontology.getEntity(i)),s.show();const a=Sa();(null==a?void 0:a.graphElement.id)&&ls(a.graphElement.id)})),os((e=>{if(e.id){const t=oe(void 0,ta()),i=Ia();Xs(t.newOptionalGraphElementId(e.id,i,oa())).then((e=>{cn(e)}))}})),rs((e=>{if(e.id){const t=oe(void 0,ta()),i=Ia();Xs(t.removeOptionalGraphElementId(e.id,i,oa())).then((e=>{cn(e)}))}})),vs((e=>{ml(e,Ns)})),fs((e=>{if(e.id&&on.shadowRoot){for(const t of on.shadowRoot.querySelectorAll("head-element")){const i=t;if(i.graphElementId===e.id)return i.focus(),i.openPanel(),void i.scrollIntoView({behavior:"smooth"})}const t=ja(e.id);t&&(Us.filterList=t),Us.variable=e.id,Us.show()}})),ms((e=>{e.id&&(zs.examplesSearchValue=void 0,hl(e.id))})),ss.onSparqlButtonClick=()=>Gs.isVisible?Gs.hide():Gs.show(),ss.onQueryClear=()=>{e.showMessage("Are you sure to reset the query?","Confirm Action",wi().uiContainer).onConfirm(nl)},ss.onFullScreenEnter=()=>{Fi.requestFullscreen().then((()=>setTimeout((()=>jn.fit()),200))),Fi.appendChild(Js),Js.onclick=()=>{document.exitFullscreen().then((()=>setTimeout((()=>jn.fit()),200))),Js.remove()}},ss.onCenterDiagram=()=>jn.fit(),Us.onEdit((e=>bl(e))),Us.onDelete((e=>{yl(e)})),Ns.onSubmit(((e,t,i)=>C(void 0,void 0,void 0,(function*(){const n=new K(void 0,ta()),o={expression:{operator:t,parameters:JSON.parse(JSON.stringify(i))}};t===G.Regex&&o.expression.parameters.push({value:Ns.isCaseSensitive?"":"i",type:U,constantType:Q.String});const r=Aa();function s(e){cn(e),Ns.setAsCorrect()}null==e?(r.filters||(r.filters=[]),e=r.filters.push(o)-1,Xs(n.newFilter(e,r,oa())).then((t=>{Ns._id=e,Ns.modality=Kt.EDIT,s(t)}))):r.filters&&(r.filters[e]=o,Xs(n.editFilter(e,r,oa())).then((e=>{s(e)})))})))),Ns.onDelete((e=>yl(e))),Ns.onSeeExamples((e=>C(void 0,void 0,void 0,(function*(){e.value&&pl(e.value,Ns)})))),function(e){on.onDelete((t=>{const i=Pa(t);i&&e(i)}))}((e=>C(void 0,void 0,void 0,(function*(){const t=te(void 0,ta()),i=Ia();e.id&&Xs(t.deleteHeadTerm(e.id,i,oa())).then((e=>{cn(e)}))})))),function(e){on.onRename(((t,i)=>{e(t,i)}))}(((e,t)=>C(void 0,void 0,void 0,(function*(){const i=te(void 0,ta()),n=Aa(),o=Pa(e,n);(null==o?void 0:o.id)&&(o.alias=t,Xs(i.renameHeadTerm(o.id,n,oa())).then((e=>{cn(e)})))})))),function(e){on.onLocalize((t=>{const i=Pa(t);i&&e(i)}))}((e=>{if(e.graphElementId){let t=Ci(e.graphElementId);if(t){const e=Si(t);e&&(ps(t),Ya()||wi().centerOnEntity(e))}}})),function(e){on.onAddFilter((t=>{e(t)}))}((e=>{const t=Pa(e);t&&ml(t,Ns)})),function(e){on.onEditFilter((t=>e(t)))}((e=>{bl(e)})),function(e){on.onDeleteFilter((t=>e(t)))}((e=>{yl(e)})),function(e){on.onAddFunction((t=>e(t)))}((e=>{const t=Pa(e);t&&ml(t,Vs)})),function(e){Wi=e}(((e,t)=>{const i=Pa(e);if(!i)return;const n=te(void 0,ta()),o=Aa(),r=o.head,s=r[t],a=r.map((e=>e.id));r.splice(a.indexOf(e),1),r.splice(a.indexOf(s.id),0,i),Xs(n.reorderHeadTerms(o,oa())).then((e=>cn(e)))})),function(e){on.onOrderByChange((t=>e(t)))}((e=>{const t=Aa(),i=t.head.find((t=>t.id===e));i&&(i.ordering=(i.ordering||0)+1,i.ordering>=2&&(i.ordering=-1));Xs(te(void 0,ta()).orderByHeadTerm(e,t,oa())).then((e=>{cn(e)}))})),function(e){on.onAddAggregation((t=>e(t)))}((e=>{const t=Pa(e);t&&(ml(t,Qs),Qs.aggregateOperator=M.Count,Qs.definingHaving=!1,Qs.distinct=!1,Qs.distinctCheckboxElem&&(Qs.distinctCheckboxElem.checked=!1))})),function(e){on.onHighlightVariable((t=>e(t)))}((e=>{const t=Pa(e);(null==t?void 0:t.graphElementId)&&ws(t.graphElementId)})),function(e){on.onResetHighlightOnVariable((t=>e(t)))}(Es),Bs.onSparqlingStart((()=>{try{tl()}catch(e){return void console.error(e)}ol.onStart()})),Bs.onSparqlingStop((()=>{il(),ol.onStop()})),Bs.onQueryRun((()=>C(void 0,void 0,void 0,(function*(){yield ll((e=>{var t;e&&ol.onQueryRun?ol.onQueryRun(null===(t=Ia())||void 0===t?void 0:t.sparql):Bs.togglePanel()}))})))),Bs.onQuerySave((()=>{ol.onQuerySave&&ol.onQuerySave(Ia())})),Bs.onShowSettings((()=>{ol.onShowSettings&&ol.onShowSettings()})),Bs.onEndpointChange((e=>{const t=ua().find((t=>t.name===e));t&&(fa(t),Bs.selectedEndpointName=t.name,ol.onEndpointSelection&&ol.onEndpointSelection(t))})),Bs.onTogglePanel=()=>C(void 0,void 0,void 0,(function*(){var e;yield ha(),Bs.endpoints=ua(),Bs.selectedEndpointName=null===(e=va())||void 0===e?void 0:e.name})),Bs.onShowResults((()=>{ol.onShowResults&&ol.onShowResults()})),Bs.onToggleCatalog((()=>{ol.onToggleCatalog&&ol.onToggleCatalog()})),Qs.onSubmit(((e,t,i,n,o)=>{const r=new ie(void 0,ta()),s=Aa(),a=Pa(e,s);a&&(a.groupBy={distinct:i,aggregateFunction:t},Qs.definingHaving&&n&&o&&(a.having=[{expression:{operator:n,parameters:o}}]),Xs(r.aggregationHeadTerm(e,s,oa())).then((e=>{cn(e),Qs.setAsCorrect()})))})),Qs.onSeeExamples((e=>C(void 0,void 0,void 0,(function*(){e.value&&pl(e.value,Qs)})))),Vs.onSubmit(((e,t,i)=>C(void 0,void 0,void 0,(function*(){const n=new ie(void 0,ta()),o={name:t,parameters:i},r=Aa();if(e){const t=r.head.find((t=>t.id===e));t&&(t.function=o,Xs(n.functionHeadTerm(e,r,oa())).then((e=>{cn(e),Vs.setAsCorrect()})))}})))),Vs.onSeeExamples((e=>C(void 0,void 0,void 0,(function*(){e.value&&pl(e.value,Vs)}))));class wl extends(e.ModalMixin(e.BaseMixin(pt))){constructor(e){super(),this.theme=e,this._paths=[],this.selectedPathID=0,this.canShowMore=!1,this.cy=f(),this.getDisplayedName=e=>e.iri}render(){return Qe`
      <div class="gscape-panel">
        <div class="header">Select a path over the ontology</div>
      
        <!-- <div class="path-list">
                      ${this.paths.map(((e,i)=>{var n;return Qe`
                          <div id=${i} class="path actionable" ?selected=${this.selectedPathID===i} @click=${this.handlePathClick}>
                            ${0===i?Qe`
                                <span class="chip">
                                  Shortest
                                </span>
                              `:null}
                            
                            ${null===(n=e.entities)||void 0===n?void 0:n.map((e=>{var i;let n,o=new Set;return e.type!==q.ObjectProperty&&e.type!==q.InverseObjectProperty||((null===(i=e.iri)||void 0===i?void 0:i.endsWith("subClassOf"))?n="subClassOf":o.add(t.OBJECT_PROPERTY)),e.type===q.Class&&o.add(t.CLASS),Qe`
                                <gscape-entity-list-item
                                  displayedName=${n||this.getDisplayedName(e)}
                                  iri=${e.iri}
                                  .types=${o}
            
                                >
                                </gscape-entity-list-item>
                              `}))}
                          </div>
                        `}))}
                    </div> -->
      
        <div id="cy"></div>
      
        ${this.canShowMore?Qe`
        <center>
          <gscape-button label="Show More" type="subtle" size=${e.SizeEnum.S} @click=${this.handleShowMoreClick}>
          </gscape-button>
        </center>
        `:null}
      
        <div class="buttons">
          <gscape-button label="Cancel" type="subtle" @click=${this.handleCancel}></gscape-button>
          <gscape-button label="Ok" @click=${this.handleConfirm}></gscape-button>
        </div>
      </div>
    `}setTheme(e){var i,n;const r=g(e);r.push({selector:"node",style:{shape:"round-rectangle",width:100,height:35}},{selector:"edge",style:{"curve-style":"unbundled-bezier","control-point-distances":e=>this.getEdgePointDistances(e),"control-point-weights":e=>this.getEdgePointWeights(e)}},{selector:"[?inverseEdge]",style:{"source-arrow-shape":"triangle","source-arrow-fill":"filled"}},{selector:`[?inverseEdge][type = "${t.INCLUSION}"]`,style:{"target-arrow-shape":"none"}},{selector:`[?inverseEdge][type = "${t.OBJECT_PROPERTY}"]`,style:{"target-arrow-shape":"square","target-arrow-fill":"hollow"}},{selector:".dimmed",style:{opacity:.4}},{selector:".highlighted",style:{"underlay-opacity":"1","underlay-color":e.getColour(o.neutral_muted),opacity:1}},{selector:"edge.selected",style:{width:4}},{selector:".selected",style:{"border-color":e.getColour(o.accent),"border-width":4,"line-color":e.getColour(o.accent),"target-arrow-color":e.getColour(o.accent),"source-arrow-color":e.getColour(o.accent),"z-index":10}}),null===(n=null===(i=this.cy)||void 0===i?void 0:i.style())||void 0===n||n.fromJson(r).update()}getEdgePointDistances(e){if(e.source().same(e.cy().elements().roots())&&e.target().same(e.cy().elements().leaves()))return[-60];let t;const i=e.source().position(),n=e.target().position(),o=Math.abs(i.x-n.x);let r=i.y-n.y;const s=r<0;return r=Math.abs(r),t=o<Math.abs(r)?o:r,t/=4,s?[-t,t]:[t,-t]}getEdgePointWeights(e){var t;return e.source().same(e.cy().elements().roots())&&e.target().same(e.cy().elements().leaves())?[.5]:(1===e.target().degree(!1)&&(Math.max(...this._paths.map((e=>{var t;return(null===(t=e.entities)||void 0===t?void 0:t.length)||0}))),null===(t=this._paths[e.data().pathId].entities)||void 0===t||t.length),[.25,.75])}handlePathClick(e){var t;const i=null===(t=e.currentTarget)||void 0===t?void 0:t.getAttribute("id");i&&(this.selectedPathID=parseInt(i))}handleShowMoreClick(e){return C(this,void 0,void 0,(function*(){yield this.updateComplete,this.dispatchEvent(new CustomEvent("show-more-paths",{bubbles:!0,composed:!0}))}))}handleConfirm(){return C(this,void 0,void 0,(function*(){yield this.updateComplete,this.dispatchEvent(new CustomEvent("path-selection",{bubbles:!0,composed:!0,detail:this.selectedPath})),this.remove()}))}handleCancel(){return C(this,void 0,void 0,(function*(){yield this.updateComplete,this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0})),this.remove()}))}get selectedPath(){return this.paths[this.selectedPathID]}get paths(){return this._paths}set paths(e){this.updateComplete.then((()=>{if(this.cyInit(),!this.cy||e.length<=0||!e[0].entities)return;const t=this._paths;this._paths=e;const i=this.cy.add(this.getEntityCyRepr(e[0].entities[0],-1)),n=this.cy.add(this.getEntityCyRepr(e[0].entities[e[0].entities.length-1],-1));for(let[t,o]of e.entries())if(o.entities){let e,r,s;for(let[a,l]of o.entities.entries())if(l.type===q.ObjectProperty||l.type===q.InverseObjectProperty){let d=o.entities[a-1],c=o.entities[a+1];if(!d||!c)break;if(1===a?r=i:(r=this.cy.$(`[iri = "${d.iri}"][type = "${q.Class}"][pathId = ${t}]`).first(),r.empty()&&(r=this.cy.add(this.getEntityCyRepr(d,t)))),a===o.entities.length-2?s=n:(s=this.cy.$(`[iri = "${c.iri}"][type = "${q.Class}"][pathId = ${t}]`).first(),s.empty()&&(s=this.cy.add(this.getEntityCyRepr(c,t)))),r.empty()||s.empty())break;e=this.getEntityCyRepr(l,t),e.data.source=r.id(),e.data.target=s.id(),this.cy.add(e)}}this.cy.layout({name:"klay",klay:{spacing:80,fixedAlignment:"BALANCED"},padding:30}).run(),this.cy.fit(),this.selectPath(0),this.requestUpdate("paths",t)}))}getEntityCyRepr(e,i){var n;let o;switch(e.type){case q.Class:o=t.CLASS;break;case q.InverseObjectProperty:case q.ObjectProperty:o=(null===(n=e.iri)||void 0===n?void 0:n.endsWith("subClassOf"))?t.INCLUSION:t.OBJECT_PROPERTY;break;default:o=t.CLASS}return{data:{displayedName:this.getDisplayedName(e),type:o,iri:e.iri,pathId:i,inverseEdge:e.type===q.InverseObjectProperty}}}cyInit(){var e;this.cy=f({container:null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#cy"),autounselectify:!0,autoungrabify:!0,wheelSensitivity:.2}),this.setTheme(this.theme),this.fixHover(),this.cy.on("mouseover","*",(e=>{var t;const i=e.target.data().pathId;if(void 0!==i){this.highlightPath(i);const e=null===(t=this.cy)||void 0===t?void 0:t.container();e&&(e.style.cursor="pointer")}})),this.cy.on("tap",(e=>{if(e.target===this.cy)this.paths.forEach(((e,t)=>{this.deHighlightPath(t)}));else{const t=e.target.data().pathId;void 0!==t&&this.selectPath(t)}this.fixHover()})),this.cy.on("dbltap",(e=>{var t;e.target===this.cy&&(null===(t=this.cy)||void 0===t||t.fit()),this.fixHover()})),this.cy.on("mouseout","*",(e=>{var t;const i=e.target.data().pathId;if(void 0!==i){this.deHighlightPath(i);const e=null===(t=this.cy)||void 0===t?void 0:t.container();e&&(e.style.cursor="initial")}}))}highlightPath(e){var t;-1!==e&&(null===(t=this.cy)||void 0===t||t.$(`[pathId = ${e}]`).addClass("highlighted"))}deHighlightPath(e){var t;-1!==e&&(null===(t=this.cy)||void 0===t||t.$(`[pathId = ${e}]`).removeClass("highlighted"))}selectPath(e){var t,i,n,o,r;-1!==e&&(null===(t=this.cy)||void 0===t||t.elements().removeClass("selected dimmed"),null===(i=this.cy)||void 0===i||i.$("[pathId = -1]").addClass("selected"),null===(n=this.cy)||void 0===n||n.$(`[pathId = ${e}]`).addClass("selected"),null===(o=this.cy)||void 0===o||o.$("*").difference(null===(r=this.cy)||void 0===r?void 0:r.$(".selected")).addClass("dimmed"),this.selectedPathID=e)}fixHover(){try{this.cy.renderer().hoverData.capture=!0}catch(e){}}}function El(e,t){if(t&&void 0!==t.graphElement.id){Xs(new W(void 0,ta()).addPathToQueryGraph(t.graphElement.id,JSON.stringify(e),Ia(),oa())).then((e=>{cn(e)}))}}function Cl(){const t=new e.GscapeFullPageSelector;t.title="Do you want to use the Ontology Graph?",t.options=[{name:"Only Suggestions",description:"You do not need to know the ontology graph. Start from a class and proceed using our suggestions.",icon:bt,id:"full-page"},{name:"Ontology Graph & Suggestions",description:"Use the ontology graph and our suggestions to build your query.",icon:e.icons.bubbles,id:"standard"}],t.onOptionSelection=e=>{tl().then((t=>{"full-page"===e?Is():Ss()}))},wi().container.appendChild(t)}function Ol(e,t){Ka();const i=Sl(e,t);return Cl(),i}function $l(t,n,o,r){var s,a;return C(this,void 0,void 0,(function*(){Ka(),$(r),t.renderState===i.INCREMENTAL&&t.widgets.get(e.WidgetEnum.ENTITY_SELECTOR).hide();const l=Sl(t,n);if(l){ea(o),(null===(s=Ia())||void 0===s?void 0:s.graph)?yield nl():cn(Ia()),yield ha(),Bs.endpoints=ua(),Bs.selectedEndpointName=null===(a=va())||void 0===a?void 0:a.name,Bs.allowOntologyGraph=!1!==(null==r?void 0:r.allowOntologyGraph);const e=localStorage.getItem("obda-systems.sparqling-ontologyGraph");"true"===e&&!1!==(null==r?void 0:r.allowOntologyGraph)?Za()?Ss():tl().then(Ss):"false"===e||!1===(null==r?void 0:r.allowOntologyGraph)?Za()?Is():tl().then(Is):Cl()}return l}))}function Sl(e,t){if(t&&e){za(new File([t],`${e.ontology.name}-from-string.graphol`));wi()!==e&&(Ei(e),function(){const e=wi();function t(){const t=t=>{const i=e.ontology.getEntity(t.value.iri.fullIri);i&&(t.displayedName=i.getDisplayedName(e.entityNameType,e.language))};Ms.allHighlights&&(Ms.allHighlights.classes.forEach((e=>t(e))),Ms.allHighlights.dataProperties.forEach((e=>t(e))),Ms.allHighlights.objectProperties.forEach((e=>t(e))),Ms.requestUpdate())}e.renderer.cy&&Vi(e.renderer.cy,Bi(e.theme)),e.renderer.cy&&e.renderState!==i.INCREMENTAL&&fl(e.renderer.cy),e.on(h.LanguageChange,(i=>{qn(i),e.entityNameType===a.LABEL&&t()})),e.on(h.EntityNameTypeChange,(i=>{Yr(i,e.language),t()})),e.on(h.ThemeChange,(t=>{Xr(t),e.renderer.cy&&e.renderer.cy!==jn&&Vi(e.renderer.cy,Bi(t))})),e.on(h.DiagramChange,(()=>vl(e))),e.on(h.RendererChange,(()=>vl(e)))}()),zi.appendChild(on),zi.appendChild(Ms);const n=e.container.querySelector(".gscape-ui");return n&&(n.insertBefore(ss,n.firstChild),n.insertBefore(zi,n.firstChild),n.appendChild(Ds),n.appendChild(Gs),n.appendChild(Ns),n.appendChild(Us),n.appendChild(Vs),n.appendChild(Qs),n.appendChild(zs),n.appendChild(Fs),n.appendChild(_s),n.appendChild(Zs),n.appendChild(Bs)),Yr(e.entityNameType,e.language),Xr(e.theme),ol}return null}wl.properties={getMorePaths:{type:Boolean},paths:{type:Array},selectedPathID:{type:Number},canShowMore:{type:Boolean}},wl.styles=[e.baseStyle,ue`
      .gscape-panel {
        position: absolute;
        overflow: hidden;
        top: 100px;
        left: 50%;
        transform: translate(-50%);
        max-width: 80%;
        min-width: 60%;
        min-height: 50%;
        display: flex;
        flex-direction: column;
      }

      .header {
        margin: 8px;
      }

      .buttons {
        display: flex;
        align-items: center;
        justify-content: right;
        gap: 8px;
      }

      .path {
        display: flex;
        align-items: center;
        overflow: auto;
        gap: 4px;
        border: solid 1px var(--gscape-color-border-subtle);
      }

      .path[selected] {
        border: solid 2px var(--gscape-color-accent);
        background: var(--gscape-color-neutral-subtle);
      }

      gscape-entity-list-item {
        max-width: 200px;
        pointer-events: none;
      }

      .path-list {
        margin: 16px 0;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      #cy {
        position: relative;
        flex-grow: 2;
      }
    `],customElements.define("sparqling-path-selector",wl),Ms.onSuggestionLocalization((e=>{Ya()||wi().centerOnEntity(e)})),Ms.onSuggestionAddToQuery(((e,i,o)=>{var r,s;switch(i){case t.CLASS:case t.DATA_PROPERTY:const a=Ui(e);a&&sl(e,i,a);break;case t.OBJECT_PROPERTY:if(o){const t=null===(s=null===(r=qa())||void 0===r?void 0:r.objectProperties)||void 0===s?void 0:s.find((t=>{if(t.objectPropertyIRI)return t.objectPropertyIRI===e||(i=t.objectPropertyIRI,(new n(i,wi().ontology.namespaces).prefixed||i)===e);var i})),i=wi().ontology.getEntity(o),a=Ui(o);i&&t&&al(t,i.iri.fullIri,a)}}})),Ms.onAddLabel((()=>xl("label"))),Ms.onAddComment((()=>xl("comment"))),Ms.onFindPathsClick((()=>function(t){var i;const n=wi(),o=new e.ShortestPathDialog;o.classes=Hs(n);const r=Sa();(null==r?void 0:r.iri)&&(o.class1EditEnabled=!1,o.class1=r.iri.fullIri);o.onConfirm(((e,i)=>{Xs(new F(void 0,ta()).highligthsPaths(e,i,t,oa())).then((e=>{var t;if(1===e.length)El(e[0],r);else{const i=new wl(n.theme);i.paths=e,i.addEventListener("path-selection",(e=>{El(e.detail,r)})),i.getDisplayedName=e=>{if(!e.iri)return;const t=n.ontology.getEntity(e.iri);return null==t?void 0:t.getDisplayedName(n.entityNameType,n.language)},null===(t=n.uiContainer)||void 0===t||t.appendChild(i),i.show()}}))})),null===(i=n.uiContainer)||void 0===i||i.appendChild(o),o.show()}(!0))),_s.addEventListener("class-selection",(e=>C(void 0,void 0,void 0,(function*(){const t=e.detail;if(ya(t,q.Class))return;const i=new W(void 0,ta()),n=new Y(void 0,ta()),o=wi().ontology.getEntity(t);if(!o)return;const r=yield Xs(i.getQueryGraph(o.iri.fullIri,oa())),s=yield Xs(n.distinctQueryGraph(!0,r,oa()));s&&(cn(s),_s.hide())}))));export{Cs as queryGraph,$l as sparqling,Ol as sparqlingStandalone};
